<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Patterns - NodeSpace Design System</title>
  <meta name="description" content="Layout patterns, interaction behaviors, and responsive design guidelines for NodeSpace.">
  <link rel="stylesheet" href="assets/shadcn-variables.css">
  <link rel="stylesheet" href="assets/style-guide.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🧠</text></svg>">
  <style>
    /* Pattern demo specific styles */
    .pattern-demo {
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius);
      padding: 2rem;
      margin: 1rem 0;
      position: relative;
    }
    
    .layout-demo {
      display: grid;
      grid-template-columns: 1fr 300px;
      gap: 1rem;
      height: 400px;
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius);
      overflow: hidden;
    }
    
    .main-area {
      background: hsl(var(--background));
      padding: 1rem;
      overflow-y: auto;
    }
    
    .side-panel {
      background: hsl(var(--muted));
      border-left: 1px solid hsl(var(--border));
      padding: 1rem;
      overflow-y: auto;
    }
    
    .hierarchy-example {
      font-family: var(--font-mono);
      line-height: 1.6;
      margin: 1rem 0;
    }
    
    .hierarchy-node {
      display: flex;
      align-items: center;
      padding: 0.25rem 0;
      cursor: pointer;
      border-radius: 0.25rem;
      transition: background-color 0.15s ease;
    }
    
    .hierarchy-node:hover {
      background: hsl(var(--muted));
    }
    
    .hierarchy-indent {
      width: 24px;
      display: inline-block;
    }
    
    .hierarchy-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin-right: 8px;
      flex-shrink: 0;
    }
    
    .hierarchy-indicator--text { background: hsl(142 71% 45%); }
    .hierarchy-indicator--task { background: hsl(25 95% 53%); }
    .hierarchy-indicator--ai { background: hsl(221 83% 53%); }
    
    .interaction-demo {
      border: 2px dashed hsl(var(--border));
      border-radius: var(--radius);
      padding: 2rem;
      text-align: center;
      margin: 1rem 0;
      background: hsl(var(--muted));
    }
    
    .keyboard-shortcuts {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }
    
    .shortcut-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem;
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius);
    }
    
    .kbd {
      background: hsl(var(--background));
      padding: 0.125rem 0.375rem;
      border-radius: 0.25rem;
      border: 1px solid hsl(var(--border));
      font-family: var(--font-mono);
      font-size: 0.75rem;
      font-weight: 500;
    }
    
    .responsive-breakpoint {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius);
      margin: 0.5rem 0;
    }
    
    .breakpoint-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: hsl(var(--primary));
      flex-shrink: 0;
    }
  </style>
</head>
<body class="no-transitions">
  <div class="style-guide">
    <!-- Header -->
    <header>
      <h1>Patterns</h1>
      <p>Layout patterns, interaction behaviors, and responsive design guidelines for consistent NodeSpace user experiences.</p>
    </header>

    <!-- Navigation -->
    <nav class="style-guide-nav">
      <a href="index.html">Overview</a>
      <a href="foundations.html">Foundations</a>
      <a href="components.html">Components</a>
      <a href="patterns.html" class="active">Patterns</a>
      <a href="nodeviewer.html">NodeViewer</a>
      
      <div class="theme-toggle">
        <!-- Theme toggle buttons will be generated by JavaScript -->
      </div>
    </nav>

    <!-- Layout Patterns -->
    <section class="example-section">
      <h2>Layout Patterns</h2>
      <p>Foundational layout structures for NodeSpace interfaces, inspired by research on leading block-based note-taking tools.</p>
      
      <h3>Two-Panel Layout</h3>
      <div class="pattern-demo">
        <div class="layout-demo">
          <div class="main-area">
            <h4 style="margin: 0 0 1rem 0;">Main Content Area</h4>
            <div class="hierarchy-example">
              <div class="hierarchy-node">
                <span class="hierarchy-indicator hierarchy-indicator--text"></span>
                Welcome to NodeSpace
              </div>
              <div class="hierarchy-node">
                <span class="hierarchy-indent"></span>
                <span class="hierarchy-indicator hierarchy-indicator--text"></span>
                Child node content
              </div>
              <div class="hierarchy-node">
                <span class="hierarchy-indent"></span>
                <span class="hierarchy-indent"></span>
                <span class="hierarchy-indicator hierarchy-indicator--task"></span>
                Task: Review documentation
              </div>
              <div class="hierarchy-node">
                <span class="hierarchy-indent"></span>
                <span class="hierarchy-indicator hierarchy-indicator--ai"></span>
                AI-generated summary
              </div>
              <div class="hierarchy-node">
                <span class="hierarchy-indicator hierarchy-indicator--text"></span>
                Another top-level node
              </div>
            </div>
          </div>
          <div class="side-panel">
            <h4 style="margin: 0 0 1rem 0;">Properties Panel</h4>
            <div style="margin-bottom: 1rem;">
              <label style="display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">Node Type</label>
              <select style="
                width: 100%;
                padding: 0.5rem;
                border: 1px solid hsl(var(--border));
                border-radius: var(--radius);
                background: hsl(var(--background));
                color: hsl(var(--foreground));
              ">
                <option>Text</option>
                <option>Task</option>
                <option>AI Chat</option>
              </select>
            </div>
            <div style="margin-bottom: 1rem;">
              <label style="display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">Tags</label>
              <input style="
                width: 100%;
                padding: 0.5rem;
                border: 1px solid hsl(var(--border));
                border-radius: var(--radius);
                background: hsl(var(--background));
                color: hsl(var(--foreground));
              " placeholder="Add tags..." />
            </div>
            <div>
              <h5 style="margin: 0 0 0.5rem 0; font-size: 0.875rem;">Quick Actions</h5>
              <button style="
                width: 100%;
                padding: 0.5rem;
                margin-bottom: 0.5rem;
                border: 1px solid hsl(var(--border));
                background: hsl(var(--background));
                color: hsl(var(--foreground));
                border-radius: var(--radius);
                cursor: pointer;
              ">🤖 AI Assist</button>
              <button style="
                width: 100%;
                padding: 0.5rem;
                border: 1px solid hsl(var(--border));
                background: hsl(var(--background));
                color: hsl(var(--foreground));
                border-radius: var(--radius);
                cursor: pointer;
              ">📋 Copy Reference</button>
            </div>
          </div>
        </div>
        <p><strong>Usage:</strong> Primary layout for desktop NodeSpace interfaces. Main area for content editing, side panel for contextual tools and properties.</p>
      </div>
      
      <h3>Single-Column Layout</h3>
      <div class="pattern-demo">
        <div style="max-width: 800px; margin: 0 auto;">
          <div class="hierarchy-example">
            <div class="hierarchy-node">
              <span class="hierarchy-indicator hierarchy-indicator--text"></span>
              Project Planning Session
            </div>
            <div class="hierarchy-node">
              <span class="hierarchy-indent"></span>
              <span class="hierarchy-indicator hierarchy-indicator--text"></span>
              Meeting agenda and notes
            </div>
            <div class="hierarchy-node">
              <span class="hierarchy-indent"></span>
              <span class="hierarchy-indent"></span>
              <span class="hierarchy-indicator hierarchy-indicator--task"></span>
              Review budget allocations
            </div>
            <div class="hierarchy-node">
              <span class="hierarchy-indent"></span>
              <span class="hierarchy-indent"></span>
              <span class="hierarchy-indicator hierarchy-indicator--task"></span>
              Schedule follow-up meetings
            </div>
            <div class="hierarchy-node">
              <span class="hierarchy-indent"></span>
              <span class="hierarchy-indicator hierarchy-indicator--ai"></span>
              AI summary of key decisions
            </div>
          </div>
        </div>
        <p><strong>Usage:</strong> Optimal for mobile devices and focused writing sessions. Content takes full width with contextual panels accessed via overlay or drawer.</p>
      </div>
    </section>

    <!-- Interaction Patterns -->
    <section class="example-section">
      <h2>Interaction Patterns</h2>
      <p>Consistent interaction behaviors based on research from leading block-based note-taking tools (Logseq, Notion, Obsidian).</p>
      
      <h3>Keyboard Navigation</h3>
      <div class="keyboard-shortcuts">
        <div class="shortcut-item">
          <span>Navigate up/down</span>
          <span class="kbd">↑ ↓</span>
        </div>
        <div class="shortcut-item">
          <span>Indent node</span>
          <span class="kbd">Tab</span>
        </div>
        <div class="shortcut-item">
          <span>Outdent node</span>
          <span class="kbd">Shift + Tab</span>
        </div>
        <div class="shortcut-item">
          <span>Create new node</span>
          <span class="kbd">Enter</span>
        </div>
        <div class="shortcut-item">
          <span>Line break</span>
          <span class="kbd">Shift + Enter</span>
        </div>
        <div class="shortcut-item">
          <span>Bold text</span>
          <span class="kbd">Cmd + B</span>
        </div>
        <div class="shortcut-item">
          <span>Italic text</span>
          <span class="kbd">Cmd + I</span>
        </div>
        <div class="shortcut-item">
          <span>Trigger autocomplete</span>
          <span class="kbd">@</span>
        </div>
      </div>
      
      <h3>Mouse/Touch Interactions</h3>
      <div class="component-showcase">
        <div class="component-example">
          <div class="component-title">🖱️ Click Behaviors</div>
          <div class="component-demo">
            <ul>
              <li><strong>Single click:</strong> Focus node for editing</li>
              <li><strong>Double click:</strong> Select all content in node</li>
              <li><strong>Drag handle:</strong> Reorder nodes (visible on hover)</li>
              <li><strong>Indicator click:</strong> Toggle node collapse/expand</li>
            </ul>
          </div>
        </div>
        
        <div class="component-example">
          <div class="component-title">👆 Touch Gestures</div>
          <div class="component-demo">
            <ul>
              <li><strong>Tap:</strong> Focus node</li>
              <li><strong>Long press:</strong> Show context menu</li>
              <li><strong>Swipe left:</strong> Show quick actions</li>
              <li><strong>Pinch:</strong> Zoom interface (accessibility)</li>
            </ul>
          </div>
        </div>
      </div>
      
      <h3>Focus Management</h3>
      <div class="pattern-demo">
        <div style="
          outline: 2px solid hsl(var(--primary));
          outline-offset: 2px;
          border-radius: var(--radius);
          padding: 1rem;
          margin: 1rem 0;
        ">
          <div style="display: flex; align-items: center; gap: 0.5rem;">
            <span class="hierarchy-indicator hierarchy-indicator--text"></span>
            <span>This node has focus (visible outline)</span>
          </div>
        </div>
        <div style="padding: 1rem; margin: 1rem 0; opacity: 0.7;">
          <div style="display: flex; align-items: center; gap: 0.5rem;">
            <span class="hierarchy-indicator hierarchy-indicator--text"></span>
            <span>This node is unfocused</span>
          </div>
        </div>
        
        <div class="component-showcase">
          <div class="component-example">
            <div class="component-title">🎯 Focus States</div>
            <div class="component-demo">
              <ul>
                <li><strong>Focused:</strong> Clear 2px blue outline, full opacity</li>
                <li><strong>Unfocused:</strong> No outline, reduced opacity</li>
                <li><strong>Hover:</strong> Subtle background color change</li>
                <li><strong>Active:</strong> Pressed state with darker background</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Hierarchical Display -->
    <section class="example-section">
      <h2>Hierarchical Display Patterns</h2>
      <p>Visual patterns for representing nested content structures, optimized for knowledge management workflows.</p>
      
      <h3>Indentation System</h3>
      <div class="pattern-demo">
        <div class="hierarchy-example">
          <div class="hierarchy-node">
            <span class="hierarchy-indicator hierarchy-indicator--text"></span>
            Level 0: Root content
          </div>
          <div class="hierarchy-node">
            <span class="hierarchy-indent"></span>
            <span class="hierarchy-indicator hierarchy-indicator--text"></span>
            Level 1: 24px indentation
          </div>
          <div class="hierarchy-node">
            <span class="hierarchy-indent"></span>
            <span class="hierarchy-indent"></span>
            <span class="hierarchy-indicator hierarchy-indicator--text"></span>
            Level 2: 48px indentation
          </div>
          <div class="hierarchy-node">
            <span class="hierarchy-indent"></span>
            <span class="hierarchy-indent"></span>
            <span class="hierarchy-indent"></span>
            <span class="hierarchy-indicator hierarchy-indicator--task"></span>
            Level 3: 72px indentation
          </div>
        </div>
        
        <div class="example-code">
          <pre><code>/* Hierarchical indentation CSS */
.node {
  padding-left: calc(0.25rem + (var(--node-level) * 24px));
}

/* Dynamic indentation based on level */
.node[data-level="0"] { padding-left: 0.25rem; }
.node[data-level="1"] { padding-left: calc(0.25rem + 24px); }
.node[data-level="2"] { padding-left: calc(0.25rem + 48px); }
.node[data-level="3"] { padding-left: calc(0.25rem + 72px); }</code></pre>
        </div>
      </div>
      
      <h3>Collapse/Expand States</h3>
      <div class="pattern-demo">
        <div class="hierarchy-example">
          <div class="hierarchy-node">
            <span style="margin-right: 4px;">▼</span>
            <span class="hierarchy-indicator hierarchy-indicator--text"></span>
            Expanded parent node (children visible)
          </div>
          <div class="hierarchy-node" style="opacity: 0.8;">
            <span class="hierarchy-indent"></span>
            <span class="hierarchy-indicator hierarchy-indicator--text"></span>
            Child node 1
          </div>
          <div class="hierarchy-node" style="opacity: 0.8;">
            <span class="hierarchy-indent"></span>
            <span class="hierarchy-indicator hierarchy-indicator--task"></span>
            Child node 2
          </div>
          
          <div class="hierarchy-node" style="margin-top: 1rem;">
            <span style="margin-right: 4px;">▶</span>
            <span class="hierarchy-indicator hierarchy-indicator--text"></span>
            Collapsed parent node (children hidden)
          </div>
        </div>
        
        <p><strong>Collapse Indicators:</strong></p>
        <ul>
          <li><strong>▼ (Expanded):</strong> Children are visible and indented</li>
          <li><strong>▶ (Collapsed):</strong> Children are hidden</li>
          <li><strong>Click indicator:</strong> Toggle expand/collapse state</li>
          <li><strong>Keyboard:</strong> Space or Enter to toggle</li>
        </ul>
      </div>
    </section>

    <!-- Responsive Patterns -->
    <section class="example-section">
      <h2>Responsive Design Patterns</h2>
      <p>Adaptive layouts that maintain usability across all device sizes, from mobile to desktop.</p>
      
      <h3>Breakpoints</h3>
      <div class="responsive-breakpoint">
        <div class="breakpoint-indicator"></div>
        <div>
          <strong>Mobile (< 768px):</strong> Single column, side panels as overlays, increased touch targets (44px minimum)
        </div>
      </div>
      <div class="responsive-breakpoint">
        <div class="breakpoint-indicator"></div>
        <div>
          <strong>Tablet (768px - 1024px):</strong> Adaptive two-column, collapsible side panels, touch-optimized interactions
        </div>
      </div>
      <div class="responsive-breakpoint">
        <div class="breakpoint-indicator"></div>
        <div>
          <strong>Desktop (> 1024px):</strong> Full two-panel layout, hover states, keyboard-optimized workflows
        </div>
      </div>
      
      <h3>Adaptive Behaviors</h3>
      <div class="component-showcase">
        <div class="component-example">
          <div class="component-title">📱 Mobile Adaptations</div>
          <div class="component-demo">
            <ul>
              <li><strong>Indentation:</strong> Reduced to 16px per level</li>
              <li><strong>Touch targets:</strong> Minimum 44px for comfortable tapping</li>
              <li><strong>Side panels:</strong> Slide-up drawers or full-screen overlays</li>
              <li><strong>Context menus:</strong> Bottom sheet presentation</li>
            </ul>
          </div>
        </div>
        
        <div class="component-example">
          <div class="component-title">🖥️ Desktop Enhancements</div>
          <div class="component-demo">
            <ul>
              <li><strong>Hover states:</strong> Visual feedback for interactive elements</li>
              <li><strong>Right-click menus:</strong> Context-sensitive actions</li>
              <li><strong>Keyboard shortcuts:</strong> Full navigation and editing support</li>
              <li><strong>Multi-panel views:</strong> Simultaneous content and properties</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="example-code">
        <pre><code>/* Responsive CSS patterns */
@media (max-width: 768px) {
  .node {
    /* Reduced indentation on mobile */
    --indent-size: 16px;
  }
  
  .side-panel {
    /* Convert to overlay on mobile */
    position: fixed;
    top: 0;
    right: -100%;
    width: 100%;
    height: 100vh;
    z-index: 50;
    transition: right 0.3s ease;
  }
  
  .side-panel.open {
    right: 0;
  }
}

@media (min-width: 1024px) {
  .layout {
    /* Desktop two-panel layout */
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 1rem;
  }
}</code></pre>
      </div>
    </section>

    <!-- Accessibility Patterns -->
    <section class="example-section">
      <h2>Accessibility Patterns</h2>
      <p>WCAG 2.1 AA compliant patterns that ensure NodeSpace is usable by everyone.</p>
      
      <div class="component-showcase">
        <div class="component-example">
          <div class="component-title">⌨️ Keyboard Navigation</div>
          <div class="component-demo">
            <ul>
              <li><strong>Tab order:</strong> Logical sequence through interactive elements</li>
              <li><strong>Focus indicators:</strong> High contrast 2px outlines</li>
              <li><strong>Escape routes:</strong> ESC key closes modals and returns focus</li>
              <li><strong>Arrow navigation:</strong> Consistent movement through content</li>
            </ul>
          </div>
        </div>
        
        <div class="component-example">
          <div class="component-title">📖 Screen Reader Support</div>
          <div class="component-demo">
            <ul>
              <li><strong>ARIA landmarks:</strong> Clear page structure and navigation</li>
              <li><strong>ARIA labels:</strong> Descriptive text for complex interactions</li>
              <li><strong>Live regions:</strong> Announce dynamic content changes</li>
              <li><strong>Heading hierarchy:</strong> Logical h1-h6 structure</li>
            </ul>
          </div>
        </div>
        
        <div class="component-example">
          <div class="component-title">🎨 Visual Accessibility</div>
          <div class="component-demo">
            <ul>
              <li><strong>Color contrast:</strong> 4.5:1 minimum for normal text</li>
              <li><strong>Color independence:</strong> No information conveyed by color alone</li>
              <li><strong>Focus indicators:</strong> Visible on all interactive elements</li>
              <li><strong>Text scaling:</strong> Readable up to 200% zoom</li>
            </ul>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Footer -->
    <footer style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid hsl(var(--border)); text-align: center; color: hsl(var(--muted-foreground));">
      <p>NodeSpace Design System - Patterns</p>
    </footer>
  </div>

  <script src="assets/interactive.js"></script>
</body>
</html>