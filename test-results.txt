$ bun run test && bun run rust:test
$ bun run --cwd packages/desktop-app test
$ bunx vitest run
✅ Svelte rune mocks injected via Vite plugin
10:55:02 AM [vite-plugin-svelte] The following Svelte compilerOptions are controlled by vite-plugin-svelte and essential to its functionality. User-specified values are ignored. Please remove them from your configuration: generate

 RUN  v2.1.9 /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app

✅ Svelte 5 runes mocked at module parse time
✅ Global test setup complete: Plugin registry initialized
stdout | src/tests/services/shared-node-store.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Basic CRUD > should store and retrieve a node
[SharedNodeStore] Hierarchy change for node: test-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Basic CRUD > should check if node exists
[SharedNodeStore] Hierarchy change for node: test-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Basic CRUD > should get all nodes
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Hierarchy change for node: test-node-2

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Basic CRUD > should get node count
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Hierarchy change for node: test-node-2

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Basic CRUD > should delete a node
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node deleted: test-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Basic CRUD > should clear all nodes
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Hierarchy change for node: test-node-2

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Update Operations > should update node content
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Update Operations > should update modifiedAt timestamp
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Update Operations > should batch update multiple nodes
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Hierarchy change for node: test-node-2
[SharedNodeStore] Node updated: test-node-1, type: content
[SharedNodeStore] Node updated: test-node-2, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Update Operations > should warn when updating non-existent node
[SharedNodeStore] Hierarchy change for node: test-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Subscriptions > should notify subscribers when node changes
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Subscriptions > should support multiple subscribers for same node
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Subscriptions > should unsubscribe correctly
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content
[SharedNodeStore] Conflict resolved for node: test-node-1, strategy: last-write-wins

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Subscriptions > should support wildcard subscriptions
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Node updated: node-1, type: content
[SharedNodeStore] Node updated: node-2, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Subscriptions > should handle subscription callback errors gracefully
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Version Tracking > should increment version on each update
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content
[SharedNodeStore] Conflict resolved for node: test-node-1, strategy: last-write-wins

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Conflict Detection > should detect version mismatch conflicts
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content
[SharedNodeStore] Conflict resolved for node: test-node-1, strategy: last-write-wins

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Performance Metrics > should track update count
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Performance Metrics > should track subscription count
[SharedNodeStore] Hierarchy change for node: test-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Performance Metrics > should track average update time
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Performance Metrics > should reset metrics correctly
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Memory Leak Prevention > should clean up subscriptions on unsubscribe
[SharedNodeStore] Hierarchy change for node: test-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Memory Leak Prevention > should clean up pending updates on delete
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content
[SharedNodeStore] Node deleted: test-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > BaseNodeViewer Migration Methods > Persistence Delegation > should update node content in memory immediately
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > addToBatch > should accumulate changes in batch
[SharedNodeStore] Hierarchy change for node: quote-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > addToBatch > should update in-memory state immediately (optimistic)
[SharedNodeStore] Hierarchy change for node: quote-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > addToBatch > should merge later changes over earlier ones
[SharedNodeStore] Hierarchy change for node: quote-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > addToBatch > should reset timeout on each change (true inactivity)
[SharedNodeStore] Hierarchy change for node: quote-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > commitBatch > should persist changes when batch commits
[SharedNodeStore] Hierarchy change for node: quote-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > commitBatch > should skip persistence if final state is placeholder
[SharedNodeStore] Hierarchy change for node: placeholder-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > commitBatch > should persist if node was previously persisted (even if now placeholder)
[SharedNodeStore] Hierarchy change for node: quote-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > commitBatch > should auto-commit after timeout
[SharedNodeStore] Hierarchy change for node: quote-node-1

stderr | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > commitBatch > should auto-commit after timeout
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'quote-node-1', batchId: 'batch-quote-node-1-0' }

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > commitBatch > should handle empty batch (no changes)
[SharedNodeStore] Hierarchy change for node: quote-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > commitBatch > should clean up timeout and batch state on commit
[SharedNodeStore] Hierarchy change for node: quote-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > cancelBatch > should cancel active batch without persisting
[SharedNodeStore] Hierarchy change for node: quote-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > Auto-restart batching for pattern-converted nodes > should auto-restart batch for quote-block nodes
[SharedNodeStore] Hierarchy change for node: quote-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > Auto-restart batching for pattern-converted nodes > should auto-restart batch for code-block nodes
[SharedNodeStore] Hierarchy change for node: code-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > Auto-restart batching for pattern-converted nodes > should auto-restart batch for ordered-list nodes
[SharedNodeStore] Hierarchy change for node: list-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > Auto-restart batching for pattern-converted nodes > should respect skipPersistence option in auto-restart
[SharedNodeStore] Hierarchy change for node: quote-node-1
[SharedNodeStore] Node updated: quote-node-1, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > Auto-restart batching for pattern-converted nodes > should not auto-restart for non-pattern-converted types
[SharedNodeStore] Hierarchy change for node: text-node-1
[SharedNodeStore] Node updated: text-node-1, type: content

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > Concurrent batches > should handle concurrent batches on different nodes
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > Concurrent batches > should maintain separate timeout for each batch
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > Race condition handling > should handle race where old path persists before batch
[SharedNodeStore] Hierarchy change for node: race-node-1

stdout | src/tests/services/shared-node-store.test.ts > SharedNodeStore > Atomic Batch Updates > Batch cleanup on node deletion > should cancel batch when node is deleted
[SharedNodeStore] Hierarchy change for node: quote-node-1
[SharedNodeStore] Node deleted: quote-node-1

 ✓ src/tests/services/shared-node-store.test.ts (60 tests) 345ms
stderr | src/tests/components/textarea-controller.test.ts
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'node-2', batchId: 'batch-node-2-1' }

stdout | src/tests/components/textarea-controller.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/components/textarea-controller.test.ts > TextareaController > Event handling > should handle Enter key for new node creation
[KeyboardCommandRegistry] Command executed: create-node (Create new node on Enter key)

stdout | src/tests/components/textarea-controller.test.ts > TextareaController > Event handling > should handle Tab key for indentation
[KeyboardCommandRegistry] Command executed: indent-node (Indent node on Tab key)

stdout | src/tests/components/textarea-controller.test.ts > TextareaController > Event handling > should handle Shift+Tab for outdentation
[KeyboardCommandRegistry] Command executed: outdent-node (Outdent node on Shift+Tab)

stdout | src/tests/components/textarea-controller.test.ts > TextareaController > Keyboard command integration > should handle Cmd+B for bold formatting
[KeyboardCommandRegistry] Command executed: format-text-bold (Toggle bold formatting)

stdout | src/tests/components/textarea-controller.test.ts > TextareaController > Keyboard command integration > should handle Cmd+I for italic formatting
[KeyboardCommandRegistry] Command executed: format-text-italic (Toggle italic formatting)

 ✓ src/tests/components/textarea-controller.test.ts (58 tests) 38ms
stdout | src/tests/components/textarea-controller.test.ts > TextareaController > Keyboard command integration > should handle Ctrl+B for bold formatting (cross-platform)
[KeyboardCommandRegistry] Command executed: format-text-bold (Toggle bold formatting)

stdout | src/tests/components/node-autocomplete.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/components/node-autocomplete.test.ts (43 tests) 158ms
stdout | src/tests/components/content-editable-controller-toggle.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/components/content-editable-controller-toggle.test.ts (16 tests) 1ms
stdout | src/tests/components/slash-command-dropdown.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/components/slash-command-dropdown.test.ts (40 tests) 96ms
stdout | src/tests/stores/navigation.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stderr | src/tests/stores/navigation.test.ts > Navigation Store - Tab Management > addTab > rejects tab with non-existent paneId
Pane non-existent-pane does not exist

 ✓ src/tests/stores/navigation.test.ts (38 tests) 3ms
stdout | src/tests/plugins/plugin-registry.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/plugins/plugin-registry.test.ts (38 tests) 5ms
stdout | src/tests/unit/reactive-node-data.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > updateContent > should update local state immediately
[ReactiveNodeData] Scheduled debounced content update for content-node (400ms)

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > updateContent > should schedule debounced persistence at 400ms
[ReactiveNodeData] Scheduled debounced content update for content-node (400ms)
[ReactiveNodeData] Persisted content for content-node, new version: undefined

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > updateContent > should cancel pending update when new update arrives
[ReactiveNodeData] Scheduled debounced content update for content-node (400ms)
[ReactiveNodeData] Cancelled pending update for content-node
[ReactiveNodeData] Scheduled debounced content update for content-node (400ms)
[ReactiveNodeData] Persisted content for content-node, new version: undefined

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > updateContent > should track pending content updates
[ReactiveNodeData] Scheduled debounced content update for content-node (400ms)

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > updateProperties > should update local state immediately without debounce
[ReactiveNodeData] Updated properties for prop-node
[ReactiveNodeData] Persisted properties for prop-node, new version: undefined

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > updateProperties > should merge properties with existing ones
[ReactiveNodeData] Updated properties for prop-node

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > node CRUD operations > should add node from LIVE SELECT event
[ReactiveNodeData] Added node: new-node

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > node CRUD operations > should update node from LIVE SELECT event
[ReactiveNodeData] Updated node: update-node, version: 2

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > node CRUD operations > should cancel pending content update when receiving server update
[ReactiveNodeData] Scheduled debounced content update for sync-test (400ms)
[ReactiveNodeData] Cancelled pending update for sync-test (server update received)
[ReactiveNodeData] Updated node: sync-test, version: 3

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > node CRUD operations > should remove node from store
[ReactiveNodeData] Removed node: delete-node

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > node CRUD operations > should clear pending updates when removing node
[ReactiveNodeData] Scheduled debounced content update for delete-pending (400ms)
[ReactiveNodeData] Removed node: delete-pending

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > multi-client synchronization > should handle multiple nodes independently
[ReactiveNodeData] Scheduled debounced content update for node-1 (400ms)
[ReactiveNodeData] Scheduled debounced content update for node-2 (400ms)

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > multi-client synchronization > should handle concurrent content and property updates
[ReactiveNodeData] Scheduled debounced content update for concurrent-node (400ms)
[ReactiveNodeData] Updated properties for concurrent-node
[ReactiveNodeData] Persisted properties for concurrent-node, new version: undefined

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > optimistic rollback > should restore all nodes from snapshot
[ReactiveNodeData] Scheduled debounced content update for node-1 (400ms)

 ✓ src/tests/unit/reactive-node-data.test.ts (24 tests) 6ms
stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > performance - debounce optimization > should reduce database writes through 400ms debounce
[ReactiveNodeData] Scheduled debounced content update for perf-node (400ms)
[ReactiveNodeData] Cancelled pending update for perf-node
[ReactiveNodeData] Scheduled debounced content update for perf-node (400ms)
[ReactiveNodeData] Cancelled pending update for perf-node
[ReactiveNodeData] Scheduled debounced content update for perf-node (400ms)
[ReactiveNodeData] Cancelled pending update for perf-node
[ReactiveNodeData] Scheduled debounced content update for perf-node (400ms)
[ReactiveNodeData] Cancelled pending update for perf-node
[ReactiveNodeData] Scheduled debounced content update for perf-node (400ms)
[ReactiveNodeData] Cancelled pending update for perf-node
[ReactiveNodeData] Scheduled debounced content update for perf-node (400ms)
[ReactiveNodeData] Cancelled pending update for perf-node
[ReactiveNodeData] Scheduled debounced content update for perf-node (400ms)
[ReactiveNodeData] Cancelled pending update for perf-node
[ReactiveNodeData] Scheduled debounced content update for perf-node (400ms)
[ReactiveNodeData] Cancelled pending update for perf-node
[ReactiveNodeData] Scheduled debounced content update for perf-node (400ms)
[ReactiveNodeData] Cancelled pending update for perf-node
[ReactiveNodeData] Scheduled debounced content update for perf-node (400ms)
[ReactiveNodeData] Persisted content for perf-node, new version: undefined

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > edge cases > should handle empty properties
[ReactiveNodeData] Updated properties for empty-props

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > edge cases > should handle very long content
[ReactiveNodeData] Scheduled debounced content update for long-content (400ms)

stdout | src/tests/unit/reactive-node-data.test.ts > ReactiveNodeData > edge cases > should handle version overflow gracefully
[ReactiveNodeData] Scheduled debounced content update for version-node (400ms)

stdout | src/tests/services/optimistic-operation-manager.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should apply optimistic update immediately
[OptimisticOperationManager] Starting operation: test operation {
  affectedNodes: [ 'child', 'parent' ],
  snapshotData: false,
  timestamp: 1763805304653
}
[OptimisticOperationManager] Optimistic update applied: test operation 

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should fire backend operation without waiting
[OptimisticOperationManager] Starting operation: test operation { affectedNodes: [], snapshotData: false, timestamp: 1763805304654 }
[OptimisticOperationManager] Optimistic update applied: test operation 

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should rollback on backend failure
[OptimisticOperationManager] Starting operation: test operation {
  affectedNodes: [ 'child', 'parent' ],
  snapshotData: false,
  timestamp: 1763805304654
}
[OptimisticOperationManager] Optimistic update applied: test operation 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805304654, includeData: false }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805304655,
  source: 'optimistic-operation-manager',
  message: 'Failed to test operation',
  failedNodeIds: [ 'child', 'parent' ],
  failureReason: 'unknown',
  canRetry: true,
  affectedOperations: [
    { nodeId: 'child', operation: 'update', error: 'Backend failed' },
    { nodeId: 'parent', operation: 'update', error: 'Backend failed' }
  ],
  metadata: { originalError: 'Backend failed', description: 'test operation' }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should rollback on backend failure
[OptimisticOperationManager] Backend operation failed: test operation Error: Backend failed
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:119:28
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should emit error event on backend failure
[OptimisticOperationManager] Starting operation: indent node {
  affectedNodes: [ 'child', 'parent' ],
  snapshotData: false,
  timestamp: 1763805304707
}
[OptimisticOperationManager] Optimistic update applied: indent node 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805304707, includeData: false }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805304708,
  source: 'optimistic-operation-manager',
  message: 'Failed to indent node',
  failedNodeIds: [ 'child', 'parent' ],
  failureReason: 'database-locked',
  canRetry: true,
  affectedOperations: [
    { nodeId: 'child', operation: 'update', error: 'Database locked' },
    { nodeId: 'parent', operation: 'update', error: 'Database locked' }
  ],
  metadata: { originalError: 'Database locked', description: 'indent node' }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should emit error event on backend failure
[OptimisticOperationManager] Backend operation failed: indent node Error: Database locked
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:153:28
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should rollback immediately if optimistic update fails
[OptimisticOperationManager] Starting operation: test operation { affectedNodes: [], snapshotData: false, timestamp: 1763805304759 }
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805304759, includeData: false }
[OptimisticOperationManager] Rollback complete 

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should rollback immediately if optimistic update fails
[OptimisticOperationManager] Optimistic update failed: test operation Error: Optimistic update failed
    at optimisticUpdate (/Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:197:15)
    at OptimisticOperationManager.executeStructuralChange (/Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/lib/services/optimistic-operation-manager.svelte.ts:126:7)
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:204:36
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should snapshot and restore data when snapshotData option is true
[OptimisticOperationManager] Starting operation: test operation with data { affectedNodes: [], snapshotData: true, timestamp: 1763805304760 }
[OptimisticOperationManager] Optimistic update applied: test operation with data 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805304760, includeData: true }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805304760,
  source: 'optimistic-operation-manager',
  message: 'Failed to test operation with data',
  failedNodeIds: [],
  failureReason: 'unknown',
  canRetry: true,
  affectedOperations: [],
  metadata: {
    originalError: 'Backend failed',
    description: 'test operation with data'
  }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should snapshot and restore data when snapshotData option is true
[OptimisticOperationManager] Backend operation failed: test operation with data Error: Backend failed
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:241:28
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should not snapshot data by default
[OptimisticOperationManager] Starting operation: test operation without data snapshot { affectedNodes: [], snapshotData: false, timestamp: 1763805304812 }
[OptimisticOperationManager] Optimistic update applied: test operation without data snapshot 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805304812, includeData: false }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805304812,
  source: 'optimistic-operation-manager',
  message: 'Failed to test operation without data snapshot',
  failedNodeIds: [],
  failureReason: 'unknown',
  canRetry: true,
  affectedOperations: [],
  metadata: {
    originalError: 'Backend failed',
    description: 'test operation without data snapshot'
  }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeStructuralChange > should not snapshot data by default
[OptimisticOperationManager] Backend operation failed: test operation without data snapshot Error: Backend failed
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:292:28
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeBatch > should apply all optimistic updates before firing backend operations
[OptimisticOperationManager] Starting batch operation: move child1, move child2 {
  operationCount: 2,
  affectedNodes: [ 'child1', 'child2' ],
  timestamp: 1763805304865
}
[OptimisticOperationManager] Batch optimistic updates applied: move child1, move child2 

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeBatch > should rollback all operations if any backend operation fails
[OptimisticOperationManager] Starting batch operation: move child1, move child2 {
  operationCount: 2,
  affectedNodes: [ 'child1', 'child2' ],
  timestamp: 1763805304866
}
[OptimisticOperationManager] Batch optimistic updates applied: move child1, move child2 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805304866, includeData: false }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805304866,
  source: 'optimistic-operation-manager',
  message: 'Failed to move child1, move child2',
  failedNodeIds: [ 'child1', 'child2' ],
  failureReason: 'unknown',
  canRetry: true,
  affectedOperations: [
    {
      nodeId: 'child1',
      operation: 'update',
      error: '1/2 operations failed: Backend failed'
    },
    {
      nodeId: 'child2',
      operation: 'update',
      error: '1/2 operations failed: Backend failed'
    }
  ],
  metadata: {
    originalError: '1/2 operations failed: Backend failed',
    description: 'move child1, move child2'
  }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeBatch > should rollback all operations if any backend operation fails
[OptimisticOperationManager] Batch backend operation failed: move child1, move child2 {
  failureCount: 1,
  totalCount: 2,
  failures: [
    {
      status: 'rejected',
      reason: Error: Backend failed
          at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:387:32
          at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
          at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
          at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
          at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
          at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
          at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
          at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
          at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
          at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)
    }
  ]
}
[OptimisticOperationManager] Backend operation failed: move child1, move child2 Error: 1/2 operations failed: Backend failed
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/lib/services/optimistic-operation-manager.svelte.ts:343:19

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeBatch > should emit single error event for batch failure
[OptimisticOperationManager] Starting batch operation: move child1, move child2 {
  operationCount: 2,
  affectedNodes: [ 'child1', 'child2' ],
  timestamp: 1763805304918
}
[OptimisticOperationManager] Batch optimistic updates applied: move child1, move child2 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805304918, includeData: false }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805304918,
  source: 'optimistic-operation-manager',
  message: 'Failed to move child1, move child2',
  failedNodeIds: [ 'child1', 'child2' ],
  failureReason: 'unknown',
  canRetry: true,
  affectedOperations: [
    {
      nodeId: 'child1',
      operation: 'update',
      error: '1/2 operations failed: Backend failed'
    },
    {
      nodeId: 'child2',
      operation: 'update',
      error: '1/2 operations failed: Backend failed'
    }
  ],
  metadata: {
    originalError: '1/2 operations failed: Backend failed',
    description: 'move child1, move child2'
  }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > executeBatch > should emit single error event for batch failure
[OptimisticOperationManager] Batch backend operation failed: move child1, move child2 {
  failureCount: 1,
  totalCount: 2,
  failures: [
    {
      status: 'rejected',
      reason: Error: Backend failed
          at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:432:32
          at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
          at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
          at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
          at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
          at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
          at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
          at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
          at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
          at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)
    }
  ]
}
[OptimisticOperationManager] Backend operation failed: move child1, move child2 Error: 1/2 operations failed: Backend failed
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/lib/services/optimistic-operation-manager.svelte.ts:343:19

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Error Categorization > should categorize timeout errors
[OptimisticOperationManager] Starting operation: test operation { affectedNodes: [], snapshotData: false, timestamp: 1763805304970 }
[OptimisticOperationManager] Optimistic update applied: test operation 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805304970, includeData: false }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805304971,
  source: 'optimistic-operation-manager',
  message: 'Failed to test operation',
  failedNodeIds: [],
  failureReason: 'timeout',
  canRetry: true,
  affectedOperations: [],
  metadata: {
    originalError: 'Operation timed out',
    description: 'test operation'
  }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Error Categorization > should categorize timeout errors
[OptimisticOperationManager] Backend operation failed: test operation Error: Operation timed out
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:472:28
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Error Categorization > should categorize foreign key constraint errors
[OptimisticOperationManager] Starting operation: test operation { affectedNodes: [], snapshotData: false, timestamp: 1763805305023 }
[OptimisticOperationManager] Optimistic update applied: test operation 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805305023, includeData: false }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805305023,
  source: 'optimistic-operation-manager',
  message: 'Failed to test operation',
  failedNodeIds: [],
  failureReason: 'foreign-key-constraint',
  canRetry: true,
  affectedOperations: [],
  metadata: {
    originalError: 'FOREIGN KEY constraint failed',
    description: 'test operation'
  }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Error Categorization > should categorize foreign key constraint errors
[OptimisticOperationManager] Backend operation failed: test operation Error: FOREIGN KEY constraint failed
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:511:11
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Error Categorization > should categorize database locked errors
[OptimisticOperationManager] Starting operation: test operation { affectedNodes: [], snapshotData: false, timestamp: 1763805305075 }
[OptimisticOperationManager] Optimistic update applied: test operation 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805305075, includeData: false }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805305075,
  source: 'optimistic-operation-manager',
  message: 'Failed to test operation',
  failedNodeIds: [],
  failureReason: 'database-locked',
  canRetry: true,
  affectedOperations: [],
  metadata: {
    originalError: 'Database is locked',
    description: 'test operation'
  }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Error Categorization > should categorize database locked errors
[OptimisticOperationManager] Backend operation failed: test operation Error: Database is locked
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:550:28
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Error Categorization > should categorize unknown errors
[OptimisticOperationManager] Starting operation: test operation { affectedNodes: [], snapshotData: false, timestamp: 1763805305127 }
[OptimisticOperationManager] Optimistic update applied: test operation 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805305127, includeData: false }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805305127,
  source: 'optimistic-operation-manager',
  message: 'Failed to test operation',
  failedNodeIds: [],
  failureReason: 'unknown',
  canRetry: true,
  affectedOperations: [],
  metadata: {
    originalError: 'Something weird happened',
    description: 'test operation'
  }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Error Categorization > should categorize unknown errors
[OptimisticOperationManager] Backend operation failed: test operation Error: Something weird happened
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:588:28
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Integration with Reactive Stores > should work with ReactiveStructureTree snapshot/restore
[OptimisticOperationManager] Starting operation: add child3 { affectedNodes: [], snapshotData: false, timestamp: 1763805305180 }
[OptimisticOperationManager] Optimistic update applied: add child3 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805305180, includeData: false }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805305180,
  source: 'optimistic-operation-manager',
  message: 'Failed to add child3',
  failedNodeIds: [],
  failureReason: 'unknown',
  canRetry: true,
  affectedOperations: [],
  metadata: { originalError: 'Backend failed', description: 'add child3' }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Integration with Reactive Stores > should work with ReactiveStructureTree snapshot/restore
[OptimisticOperationManager] Backend operation failed: add child3 Error: Backend failed
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:643:28
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Integration with Reactive Stores > should preserve structure changes when snapshotData is false
[OptimisticOperationManager] Starting operation: test operation { affectedNodes: [], snapshotData: false, timestamp: 1763805305232 }
[OptimisticOperationManager] Optimistic update applied: test operation 
[OptimisticOperationManager] Rolling back to snapshot { timestamp: 1763805305232, includeData: false }
[OptimisticOperationManager] Rollback complete 
[OptimisticOperationManager] Error event emitted {
  type: 'error:persistence-failed',
  namespace: 'error',
  timestamp: 1763805305232,
  source: 'optimistic-operation-manager',
  message: 'Failed to test operation',
  failedNodeIds: [],
  failureReason: 'unknown',
  canRetry: true,
  affectedOperations: [],
  metadata: { originalError: 'Backend failed', description: 'test operation' }
}

stderr | src/tests/services/optimistic-operation-manager.test.ts > OptimisticOperationManager > Integration with Reactive Stores > should preserve structure changes when snapshotData is false
[OptimisticOperationManager] Backend operation failed: test operation Error: Backend failed
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/optimistic-operation-manager.test.ts:684:28
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)

 ✓ src/tests/services/optimistic-operation-manager.test.ts (16 tests) 631ms
stdout | src/tests/services/content-processor.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/services/content-processor.test.ts (35 tests) 7ms
stdout | src/tests/performance/architecture-benchmarks.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/performance/architecture-benchmarks.test.ts > Architecture Performance Benchmarks > Structural Operations - <10ms Target > single indent operation completes in <10ms
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49
[SharedNodeStore] Hierarchy change for node: node-50
[SharedNodeStore] Hierarchy change for node: node-51
[SharedNodeStore] Hierarchy change for node: node-52
[SharedNodeStore] Hierarchy change for node: node-53
[SharedNodeStore] Hierarchy change for node: node-54
[SharedNodeStore] Hierarchy change for node: node-55
[SharedNodeStore] Hierarchy change for node: node-56
[SharedNodeStore] Hierarchy change for node: node-57
[SharedNodeStore] Hierarchy change for node: node-58
[SharedNodeStore] Hierarchy change for node: node-59
[SharedNodeStore] Hierarchy change for node: node-60
[SharedNodeStore] Hierarchy change for node: node-61
[SharedNodeStore] Hierarchy change for node: node-62
[SharedNodeStore] Hierarchy change for node: node-63
[SharedNodeStore] Hierarchy change for node: node-64
[SharedNodeStore] Hierarchy change for node: node-65
[SharedNodeStore] Hierarchy change for node: node-66
[SharedNodeStore] Hierarchy change for node: node-67
[SharedNodeStore] Hierarchy change for node: node-68
[SharedNodeStore] Hierarchy change for node: node-69
[SharedNodeStore] Hierarchy change for node: node-70
[SharedNodeStore] Hierarchy change for node: node-71
[SharedNodeStore] Hierarchy change for node: node-72
[SharedNodeStore] Hierarchy change for node: node-73
[SharedNodeStore] Hierarchy change for node: node-74
[SharedNodeStore] Hierarchy change for node: node-75
[SharedNodeStore] Hierarchy change for node: node-76
[SharedNodeStore] Hierarchy change for node: node-77
[SharedNodeStore] Hierarchy change for node: node-78
[SharedNodeStore] Hierarchy change for node: node-79
[SharedNodeStore] Hierarchy change for node: node-80
[SharedNodeStore] Hierarchy change for node: node-81
[SharedNodeStore] Hierarchy change for node: node-82
[SharedNodeStore] Hierarchy change for node: node-83
[SharedNodeStore] Hierarchy change for node: node-84
[SharedNodeStore] Hierarchy change for node: node-85
[SharedNodeStore] Hierarchy change for node: node-86
[SharedNodeStore] Hierarchy change for node: node-87
[SharedNodeStore] Hierarchy change for node: node-88
[SharedNodeStore] Hierarchy change for node: node-89
[SharedNodeStore] Hierarchy change for node: node-90
[SharedNodeStore] Hierarchy change for node: node-91
[SharedNodeStore] Hierarchy change for node: node-92
[SharedNodeStore] Hierarchy change for node: node-93
[SharedNodeStore] Hierarchy change for node: node-94
[SharedNodeStore] Hierarchy change for node: node-95
[SharedNodeStore] Hierarchy change for node: node-96
[SharedNodeStore] Hierarchy change for node: node-97
[SharedNodeStore] Hierarchy change for node: node-98
[SharedNodeStore] Hierarchy change for node: node-99
Single indent operation: 0.226ms (target: <10ms)
[SharedNodeStore] Node updated: node-50, type: content

stdout | src/tests/performance/architecture-benchmarks.test.ts > Architecture Performance Benchmarks > Structural Operations - <10ms Target > single outdent operation completes in <10ms
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49
[SharedNodeStore] Hierarchy change for node: node-50
[SharedNodeStore] Hierarchy change for node: node-51
[SharedNodeStore] Hierarchy change for node: node-52
[SharedNodeStore] Hierarchy change for node: node-53
[SharedNodeStore] Hierarchy change for node: node-54
[SharedNodeStore] Hierarchy change for node: node-55
[SharedNodeStore] Hierarchy change for node: node-56
[SharedNodeStore] Hierarchy change for node: node-57
[SharedNodeStore] Hierarchy change for node: node-58
[SharedNodeStore] Hierarchy change for node: node-59
[SharedNodeStore] Hierarchy change for node: node-60
[SharedNodeStore] Hierarchy change for node: node-61
[SharedNodeStore] Hierarchy change for node: node-62
[SharedNodeStore] Hierarchy change for node: node-63
[SharedNodeStore] Hierarchy change for node: node-64
[SharedNodeStore] Hierarchy change for node: node-65
[SharedNodeStore] Hierarchy change for node: node-66
[SharedNodeStore] Hierarchy change for node: node-67
[SharedNodeStore] Hierarchy change for node: node-68
[SharedNodeStore] Hierarchy change for node: node-69
[SharedNodeStore] Hierarchy change for node: node-70
[SharedNodeStore] Hierarchy change for node: node-71
[SharedNodeStore] Hierarchy change for node: node-72
[SharedNodeStore] Hierarchy change for node: node-73
[SharedNodeStore] Hierarchy change for node: node-74
[SharedNodeStore] Hierarchy change for node: node-75
[SharedNodeStore] Hierarchy change for node: node-76
[SharedNodeStore] Hierarchy change for node: node-77
[SharedNodeStore] Hierarchy change for node: node-78
[SharedNodeStore] Hierarchy change for node: node-79
[SharedNodeStore] Hierarchy change for node: node-80
[SharedNodeStore] Hierarchy change for node: node-81
[SharedNodeStore] Hierarchy change for node: node-82
[SharedNodeStore] Hierarchy change for node: node-83
[SharedNodeStore] Hierarchy change for node: node-84
[SharedNodeStore] Hierarchy change for node: node-85
[SharedNodeStore] Hierarchy change for node: node-86
[SharedNodeStore] Hierarchy change for node: node-87
[SharedNodeStore] Hierarchy change for node: node-88
[SharedNodeStore] Hierarchy change for node: node-89
[SharedNodeStore] Hierarchy change for node: node-90
[SharedNodeStore] Hierarchy change for node: node-91
[SharedNodeStore] Hierarchy change for node: node-92
[SharedNodeStore] Hierarchy change for node: node-93
[SharedNodeStore] Hierarchy change for node: node-94
[SharedNodeStore] Hierarchy change for node: node-95
[SharedNodeStore] Hierarchy change for node: node-96
[SharedNodeStore] Hierarchy change for node: node-97
[SharedNodeStore] Hierarchy change for node: node-98
[SharedNodeStore] Hierarchy change for node: node-99
Single outdent operation: 0.001ms (target: <10ms)
[SharedNodeStore] Node updated: node-50, type: content

stdout | src/tests/performance/architecture-benchmarks.test.ts > Architecture Performance Benchmarks > Structural Operations - <10ms Target > bulk structural operations (100 indent/outdent) complete in <20ms
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49
[SharedNodeStore] Hierarchy change for node: node-50
[SharedNodeStore] Hierarchy change for node: node-51
[SharedNodeStore] Hierarchy change for node: node-52
[SharedNodeStore] Hierarchy change for node: node-53
[SharedNodeStore] Hierarchy change for node: node-54
[SharedNodeStore] Hierarchy change for node: node-55
[SharedNodeStore] Hierarchy change for node: node-56
[SharedNodeStore] Hierarchy change for node: node-57
[SharedNodeStore] Hierarchy change for node: node-58
[SharedNodeStore] Hierarchy change for node: node-59
[SharedNodeStore] Hierarchy change for node: node-60
[SharedNodeStore] Hierarchy change for node: node-61
[SharedNodeStore] Hierarchy change for node: node-62
[SharedNodeStore] Hierarchy change for node: node-63
[SharedNodeStore] Hierarchy change for node: node-64
[SharedNodeStore] Hierarchy change for node: node-65
[SharedNodeStore] Hierarchy change for node: node-66
[SharedNodeStore] Hierarchy change for node: node-67
[SharedNodeStore] Hierarchy change for node: node-68
[SharedNodeStore] Hierarchy change for node: node-69
[SharedNodeStore] Hierarchy change for node: node-70
[SharedNodeStore] Hierarchy change for node: node-71
[SharedNodeStore] Hierarchy change for node: node-72
[SharedNodeStore] Hierarchy change for node: node-73
[SharedNodeStore] Hierarchy change for node: node-74
[SharedNodeStore] Hierarchy change for node: node-75
[SharedNodeStore] Hierarchy change for node: node-76
[SharedNodeStore] Hierarchy change for node: node-77
[SharedNodeStore] Hierarchy change for node: node-78
[SharedNodeStore] Hierarchy change for node: node-79
[SharedNodeStore] Hierarchy change for node: node-80
[SharedNodeStore] Hierarchy change for node: node-81
[SharedNodeStore] Hierarchy change for node: node-82
[SharedNodeStore] Hierarchy change for node: node-83
[SharedNodeStore] Hierarchy change for node: node-84
[SharedNodeStore] Hierarchy change for node: node-85
[SharedNodeStore] Hierarchy change for node: node-86
[SharedNodeStore] Hierarchy change for node: node-87
[SharedNodeStore] Hierarchy change for node: node-88
[SharedNodeStore] Hierarchy change for node: node-89
[SharedNodeStore] Hierarchy change for node: node-90
[SharedNodeStore] Hierarchy change for node: node-91
[SharedNodeStore] Hierarchy change for node: node-92
[SharedNodeStore] Hierarchy change for node: node-93
[SharedNodeStore] Hierarchy change for node: node-94
[SharedNodeStore] Hierarchy change for node: node-95
[SharedNodeStore] Hierarchy change for node: node-96
[SharedNodeStore] Hierarchy change for node: node-97
[SharedNodeStore] Hierarchy change for node: node-98
[SharedNodeStore] Hierarchy change for node: node-99
100 structural operations (100 nodes): 8.49ms (target: <20ms)
[SharedNodeStore] Node updated: node-1, type: content
[SharedNodeStore] Node updated: node-2, type: content
[SharedNodeStore] Node updated: node-3, type: content
[SharedNodeStore] Node updated: node-4, type: content
[SharedNodeStore] Node updated: node-5, type: content
[SharedNodeStore] Node updated: node-6, type: content
[SharedNodeStore] Node updated: node-7, type: content
[SharedNodeStore] Node updated: node-8, type: content
[SharedNodeStore] Node updated: node-9, type: content
[SharedNodeStore] Node updated: node-10, type: content
[SharedNodeStore] Node updated: node-11, type: content
[SharedNodeStore] Node updated: node-12, type: content
[SharedNodeStore] Node updated: node-13, type: content
[SharedNodeStore] Node updated: node-14, type: content
[SharedNodeStore] Node updated: node-15, type: content
[SharedNodeStore] Node updated: node-16, type: content
[SharedNodeStore] Node updated: node-17, type: content
[SharedNodeStore] Node updated: node-18, type: content
[SharedNodeStore] Node updated: node-19, type: content
[SharedNodeStore] Node updated: node-20, type: content
[SharedNodeStore] Node updated: node-21, type: content
[SharedNodeStore] Node updated: node-22, type: content
[SharedNodeStore] Node updated: node-23, type: content
[SharedNodeStore] Node updated: node-24, type: content
[SharedNodeStore] Node updated: node-25, type: content
[SharedNodeStore] Node updated: node-26, type: content
[SharedNodeStore] Node updated: node-27, type: content
[SharedNodeStore] Node updated: node-28, type: content
[SharedNodeStore] Node updated: node-29, type: content
[SharedNodeStore] Node updated: node-30, type: content
[SharedNodeStore] Node updated: node-31, type: content
[SharedNodeStore] Node updated: node-32, type: content
[SharedNodeStore] Node updated: node-33, type: content
[SharedNodeStore] Node updated: node-34, type: content
[SharedNodeStore] Node updated: node-35, type: content
[SharedNodeStore] Node updated: node-36, type: content
[SharedNodeStore] Node updated: node-37, type: content
[SharedNodeStore] Node updated: node-38, type: content
[SharedNodeStore] Node updated: node-39, type: content
[SharedNodeStore] Node updated: node-40, type: content
[SharedNodeStore] Node updated: node-41, type: content
[SharedNodeStore] Node updated: node-42, type: content
[SharedNodeStore] Node updated: node-43, type: content
[SharedNodeStore] Node updated: node-44, type: content
[SharedNodeStore] Node updated: node-45, type: content
[SharedNodeStore] Node updated: node-46, type: content
[SharedNodeStore] Node updated: node-47, type: content
[SharedNodeStore] Node updated: node-48, type: content
[SharedNodeStore] Node updated: node-49, type: content
[SharedNodeStore] Node updated: node-50, type: content
[SharedNodeStore] Node updated: node-51, type: content
[SharedNodeStore] Node updated: node-52, type: content
[SharedNodeStore] Node updated: node-53, type: content
[SharedNodeStore] Node updated: node-54, type: content
[SharedNodeStore] Node updated: node-55, type: content
[SharedNodeStore] Node updated: node-56, type: content
[SharedNodeStore] Node updated: node-57, type: content
[SharedNodeStore] Node updated: node-58, type: content
[SharedNodeStore] Node updated: node-59, type: content
[SharedNodeStore] Node updated: node-60, type: content
[SharedNodeStore] Node updated: node-61, type: content
[SharedNodeStore] Node updated: node-62, type: content
[SharedNodeStore] Node updated: node-63, type: content
[SharedNodeStore] Node updated: node-64, type: content
[SharedNodeStore] Node updated: node-65, type: content
[SharedNodeStore] Node updated: node-66, type: content
[SharedNodeStore] Node updated: node-67, type: content
[SharedNodeStore] Node updated: node-68, type: content
[SharedNodeStore] Node updated: node-69, type: content
[SharedNodeStore] Node updated: node-70, type: content
[SharedNodeStore] Node updated: node-71, type: content
[SharedNodeStore] Node updated: node-72, type: content
[SharedNodeStore] Node updated: node-73, type: content
[SharedNodeStore] Node updated: node-74, type: content
[SharedNodeStore] Node updated: node-75, type: content
[SharedNodeStore] Node updated: node-76, type: content
[SharedNodeStore] Node updated: node-77, type: content
[SharedNodeStore] Node updated: node-78, type: content
[SharedNodeStore] Node updated: node-79, type: content
[SharedNodeStore] Node updated: node-80, type: content
[SharedNodeStore] Node updated: node-81, type: content
[SharedNodeStore] Node updated: node-82, type: content
[SharedNodeStore] Node updated: node-83, type: content
[SharedNodeStore] Node updated: node-84, type: content
[SharedNodeStore] Node updated: node-85, type: content
[SharedNodeStore] Node updated: node-86, type: content
[SharedNodeStore] Node updated: node-87, type: content
[SharedNodeStore] Node updated: node-88, type: content
[SharedNodeStore] Node updated: node-89, type: content
[SharedNodeStore] Node updated: node-90, type: content
[SharedNodeStore] Node updated: node-91, type: content
[SharedNodeStore] Node updated: node-92, type: content
[SharedNodeStore] Node updated: node-93, type: content
[SharedNodeStore] Node updated: node-94, type: content
[SharedNodeStore] Node updated: node-95, type: content
[SharedNodeStore] Node updated: node-96, type: content
[SharedNodeStore] Node updated: node-97, type: content
[SharedNodeStore] Node updated: node-98, type: content
[SharedNodeStore] Node updated: node-99, type: content

stdout | src/tests/performance/architecture-benchmarks.test.ts > Architecture Performance Benchmarks > Initial Render Performance - <500ms for 1000 nodes > initial render of 100 nodes completes in <100ms
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49
[SharedNodeStore] Hierarchy change for node: node-50
[SharedNodeStore] Hierarchy change for node: node-51
[SharedNodeStore] Hierarchy change for node: node-52
[SharedNodeStore] Hierarchy change for node: node-53
[SharedNodeStore] Hierarchy change for node: node-54
[SharedNodeStore] Hierarchy change for node: node-55
[SharedNodeStore] Hierarchy change for node: node-56
[SharedNodeStore] Hierarchy change for node: node-57
[SharedNodeStore] Hierarchy change for node: node-58
[SharedNodeStore] Hierarchy change for node: node-59
[SharedNodeStore] Hierarchy change for node: node-60
[SharedNodeStore] Hierarchy change for node: node-61
[SharedNodeStore] Hierarchy change for node: node-62
[SharedNodeStore] Hierarchy change for node: node-63
[SharedNodeStore] Hierarchy change for node: node-64
[SharedNodeStore] Hierarchy change for node: node-65
[SharedNodeStore] Hierarchy change for node: node-66
[SharedNodeStore] Hierarchy change for node: node-67
[SharedNodeStore] Hierarchy change for node: node-68
[SharedNodeStore] Hierarchy change for node: node-69
[SharedNodeStore] Hierarchy change for node: node-70
[SharedNodeStore] Hierarchy change for node: node-71
[SharedNodeStore] Hierarchy change for node: node-72
[SharedNodeStore] Hierarchy change for node: node-73
[SharedNodeStore] Hierarchy change for node: node-74
[SharedNodeStore] Hierarchy change for node: node-75
[SharedNodeStore] Hierarchy change for node: node-76
[SharedNodeStore] Hierarchy change for node: node-77
[SharedNodeStore] Hierarchy change for node: node-78
[SharedNodeStore] Hierarchy change for node: node-79
[SharedNodeStore] Hierarchy change for node: node-80
[SharedNodeStore] Hierarchy change for node: node-81
[SharedNodeStore] Hierarchy change for node: node-82
[SharedNodeStore] Hierarchy change for node: node-83
[SharedNodeStore] Hierarchy change for node: node-84
[SharedNodeStore] Hierarchy change for node: node-85
[SharedNodeStore] Hierarchy change for node: node-86
[SharedNodeStore] Hierarchy change for node: node-87
[SharedNodeStore] Hierarchy change for node: node-88
[SharedNodeStore] Hierarchy change for node: node-89
[SharedNodeStore] Hierarchy change for node: node-90
[SharedNodeStore] Hierarchy change for node: node-91
[SharedNodeStore] Hierarchy change for node: node-92
[SharedNodeStore] Hierarchy change for node: node-93
[SharedNodeStore] Hierarchy change for node: node-94
[SharedNodeStore] Hierarchy change for node: node-95
[SharedNodeStore] Hierarchy change for node: node-96
[SharedNodeStore] Hierarchy change for node: node-97
[SharedNodeStore] Hierarchy change for node: node-98
[SharedNodeStore] Hierarchy change for node: node-99
Initial render of 100 nodes: 1.07ms (target: <100ms for 1000 nodes)

stdout | src/tests/performance/architecture-benchmarks.test.ts > Architecture Performance Benchmarks > Initial Render Performance - <500ms for 1000 nodes > render performance scales linearly with node count
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49
[SharedNodeStore] Hierarchy change for node: node-50
[SharedNodeStore] Hierarchy change for node: node-51
[SharedNodeStore] Hierarchy change for node: node-52
[SharedNodeStore] Hierarchy change for node: node-53
[SharedNodeStore] Hierarchy change for node: node-54
[SharedNodeStore] Hierarchy change for node: node-55
[SharedNodeStore] Hierarchy change for node: node-56
[SharedNodeStore] Hierarchy change for node: node-57
[SharedNodeStore] Hierarchy change for node: node-58
[SharedNodeStore] Hierarchy change for node: node-59
[SharedNodeStore] Hierarchy change for node: node-60
[SharedNodeStore] Hierarchy change for node: node-61
[SharedNodeStore] Hierarchy change for node: node-62
[SharedNodeStore] Hierarchy change for node: node-63
[SharedNodeStore] Hierarchy change for node: node-64
[SharedNodeStore] Hierarchy change for node: node-65
[SharedNodeStore] Hierarchy change for node: node-66
[SharedNodeStore] Hierarchy change for node: node-67
[SharedNodeStore] Hierarchy change for node: node-68
[SharedNodeStore] Hierarchy change for node: node-69
[SharedNodeStore] Hierarchy change for node: node-70
[SharedNodeStore] Hierarchy change for node: node-71
[SharedNodeStore] Hierarchy change for node: node-72
[SharedNodeStore] Hierarchy change for node: node-73
[SharedNodeStore] Hierarchy change for node: node-74
[SharedNodeStore] Hierarchy change for node: node-75
[SharedNodeStore] Hierarchy change for node: node-76
[SharedNodeStore] Hierarchy change for node: node-77
[SharedNodeStore] Hierarchy change for node: node-78
[SharedNodeStore] Hierarchy change for node: node-79
[SharedNodeStore] Hierarchy change for node: node-80
[SharedNodeStore] Hierarchy change for node: node-81
[SharedNodeStore] Hierarchy change for node: node-82
[SharedNodeStore] Hierarchy change for node: node-83
[SharedNodeStore] Hierarchy change for node: node-84
[SharedNodeStore] Hierarchy change for node: node-85
[SharedNodeStore] Hierarchy change for node: node-86
[SharedNodeStore] Hierarchy change for node: node-87
[SharedNodeStore] Hierarchy change for node: node-88
[SharedNodeStore] Hierarchy change for node: node-89
[SharedNodeStore] Hierarchy change for node: node-90
[SharedNodeStore] Hierarchy change for node: node-91
[SharedNodeStore] Hierarchy change for node: node-92
[SharedNodeStore] Hierarchy change for node: node-93
[SharedNodeStore] Hierarchy change for node: node-94
[SharedNodeStore] Hierarchy change for node: node-95
[SharedNodeStore] Hierarchy change for node: node-96
[SharedNodeStore] Hierarchy change for node: node-97
[SharedNodeStore] Hierarchy change for node: node-98
[SharedNodeStore] Hierarchy change for node: node-99
Render scaling analysis:
  50 nodes: 0.62ms
  100 nodes: 1.35ms
  Average scaling factor: 1.08x

stdout | src/tests/performance/architecture-benchmarks.test.ts > Architecture Performance Benchmarks > Multi-Client Sync Latency - <100ms > multi-client sync event handling completes in <100ms
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49
Multi-client sync (10 nodes): 0.17ms (target: <100ms)
  Nodes created: 50
  hierarchyChanged events: 1 (batched reactivity)
  Average latency per operation: 0.017ms

stdout | src/tests/performance/architecture-benchmarks.test.ts > Architecture Performance Benchmarks > Multi-Client Sync Latency - <100ms > rapid sequential sync operations maintain <100ms latency
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49
100 rapid sync operations: 0.02ms total, 0.000ms average

stdout | src/tests/performance/architecture-benchmarks.test.ts > Architecture Performance Benchmarks > Memory Usage Efficiency - 45% Reduction Target > memory usage demonstrates efficient data structures vs legacy (baseline estimation)
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49
[SharedNodeStore] Hierarchy change for node: node-50
[SharedNodeStore] Hierarchy change for node: node-51
[SharedNodeStore] Hierarchy change for node: node-52
[SharedNodeStore] Hierarchy change for node: node-53
[SharedNodeStore] Hierarchy change for node: node-54
[SharedNodeStore] Hierarchy change for node: node-55
[SharedNodeStore] Hierarchy change for node: node-56
[SharedNodeStore] Hierarchy change for node: node-57
[SharedNodeStore] Hierarchy change for node: node-58
[SharedNodeStore] Hierarchy change for node: node-59
[SharedNodeStore] Hierarchy change for node: node-60
[SharedNodeStore] Hierarchy change for node: node-61
[SharedNodeStore] Hierarchy change for node: node-62
[SharedNodeStore] Hierarchy change for node: node-63
[SharedNodeStore] Hierarchy change for node: node-64
[SharedNodeStore] Hierarchy change for node: node-65
[SharedNodeStore] Hierarchy change for node: node-66
[SharedNodeStore] Hierarchy change for node: node-67
[SharedNodeStore] Hierarchy change for node: node-68
[SharedNodeStore] Hierarchy change for node: node-69
[SharedNodeStore] Hierarchy change for node: node-70
[SharedNodeStore] Hierarchy change for node: node-71
[SharedNodeStore] Hierarchy change for node: node-72
[SharedNodeStore] Hierarchy change for node: node-73
[SharedNodeStore] Hierarchy change for node: node-74
[SharedNodeStore] Hierarchy change for node: node-75
[SharedNodeStore] Hierarchy change for node: node-76
[SharedNodeStore] Hierarchy change for node: node-77
[SharedNodeStore] Hierarchy change for node: node-78
[SharedNodeStore] Hierarchy change for node: node-79
[SharedNodeStore] Hierarchy change for node: node-80
[SharedNodeStore] Hierarchy change for node: node-81
[SharedNodeStore] Hierarchy change for node: node-82
[SharedNodeStore] Hierarchy change for node: node-83
[SharedNodeStore] Hierarchy change for node: node-84
[SharedNodeStore] Hierarchy change for node: node-85
[SharedNodeStore] Hierarchy change for node: node-86
[SharedNodeStore] Hierarchy change for node: node-87
[SharedNodeStore] Hierarchy change for node: node-88
[SharedNodeStore] Hierarchy change for node: node-89
[SharedNodeStore] Hierarchy change for node: node-90
[SharedNodeStore] Hierarchy change for node: node-91
[SharedNodeStore] Hierarchy change for node: node-92
[SharedNodeStore] Hierarchy change for node: node-93
[SharedNodeStore] Hierarchy change for node: node-94
[SharedNodeStore] Hierarchy change for node: node-95
[SharedNodeStore] Hierarchy change for node: node-96
[SharedNodeStore] Hierarchy change for node: node-97
[SharedNodeStore] Hierarchy change for node: node-98
[SharedNodeStore] Hierarchy change for node: node-99
Memory usage analysis (100 nodes):
  New architecture estimate: 97.66KB
  Legacy estimate: 200.00KB
  Reduction: 51.2%
  NOTE: Using baseline estimation (not real memory measurement)

stdout | src/tests/performance/architecture-benchmarks.test.ts > Architecture Performance Benchmarks > Lookup Performance - <1ms O(1) Operations > node lookup completes in <1ms on average
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49
[SharedNodeStore] Hierarchy change for node: node-50
[SharedNodeStore] Hierarchy change for node: node-51
[SharedNodeStore] Hierarchy change for node: node-52
[SharedNodeStore] Hierarchy change for node: node-53
[SharedNodeStore] Hierarchy change for node: node-54
[SharedNodeStore] Hierarchy change for node: node-55
[SharedNodeStore] Hierarchy change for node: node-56
[SharedNodeStore] Hierarchy change for node: node-57
[SharedNodeStore] Hierarchy change for node: node-58
[SharedNodeStore] Hierarchy change for node: node-59
[SharedNodeStore] Hierarchy change for node: node-60
[SharedNodeStore] Hierarchy change for node: node-61
[SharedNodeStore] Hierarchy change for node: node-62
[SharedNodeStore] Hierarchy change for node: node-63
[SharedNodeStore] Hierarchy change for node: node-64
[SharedNodeStore] Hierarchy change for node: node-65
[SharedNodeStore] Hierarchy change for node: node-66
[SharedNodeStore] Hierarchy change for node: node-67
[SharedNodeStore] Hierarchy change for node: node-68
[SharedNodeStore] Hierarchy change for node: node-69
[SharedNodeStore] Hierarchy change for node: node-70
[SharedNodeStore] Hierarchy change for node: node-71
[SharedNodeStore] Hierarchy change for node: node-72
[SharedNodeStore] Hierarchy change for node: node-73
[SharedNodeStore] Hierarchy change for node: node-74
[SharedNodeStore] Hierarchy change for node: node-75
[SharedNodeStore] Hierarchy change for node: node-76
[SharedNodeStore] Hierarchy change for node: node-77
[SharedNodeStore] Hierarchy change for node: node-78
[SharedNodeStore] Hierarchy change for node: node-79
[SharedNodeStore] Hierarchy change for node: node-80
[SharedNodeStore] Hierarchy change for node: node-81
[SharedNodeStore] Hierarchy change for node: node-82
[SharedNodeStore] Hierarchy change for node: node-83
[SharedNodeStore] Hierarchy change for node: node-84
[SharedNodeStore] Hierarchy change for node: node-85
[SharedNodeStore] Hierarchy change for node: node-86
[SharedNodeStore] Hierarchy change for node: node-87
[SharedNodeStore] Hierarchy change for node: node-88
[SharedNodeStore] Hierarchy change for node: node-89
[SharedNodeStore] Hierarchy change for node: node-90
[SharedNodeStore] Hierarchy change for node: node-91
[SharedNodeStore] Hierarchy change for node: node-92
[SharedNodeStore] Hierarchy change for node: node-93
[SharedNodeStore] Hierarchy change for node: node-94
[SharedNodeStore] Hierarchy change for node: node-95
[SharedNodeStore] Hierarchy change for node: node-96
[SharedNodeStore] Hierarchy change for node: node-97
[SharedNodeStore] Hierarchy change for node: node-98
[SharedNodeStore] Hierarchy change for node: node-99
[SharedNodeStore] Hierarchy change for node: node-100
[SharedNodeStore] Hierarchy change for node: node-101
[SharedNodeStore] Hierarchy change for node: node-102
[SharedNodeStore] Hierarchy change for node: node-103
[SharedNodeStore] Hierarchy change for node: node-104
[SharedNodeStore] Hierarchy change for node: node-105
[SharedNodeStore] Hierarchy change for node: node-106
[SharedNodeStore] Hierarchy change for node: node-107
[SharedNodeStore] Hierarchy change for node: node-108
[SharedNodeStore] Hierarchy change for node: node-109
[SharedNodeStore] Hierarchy change for node: node-110
[SharedNodeStore] Hierarchy change for node: node-111
[SharedNodeStore] Hierarchy change for node: node-112
[SharedNodeStore] Hierarchy change for node: node-113
[SharedNodeStore] Hierarchy change for node: node-114
[SharedNodeStore] Hierarchy change for node: node-115
[SharedNodeStore] Hierarchy change for node: node-116
[SharedNodeStore] Hierarchy change for node: node-117
[SharedNodeStore] Hierarchy change for node: node-118
[SharedNodeStore] Hierarchy change for node: node-119
[SharedNodeStore] Hierarchy change for node: node-120
[SharedNodeStore] Hierarchy change for node: node-121
[SharedNodeStore] Hierarchy change for node: node-122
[SharedNodeStore] Hierarchy change for node: node-123
[SharedNodeStore] Hierarchy change for node: node-124
[SharedNodeStore] Hierarchy change for node: node-125
[SharedNodeStore] Hierarchy change for node: node-126
[SharedNodeStore] Hierarchy change for node: node-127
[SharedNodeStore] Hierarchy change for node: node-128
[SharedNodeStore] Hierarchy change for node: node-129
[SharedNodeStore] Hierarchy change for node: node-130
[SharedNodeStore] Hierarchy change for node: node-131
[SharedNodeStore] Hierarchy change for node: node-132
[SharedNodeStore] Hierarchy change for node: node-133
[SharedNodeStore] Hierarchy change for node: node-134
[SharedNodeStore] Hierarchy change for node: node-135
[SharedNodeStore] Hierarchy change for node: node-136
[SharedNodeStore] Hierarchy change for node: node-137
[SharedNodeStore] Hierarchy change for node: node-138
[SharedNodeStore] Hierarchy change for node: node-139
[SharedNodeStore] Hierarchy change for node: node-140
[SharedNodeStore] Hierarchy change for node: node-141
[SharedNodeStore] Hierarchy change for node: node-142
[SharedNodeStore] Hierarchy change for node: node-143
[SharedNodeStore] Hierarchy change for node: node-144
[SharedNodeStore] Hierarchy change for node: node-145
[SharedNodeStore] Hierarchy change for node: node-146
[SharedNodeStore] Hierarchy change for node: node-147
[SharedNodeStore] Hierarchy change for node: node-148
[SharedNodeStore] Hierarchy change for node: node-149
Node lookup performance (150 nodes, 100 lookups): 0.0002ms average

 ✓ src/tests/performance/architecture-benchmarks.test.ts (11 tests) 27ms
stdout | src/tests/performance/architecture-benchmarks.test.ts > Architecture Performance Benchmarks > Lookup Performance - <1ms O(1) Operations > combineNodes operation completes in <20ms
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49
[SharedNodeStore] Hierarchy change for node: node-50
[SharedNodeStore] Hierarchy change for node: node-51
[SharedNodeStore] Hierarchy change for node: node-52
[SharedNodeStore] Hierarchy change for node: node-53
[SharedNodeStore] Hierarchy change for node: node-54
[SharedNodeStore] Hierarchy change for node: node-55
[SharedNodeStore] Hierarchy change for node: node-56
[SharedNodeStore] Hierarchy change for node: node-57
[SharedNodeStore] Hierarchy change for node: node-58
[SharedNodeStore] Hierarchy change for node: node-59
[SharedNodeStore] Hierarchy change for node: node-60
[SharedNodeStore] Hierarchy change for node: node-61
[SharedNodeStore] Hierarchy change for node: node-62
[SharedNodeStore] Hierarchy change for node: node-63
[SharedNodeStore] Hierarchy change for node: node-64
[SharedNodeStore] Hierarchy change for node: node-65
[SharedNodeStore] Hierarchy change for node: node-66
[SharedNodeStore] Hierarchy change for node: node-67
[SharedNodeStore] Hierarchy change for node: node-68
[SharedNodeStore] Hierarchy change for node: node-69
[SharedNodeStore] Hierarchy change for node: node-70
[SharedNodeStore] Hierarchy change for node: node-71
[SharedNodeStore] Hierarchy change for node: node-72
[SharedNodeStore] Hierarchy change for node: node-73
[SharedNodeStore] Hierarchy change for node: node-74
[SharedNodeStore] Hierarchy change for node: node-75
[SharedNodeStore] Hierarchy change for node: node-76
[SharedNodeStore] Hierarchy change for node: node-77
[SharedNodeStore] Hierarchy change for node: node-78
[SharedNodeStore] Hierarchy change for node: node-79
[SharedNodeStore] Hierarchy change for node: node-80
[SharedNodeStore] Hierarchy change for node: node-81
[SharedNodeStore] Hierarchy change for node: node-82
[SharedNodeStore] Hierarchy change for node: node-83
[SharedNodeStore] Hierarchy change for node: node-84
[SharedNodeStore] Hierarchy change for node: node-85
[SharedNodeStore] Hierarchy change for node: node-86
[SharedNodeStore] Hierarchy change for node: node-87
[SharedNodeStore] Hierarchy change for node: node-88
[SharedNodeStore] Hierarchy change for node: node-89
[SharedNodeStore] Hierarchy change for node: node-90
[SharedNodeStore] Hierarchy change for node: node-91
[SharedNodeStore] Hierarchy change for node: node-92
[SharedNodeStore] Hierarchy change for node: node-93
[SharedNodeStore] Hierarchy change for node: node-94
[SharedNodeStore] Hierarchy change for node: node-95
[SharedNodeStore] Hierarchy change for node: node-96
[SharedNodeStore] Hierarchy change for node: node-97
[SharedNodeStore] Hierarchy change for node: node-98
[SharedNodeStore] Hierarchy change for node: node-99
[SharedNodeStore] Node updated: node-0, type: content
[SharedNodeStore] Node deleted: node-1
[SharedNodeStore] Node updated: node-2, type: content
[SharedNodeStore] Node deleted: node-3
[SharedNodeStore] Node updated: node-4, type: content
[SharedNodeStore] Node deleted: node-5
[SharedNodeStore] Node updated: node-6, type: content
[SharedNodeStore] Node deleted: node-7
[SharedNodeStore] Node updated: node-8, type: content
[SharedNodeStore] Node deleted: node-9
10 combineNodes operations (100 node document): 0.81ms

stdout | src/tests/performance/architecture-benchmarks.test.ts > Architecture Performance Benchmarks > Architecture Targets Validation > validates all performance targets are achievable
Architecture Performance Targets:
  [✓] Structural operations: <10ms
  [✓] Initial render (1000 nodes): <500ms
  [✓] Multi-client sync latency: <100ms
  [✓] Memory reduction: ≥45%

stderr | src/tests/performance/architecture-benchmarks.test.ts
[SharedNodeStore] Auto-committing batch after inactivity timeout {
  batchId: 'batch-quote-node-1-0',
  nodeId: 'quote-node-1',
  timeoutMs: 2000,
  age: 2025
}
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'quote-node-1', batchId: 'batch-quote-node-1-0' }
[SharedNodeStore] Auto-committing batch after inactivity timeout {
  batchId: 'batch-quote-node-1-1',
  nodeId: 'quote-node-1',
  timeoutMs: 2000,
  age: 2025
}
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'quote-node-1', batchId: 'batch-quote-node-1-1' }
[SharedNodeStore] Auto-committing batch after inactivity timeout {
  batchId: 'batch-quote-node-1-0',
  nodeId: 'quote-node-1',
  timeoutMs: 2000,
  age: 2025
}
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'quote-node-1', batchId: 'batch-quote-node-1-0' }
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'quote-node-1', batchId: 'batch-quote-node-1-0' }
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'quote-node-1', batchId: 'batch-quote-node-1-0' }
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'quote-node-1', batchId: 'batch-quote-node-1-0' }

stdout | src/tests/performance/architecture-benchmarks.test.ts

🔧 Performance Test Mode: FAST
   Running quick development tests with reduced datasets


stdout | src/tests/services/tab-persistence-service.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > save and load > persists and retrieves tab state
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > save and load > returns null when no saved state exists
[TabPersistence] No saved state found

stderr | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > save and load > handles corrupted JSON gracefully
[TabPersistence] Failed to load state: SyntaxError: Unexpected token 'i', "invalid-json{]" is not valid JSON
    at JSON.parse (<anonymous>)
    at TabPersistenceService.load (/Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/lib/services/tab-persistence-service.ts:113:27)
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/tab-persistence-service.test.ts:62:44
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > save and load > persists multiple tabs and panes correctly
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

stderr | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > validation > rejects state with invalid structure
[TabPersistence] Invalid state structure, ignoring

stderr | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > validation > rejects state with missing version
[TabPersistence] Invalid state structure, ignoring

stderr | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > validation > rejects state with invalid tabs array
[TabPersistence] Invalid state structure, ignoring

stderr | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > validation > rejects state with malformed tab objects
[TabPersistence] Invalid state structure, ignoring

stderr | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > validation > rejects state with invalid panes array
[TabPersistence] Invalid state structure, ignoring

stderr | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > validation > rejects state with invalid tab type
[TabPersistence] Invalid state structure, ignoring

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > validation > accepts valid state with all required fields
[TabPersistence] State loaded successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > debouncing > debounces rapid saves
[TabPersistence] State saved successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > debouncing > resets debounce timer on each save
[TabPersistence] State saved successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > clear > removes persisted state
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully
[TabPersistence] State cleared
[TabPersistence] No saved state found

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > flush > saves immediately and clears pending timer
[TabPersistence] State saved successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > edge cases > handles empty tabs and panes arrays
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > edge cases > handles localStorage quota exceeded
[TabPersistence] State saved successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > edge cases > handles special characters in tab titles
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > date node title migration > recomputes date titles on load
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > date node title migration > preserves titles for non-date nodes
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > date node title migration > handles invalid date strings gracefully
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > date node title migration > recomputes tomorrow date title correctly
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > date node title migration > recomputes yesterday date title correctly
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

 ✓ src/tests/services/tab-persistence-service.test.ts (25 tests) 4ms
stdout | src/tests/services/tab-persistence-service.test.ts > TabPersistenceService > date node title migration > handles date nodes without nodeId gracefully
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

stdout | src/tests/plugins/core-plugins.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stderr | src/tests/plugins/core-plugins.test.ts > Core Plugins Integration > Plugin Component Resolution > should resolve viewer components for plugins with viewers
Failed to lazy load viewer for date: {
  name: 'Error',
  message: 'Failed to resolve entry for package "bits-ui". The package may have incorrect main/module/exports specified in its package.json: No known conditions for "." specifier in "bits-ui" package',
  stack: 'Error: Failed to resolve entry for package "bits-ui". The package may have incorrect main/module/exports specified in its package.json: No known conditions for "." specifier in "bits-ui" package\n' +
    '    at packageEntryFailure (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/vitest/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:46638:15)\n' +
    '    at resolvePackageEntry (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/vitest/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:46633:5)\n' +
    '    at tryNodeResolve (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/vitest/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:46451:16)\n' +
    '    at ResolveIdContext.resolveId (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/vitest/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:46201:19)\n' +
    '    at PluginContainer.resolveId (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/vitest/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:49018:17)\n' +
    '    at async TransformPluginContext.resolve (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/vitest/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:49178:15)\n' +
    '    at async normalizeUrl (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/vitest/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:64299:26)\n' +
    '    at async file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/vitest/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:64438:39\n' +
    '    at async Promise.all (index 2)\n' +
    '    at async TransformPluginContext.transform (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/vitest/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:64365:7)',
  cause: undefined,
  __vitest_rollup_error__: {
    plugin: 'vite:import-analysis',
    id: '/Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/lib/components/ui/calendar/calendar.svelte',
    loc: undefined,
    frame: undefined
  }
}

 ✓ src/tests/plugins/core-plugins.test.ts (26 tests) 122ms
stdout | src/tests/services/plugin-registry.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stderr | src/tests/services/plugin-registry.test.ts > PluginRegistry - Unified Plugin System > Viewer Component Management > should handle lazy load failures gracefully
Failed to lazy load viewer for lazy-plugin: Error: Load failed
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/services/plugin-registry.test.ts:271:40
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)

 ✓ src/tests/services/plugin-registry.test.ts (33 tests) 5ms
stdout | src/tests/plugins/schema-plugin-loader.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stderr | src/tests/plugins/schema-plugin-loader.test.ts
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'quote-node-1', batchId: 'batch-quote-node-1-0' }
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'code-node-1', batchId: 'batch-code-node-1-0' }
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'list-node-1', batchId: 'batch-list-node-1-0' }

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - registerSchemaPlugin() > should register non-core schema as plugin
Plugin registered: Invoice (invoice)
[SchemaPluginLoader] Registered plugin for custom entity: invoice

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - registerSchemaPlugin() > should skip core schemas (isCore: true)
[SchemaPluginLoader] Skipping core type registration: text

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - registerSchemaPlugin() > should handle both camelCase and snake_case for isCore check
[SchemaPluginLoader] Skipping core type registration: text1
[SchemaPluginLoader] Skipping core type registration: text2

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - registerSchemaPlugin() > should be idempotent - no duplicate registrations
Plugin registered: Invoice (invoice)
[SchemaPluginLoader] Registered plugin for custom entity: invoice
[SchemaPluginLoader] Plugin already registered: invoice
[SchemaPluginLoader] Plugin already registered: invoice

stderr | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - registerSchemaPlugin() > should throw error if schema cannot be fetched
[SchemaPluginLoader] Failed to register schema plugin: nonexistent Error: Schema not found
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/plugins/schema-plugin-loader.test.ts:247:7
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - unregisterSchemaPlugin() > should unregister plugin by schema ID
Plugin registered: Invoice (invoice)
[SchemaPluginLoader] Registered plugin for custom entity: invoice
Plugin unregistered: invoice
[SchemaPluginLoader] Unregistered plugin: invoice

stderr | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - unregisterSchemaPlugin() > should handle unregistering non-existent plugin gracefully
[SchemaPluginLoader] Attempted to unregister non-existent plugin: nonexistent

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - initializeSchemaPluginSystem() > should register all non-core schemas on startup
[SchemaPluginLoader] Initializing schema plugin system...
Plugin registered: Invoice (invoice)
[SchemaPluginLoader] Registered plugin for custom entity: invoice
Plugin registered: Customer (customer)
[SchemaPluginLoader] Registered plugin for custom entity: customer
[SchemaPluginLoader] Schema plugin system initialized (2 custom entities registered)

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - initializeSchemaPluginSystem() > should return success=false on initialization failure
[SchemaPluginLoader] Initializing schema plugin system...

stderr | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - initializeSchemaPluginSystem() > should return success=false on initialization failure
[SchemaPluginLoader] Failed to initialize: Error: Database connection failed
    at /Users/malibio/nodespace/nodespace-core-dev3/packages/desktop-app/src/tests/plugins/schema-plugin-loader.test.ts:348:7
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1056:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/malibio/nodespace/nodespace-core-dev3/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - initializeSchemaPluginSystem() > should handle empty schema list
[SchemaPluginLoader] Initializing schema plugin system...
[SchemaPluginLoader] Schema plugin system initialized (0 custom entities registered)

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - initializeSchemaPluginSystem() > should parallelize schema registration for performance
[SchemaPluginLoader] Initializing schema plugin system...

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - initializeSchemaPluginSystem() > should parallelize schema registration for performance
Plugin registered: Entity 0 (entity0)
[SchemaPluginLoader] Registered plugin for custom entity: entity0
Plugin registered: Entity 1 (entity1)
[SchemaPluginLoader] Registered plugin for custom entity: entity1
Plugin registered: Entity 2 (entity2)
[SchemaPluginLoader] Registered plugin for custom entity: entity2
Plugin registered: Entity 3 (entity3)
[SchemaPluginLoader] Registered plugin for custom entity: entity3
Plugin registered: Entity 4 (entity4)
[SchemaPluginLoader] Registered plugin for custom entity: entity4
Plugin registered: Entity 5 (entity5)
[SchemaPluginLoader] Registered plugin for custom entity: entity5
Plugin registered: Entity 6 (entity6)
[SchemaPluginLoader] Registered plugin for custom entity: entity6
Plugin registered: Entity 7 (entity7)
[SchemaPluginLoader] Registered plugin for custom entity: entity7
Plugin registered: Entity 8 (entity8)
[SchemaPluginLoader] Registered plugin for custom entity: entity8
Plugin registered: Entity 9 (entity9)
[SchemaPluginLoader] Registered plugin for custom entity: entity9
[SchemaPluginLoader] Schema plugin system initialized (10 custom entities registered)

 ✓ src/tests/plugins/schema-plugin-loader.test.ts (22 tests) 15ms
stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - initializeSchemaPluginSystem() > should handle both camelCase and snake_case core type filtering
[SchemaPluginLoader] Initializing schema plugin system...
Plugin registered: Invoice (invoice)
[SchemaPluginLoader] Registered plugin for custom entity: invoice
[SchemaPluginLoader] Schema plugin system initialized (1 custom entities registered)

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - Integration Tests > should complete full registration flow: schema → plugin → slash command
Plugin registered: Sales Invoice (invoice)
[SchemaPluginLoader] Registered plugin for custom entity: invoice

stdout | src/tests/plugins/schema-plugin-loader.test.ts > Schema Plugin Loader - Integration Tests > should handle full startup initialization flow
[SchemaPluginLoader] Initializing schema plugin system...
Plugin registered: Invoice (invoice)
[SchemaPluginLoader] Registered plugin for custom entity: invoice
Plugin registered: Customer (customer)
[SchemaPluginLoader] Registered plugin for custom entity: customer
[SchemaPluginLoader] Schema plugin system initialized (2 custom entities registered)

stdout | src/tests/unit/reactive-structure-tree.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/unit/reactive-structure-tree.test.ts (25 tests) 4ms
stdout | src/tests/unit/schema-service.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/unit/schema-service.test.ts (25 tests) 8ms
stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts > Keyboard Command Integration > Enter Key Integration > should execute CreateNodeCommand and emit createNewNode event
[KeyboardCommandRegistry] Command executed: create-node (Create new node on Enter key)

stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts > Keyboard Command Integration > Tab Key Integration > should execute IndentNodeCommand and emit indentNode event
[KeyboardCommandRegistry] Command executed: indent-node (Indent node on Tab key)

stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts > Keyboard Command Integration > Tab Key Integration > should execute OutdentNodeCommand for Shift+Tab and emit outdentNode event
[KeyboardCommandRegistry] Command executed: outdent-node (Outdent node on Shift+Tab)

stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts > Keyboard Command Integration > Backspace Key Integration > should execute MergeNodesCommand for non-empty node at start
[KeyboardCommandRegistry] Command executed: merge-nodes-up (Merge with previous node on Backspace)

stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts > Keyboard Command Integration > Backspace Key Integration > should execute MergeNodesCommand and delete empty node
[KeyboardCommandRegistry] Command executed: merge-nodes-up (Merge with previous node on Backspace)

 ✓ src/tests/commands/keyboard/keyboard-command-integration.test.ts (16 tests) 3ms
stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts > Keyboard Command Integration > Arrow Key Navigation Integration > should execute NavigateUpCommand and emit navigateArrow event
[KeyboardCommandRegistry] Command executed: navigate-up (Navigate to previous node on ArrowUp at first line)

stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts > Keyboard Command Integration > Arrow Key Navigation Integration > should execute NavigateDownCommand and emit navigateArrow event
[KeyboardCommandRegistry] Command executed: navigate-down (Navigate to next node on ArrowDown at last line)

stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts > Keyboard Command Integration > Text Formatting Integration > should execute FormatTextCommand for Cmd+B (bold)
[KeyboardCommandRegistry] Command executed: format-text-bold (Toggle bold formatting)

stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts > Keyboard Command Integration > Text Formatting Integration > should execute FormatTextCommand for Ctrl+B (bold on Windows/Linux)
[KeyboardCommandRegistry] Command executed: format-text-bold (Toggle bold formatting)

stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts > Keyboard Command Integration > Text Formatting Integration > should execute FormatTextCommand for Cmd+I (italic)
[KeyboardCommandRegistry] Command executed: format-text-italic (Toggle italic formatting)

stdout | src/tests/commands/keyboard/keyboard-command-integration.test.ts > Keyboard Command Integration > Context Building > should properly use context data in command execution
[KeyboardCommandRegistry] Command executed: create-node (Create new node on Enter key)

stdout | src/tests/components/header-node-pattern-detection.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Pattern Detection Configuration > should have header plugin registered with pattern detection
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Pattern Detection Configuration > should have correct pattern regex for h1-h6 detection
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Pattern Detection Configuration > should extract headerLevel metadata correctly
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Header Level Pattern Matching > should match h1 pattern: # + space
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Header Level Pattern Matching > should match h2 pattern: ## + space
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Header Level Pattern Matching > should match h3 pattern: ### + space
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Header Level Pattern Matching > should match h4 pattern: #### + space
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Header Level Pattern Matching > should match h5 pattern: ##### + space
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Header Level Pattern Matching > should match h6 pattern: ###### + space
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Pattern Non-Matching Cases > should NOT match hashtags without space
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Pattern Non-Matching Cases > should NOT match more than 6 hashtags
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Pattern Non-Matching Cases > should NOT match hashtags in middle of content
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Pattern Non-Matching Cases > should NOT match empty content after hashtags
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Pattern Non-Matching Cases > should NOT match when space is missing
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Content Preservation > should preserve hashtags in content (cleanContent: false)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Content Preservation > should preserve inline formatting in headers
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Content Preservation > should handle headers with special characters
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Content Preservation > should handle headers with numbers
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Bidirectional Conversion Support > should detect pattern for forward conversion (text → header)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Bidirectional Conversion Support > should NOT detect pattern when hashtags removed (header → text)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Bidirectional Conversion Support > should NOT detect pattern when space removed
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

 ✓ src/tests/components/header-node-pattern-detection.test.ts (33 tests) 2ms
stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Bidirectional Conversion Support > should detect pattern change when level changes
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Edge Cases > should handle empty string
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Edge Cases > should handle whitespace-only content
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Edge Cases > should handle newlines in content
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Edge Cases > should handle unicode characters
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Edge Cases > should handle very long headers
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Priority and Ordering > should have appropriate priority for pattern matching
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Priority and Ordering > should not conflict with task pattern
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Priority and Ordering > should prioritize header pattern over task pattern when both match
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Slash Command Integration > should have slash commands for h1, h2, h3
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Slash Command Integration > should have shortcuts for slash commands
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/components/header-node-pattern-detection.test.ts > HeaderNode Pattern Detection > Slash Command Integration > should create content that matches pattern detection
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/integration/expansion-state-persistence.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/integration/expansion-state-persistence.test.ts > Expansion State Persistence Integration > End-to-End Persistence Flow > should persist and restore expansion states across simulated app restart
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[TabPersistence] State cleared
[SharedNodeStore] Hierarchy change for node: root-1
[SharedNodeStore] Hierarchy change for node: child-1
[SharedNodeStore] Hierarchy change for node: child-2
[SharedNodeStore] Hierarchy change for node: grandchild-1
[TabPersistence] State saved successfully
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[TabPersistence] State loaded successfully
[NodeExpansionCoordinator] Scheduling 2 expansions for viewer: test-tab-1
[NodeExpansionCoordinator] Restoring 2 expansions for viewer: test-tab-1
[NodeExpansionCoordinator] Restored expansions for viewer test-tab-1: 2 applied, 0 skipped (missing nodes)

stdout | src/tests/integration/expansion-state-persistence.test.ts > Expansion State Persistence Integration > End-to-End Persistence Flow > should handle multiple tabs with independent expansion states
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[TabPersistence] State cleared
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3

stdout | src/tests/integration/expansion-state-persistence.test.ts > Expansion State Persistence Integration > End-to-End Persistence Flow > should gracefully handle missing nodes during restoration
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[TabPersistence] State cleared
[SharedNodeStore] Hierarchy change for node: existing-node
[NodeExpansionCoordinator] Restored expansions for viewer test-tab-1: 1 applied, 1 skipped (missing nodes)

stdout | src/tests/integration/expansion-state-persistence.test.ts > Expansion State Persistence Integration > End-to-End Persistence Flow > should handle empty expansion state gracefully
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[TabPersistence] State cleared
[SharedNodeStore] Hierarchy change for node: node-1

stdout | src/tests/integration/expansion-state-persistence.test.ts > Expansion State Persistence Integration > TabPersistenceService Integration > should include expansion states in persisted tab data
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[TabPersistence] State cleared
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

stdout | src/tests/integration/expansion-state-persistence.test.ts > Expansion State Persistence Integration > TabPersistenceService Integration > should handle tabs without expansion data
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[TabPersistence] State cleared
[TabPersistence] State saved successfully
[TabPersistence] State loaded successfully

stdout | src/tests/integration/expansion-state-persistence.test.ts > Expansion State Persistence Integration > Debouncing and Performance > should handle rapid expansion changes efficiently
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[TabPersistence] State cleared
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49

stdout | src/tests/integration/expansion-state-persistence.test.ts > Expansion State Persistence Integration > Debouncing and Performance > should use batch restoration for performance
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[TabPersistence] State cleared
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[NodeExpansionCoordinator] Restored expansions for viewer test-tab-1: 15 applied, 0 skipped (missing nodes)

 ✓ src/tests/integration/expansion-state-persistence.test.ts (8 tests) 5ms
stdout | src/tests/integration/ordered-list-workflow.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/integration/ordered-list-workflow.test.ts (29 tests) 1ms
stdout | src/tests/patterns/splitter/integration.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/patterns/splitter/integration.test.ts (29 tests) 2ms
stdout | src/tests/commands/keyboard/navigate-up.command.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/commands/keyboard/navigate-up.command.test.ts (16 tests) 2ms
stdout | src/tests/patterns/registry.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/patterns/registry.test.ts (21 tests) 1ms
stdout | src/tests/integration/node-workflow.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/integration/node-workflow.test.ts > Node Management Integration Tests > Complete Node Lifecycle > creates, reads, updates, and deletes a node (CRUD)
Deleting node: test-node-1763805305922-2dfvlowncxr - Updated content

stdout | src/tests/integration/node-workflow.test.ts > Node Management Integration Tests > Data Consistency > maintains data integrity across operations
Deleting node: test-node-1763805306069-e772hmb4j1a - Node 2

 ✓ src/tests/integration/node-workflow.test.ts (13 tests) 1362ms
   ✓ Node Management Integration Tests > Performance and Scalability > handles reasonable number of nodes efficiently 1097ms
stdout | src/tests/components/date-picker.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/components/date-picker.test.ts (28 tests) 2ms
stdout | src/tests/utils/inline-formatting-split.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/utils/inline-formatting-split.test.ts (27 tests) 2ms
stdout | src/tests/patterns/splitter/simple-split.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/patterns/splitter/simple-split.test.ts (30 tests) 1ms
stdout | src/tests/patterns/performance.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/patterns/performance.test.ts (19 tests) 18ms
stdout | src/tests/patterns/performance.test.ts > Pattern System Performance Benchmarks > Performance Statistics > should report performance metrics for analysis

Pattern System Performance Metrics:
  Pattern Detection: 0.039μs per operation
  Content Splitting: 0.089μs per operation
  Detection Threshold: 10.000μs
  Splitting Threshold: 50.000μs

stdout | src/tests/services/mcp-integration.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/services/mcp-integration.test.ts > Phase 3: MCP Integration (Simulated) > handleExternalUpdate > should handle MCP server updates
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/mcp-integration.test.ts > Phase 3: MCP Integration (Simulated) > handleExternalUpdate > should handle database sync updates
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/mcp-integration.test.ts > Phase 3: MCP Integration (Simulated) > handleExternalUpdate > should handle generic external updates
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/mcp-integration.test.ts > Phase 3: MCP Integration (Simulated) > Multi-Viewer Synchronization > should propagate MCP updates to all subscribed viewers
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/mcp-integration.test.ts > Phase 3: MCP Integration (Simulated) > Multi-Viewer Synchronization > should integrate with ReactiveNodeService viewer instances
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/mcp-integration.test.ts > Phase 3: MCP Integration (Simulated) > MCP Update Conflicts > should handle local edit and MCP update sequence
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/mcp-integration.test.ts > Phase 3: MCP Integration (Simulated) > MCP Update Performance > should handle high-frequency MCP updates efficiently
[SharedNodeStore] Hierarchy change for node: node-0
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3
[SharedNodeStore] Hierarchy change for node: node-4
[SharedNodeStore] Hierarchy change for node: node-5
[SharedNodeStore] Hierarchy change for node: node-6
[SharedNodeStore] Hierarchy change for node: node-7
[SharedNodeStore] Hierarchy change for node: node-8
[SharedNodeStore] Hierarchy change for node: node-9
[SharedNodeStore] Hierarchy change for node: node-10
[SharedNodeStore] Hierarchy change for node: node-11
[SharedNodeStore] Hierarchy change for node: node-12
[SharedNodeStore] Hierarchy change for node: node-13
[SharedNodeStore] Hierarchy change for node: node-14
[SharedNodeStore] Hierarchy change for node: node-15
[SharedNodeStore] Hierarchy change for node: node-16
[SharedNodeStore] Hierarchy change for node: node-17
[SharedNodeStore] Hierarchy change for node: node-18
[SharedNodeStore] Hierarchy change for node: node-19
[SharedNodeStore] Hierarchy change for node: node-20
[SharedNodeStore] Hierarchy change for node: node-21
[SharedNodeStore] Hierarchy change for node: node-22
[SharedNodeStore] Hierarchy change for node: node-23
[SharedNodeStore] Hierarchy change for node: node-24
[SharedNodeStore] Hierarchy change for node: node-25
[SharedNodeStore] Hierarchy change for node: node-26
[SharedNodeStore] Hierarchy change for node: node-27
[SharedNodeStore] Hierarchy change for node: node-28
[SharedNodeStore] Hierarchy change for node: node-29
[SharedNodeStore] Hierarchy change for node: node-30
[SharedNodeStore] Hierarchy change for node: node-31
[SharedNodeStore] Hierarchy change for node: node-32
[SharedNodeStore] Hierarchy change for node: node-33
[SharedNodeStore] Hierarchy change for node: node-34
[SharedNodeStore] Hierarchy change for node: node-35
[SharedNodeStore] Hierarchy change for node: node-36
[SharedNodeStore] Hierarchy change for node: node-37
[SharedNodeStore] Hierarchy change for node: node-38
[SharedNodeStore] Hierarchy change for node: node-39
[SharedNodeStore] Hierarchy change for node: node-40
[SharedNodeStore] Hierarchy change for node: node-41
[SharedNodeStore] Hierarchy change for node: node-42
[SharedNodeStore] Hierarchy change for node: node-43
[SharedNodeStore] Hierarchy change for node: node-44
[SharedNodeStore] Hierarchy change for node: node-45
[SharedNodeStore] Hierarchy change for node: node-46
[SharedNodeStore] Hierarchy change for node: node-47
[SharedNodeStore] Hierarchy change for node: node-48
[SharedNodeStore] Hierarchy change for node: node-49
[SharedNodeStore] Hierarchy change for node: node-50
[SharedNodeStore] Hierarchy change for node: node-51
[SharedNodeStore] Hierarchy change for node: node-52
[SharedNodeStore] Hierarchy change for node: node-53
[SharedNodeStore] Hierarchy change for node: node-54
[SharedNodeStore] Hierarchy change for node: node-55
[SharedNodeStore] Hierarchy change for node: node-56
[SharedNodeStore] Hierarchy change for node: node-57
[SharedNodeStore] Hierarchy change for node: node-58
[SharedNodeStore] Hierarchy change for node: node-59
[SharedNodeStore] Hierarchy change for node: node-60
[SharedNodeStore] Hierarchy change for node: node-61
[SharedNodeStore] Hierarchy change for node: node-62
[SharedNodeStore] Hierarchy change for node: node-63
[SharedNodeStore] Hierarchy change for node: node-64
[SharedNodeStore] Hierarchy change for node: node-65
[SharedNodeStore] Hierarchy change for node: node-66
[SharedNodeStore] Hierarchy change for node: node-67
[SharedNodeStore] Hierarchy change for node: node-68
[SharedNodeStore] Hierarchy change for node: node-69
[SharedNodeStore] Hierarchy change for node: node-70
[SharedNodeStore] Hierarchy change for node: node-71
[SharedNodeStore] Hierarchy change for node: node-72
[SharedNodeStore] Hierarchy change for node: node-73
[SharedNodeStore] Hierarchy change for node: node-74
[SharedNodeStore] Hierarchy change for node: node-75
[SharedNodeStore] Hierarchy change for node: node-76
[SharedNodeStore] Hierarchy change for node: node-77
[SharedNodeStore] Hierarchy change for node: node-78
[SharedNodeStore] Hierarchy change for node: node-79
[SharedNodeStore] Hierarchy change for node: node-80
[SharedNodeStore] Hierarchy change for node: node-81
[SharedNodeStore] Hierarchy change for node: node-82
[SharedNodeStore] Hierarchy change for node: node-83
[SharedNodeStore] Hierarchy change for node: node-84
[SharedNodeStore] Hierarchy change for node: node-85
[SharedNodeStore] Hierarchy change for node: node-86
[SharedNodeStore] Hierarchy change for node: node-87
[SharedNodeStore] Hierarchy change for node: node-88
[SharedNodeStore] Hierarchy change for node: node-89
[SharedNodeStore] Hierarchy change for node: node-90
[SharedNodeStore] Hierarchy change for node: node-91
[SharedNodeStore] Hierarchy change for node: node-92
[SharedNodeStore] Hierarchy change for node: node-93
[SharedNodeStore] Hierarchy change for node: node-94
[SharedNodeStore] Hierarchy change for node: node-95
[SharedNodeStore] Hierarchy change for node: node-96
[SharedNodeStore] Hierarchy change for node: node-97
[SharedNodeStore] Hierarchy change for node: node-98
[SharedNodeStore] Hierarchy change for node: node-99
[SharedNodeStore] Node updated: node-0, type: content
[SharedNodeStore] Node updated: node-1, type: content
[SharedNodeStore] Node updated: node-2, type: content
[SharedNodeStore] Node updated: node-3, type: content
[SharedNodeStore] Node updated: node-4, type: content
[SharedNodeStore] Node updated: node-5, type: content
[SharedNodeStore] Node updated: node-6, type: content
[SharedNodeStore] Node updated: node-7, type: content
[SharedNodeStore] Node updated: node-8, type: content
[SharedNodeStore] Node updated: node-9, type: content
[SharedNodeStore] Node updated: node-10, type: content
[SharedNodeStore] Node updated: node-11, type: content
[SharedNodeStore] Node updated: node-12, type: content
[SharedNodeStore] Node updated: node-13, type: content
[SharedNodeStore] Node updated: node-14, type: content
[SharedNodeStore] Node updated: node-15, type: content
[SharedNodeStore] Node updated: node-16, type: content
[SharedNodeStore] Node updated: node-17, type: content
[SharedNodeStore] Node updated: node-18, type: content
[SharedNodeStore] Node updated: node-19, type: content
[SharedNodeStore] Node updated: node-20, type: content
[SharedNodeStore] Node updated: node-21, type: content
[SharedNodeStore] Node updated: node-22, type: content
[SharedNodeStore] Node updated: node-23, type: content
[SharedNodeStore] Node updated: node-24, type: content
[SharedNodeStore] Node updated: node-25, type: content
[SharedNodeStore] Node updated: node-26, type: content
[SharedNodeStore] Node updated: node-27, type: content
[SharedNodeStore] Node updated: node-28, type: content
[SharedNodeStore] Node updated: node-29, type: content
[SharedNodeStore] Node updated: node-30, type: content
[SharedNodeStore] Node updated: node-31, type: content
[SharedNodeStore] Node updated: node-32, type: content
[SharedNodeStore] Node updated: node-33, type: content
[SharedNodeStore] Node updated: node-34, type: content
[SharedNodeStore] Node updated: node-35, type: content
[SharedNodeStore] Node updated: node-36, type: content
[SharedNodeStore] Node updated: node-37, type: content
[SharedNodeStore] Node updated: node-38, type: content
[SharedNodeStore] Node updated: node-39, type: content
[SharedNodeStore] Node updated: node-40, type: content
[SharedNodeStore] Node updated: node-41, type: content
[SharedNodeStore] Node updated: node-42, type: content
[SharedNodeStore] Node updated: node-43, type: content
[SharedNodeStore] Node updated: node-44, type: content
[SharedNodeStore] Node updated: node-45, type: content
[SharedNodeStore] Node updated: node-46, type: content
[SharedNodeStore] Node updated: node-47, type: content
[SharedNodeStore] Node updated: node-48, type: content
[SharedNodeStore] Node updated: node-49, type: content
[SharedNodeStore] Node updated: node-50, type: content
[SharedNodeStore] Node updated: node-51, type: content
[SharedNodeStore] Node updated: node-52, type: content
[SharedNodeStore] Node updated: node-53, type: content
[SharedNodeStore] Node updated: node-54, type: content
[SharedNodeStore] Node updated: node-55, type: content
[SharedNodeStore] Node updated: node-56, type: content
[SharedNodeStore] Node updated: node-57, type: content
[SharedNodeStore] Node updated: node-58, type: content
[SharedNodeStore] Node updated: node-59, type: content
[SharedNodeStore] Node updated: node-60, type: content
[SharedNodeStore] Node updated: node-61, type: content
[SharedNodeStore] Node updated: node-62, type: content
[SharedNodeStore] Node updated: node-63, type: content
[SharedNodeStore] Node updated: node-64, type: content
[SharedNodeStore] Node updated: node-65, type: content
[SharedNodeStore] Node updated: node-66, type: content
[SharedNodeStore] Node updated: node-67, type: content
[SharedNodeStore] Node updated: node-68, type: content
[SharedNodeStore] Node updated: node-69, type: content
[SharedNodeStore] Node updated: node-70, type: content
[SharedNodeStore] Node updated: node-71, type: content
[SharedNodeStore] Node updated: node-72, type: content
[SharedNodeStore] Node updated: node-73, type: content
[SharedNodeStore] Node updated: node-74, type: content
[SharedNodeStore] Node updated: node-75, type: content
[SharedNodeStore] Node updated: node-76, type: content
[SharedNodeStore] Node updated: node-77, type: content
[SharedNodeStore] Node updated: node-78, type: content
[SharedNodeStore] Node updated: node-79, type: content
[SharedNodeStore] Node updated: node-80, type: content
[SharedNodeStore] Node updated: node-81, type: content
[SharedNodeStore] Node updated: node-82, type: content
[SharedNodeStore] Node updated: node-83, type: content
[SharedNodeStore] Node updated: node-84, type: content
[SharedNodeStore] Node updated: node-85, type: content
[SharedNodeStore] Node updated: node-86, type: content
[SharedNodeStore] Node updated: node-87, type: content
[SharedNodeStore] Node updated: node-88, type: content
[SharedNodeStore] Node updated: node-89, type: content
[SharedNodeStore] Node updated: node-90, type: content
[SharedNodeStore] Node updated: node-91, type: content
[SharedNodeStore] Node updated: node-92, type: content
[SharedNodeStore] Node updated: node-93, type: content
[SharedNodeStore] Node updated: node-94, type: content
[SharedNodeStore] Node updated: node-95, type: content
[SharedNodeStore] Node updated: node-96, type: content
[SharedNodeStore] Node updated: node-97, type: content
[SharedNodeStore] Node updated: node-98, type: content
[SharedNodeStore] Node updated: node-99, type: content

stdout | src/tests/services/mcp-integration.test.ts > Phase 3: MCP Integration (Simulated) > MCP Update Performance > should track metrics for MCP updates
[SharedNodeStore] Hierarchy change for node: metrics-node-0
[SharedNodeStore] Hierarchy change for node: metrics-node-1
[SharedNodeStore] Hierarchy change for node: metrics-node-2
[SharedNodeStore] Hierarchy change for node: metrics-node-3
[SharedNodeStore] Hierarchy change for node: metrics-node-4
[SharedNodeStore] Node updated: metrics-node-0, type: content
[SharedNodeStore] Node updated: metrics-node-1, type: content
[SharedNodeStore] Node updated: metrics-node-2, type: content
[SharedNodeStore] Node updated: metrics-node-3, type: content
[SharedNodeStore] Node updated: metrics-node-4, type: content

stdout | src/tests/services/mcp-integration.test.ts > Phase 3: MCP Integration (Simulated) > MCP Integration Readiness > should provide clear integration point for MCP server
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/mcp-integration.test.ts > Phase 3: MCP Integration (Simulated) > MCP Integration Readiness > should handle MCP server reconnection with batch updates
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content
[SharedNodeStore] Node updated: test-node-1, type: content
[SharedNodeStore] Node updated: test-node-1, type: content

 ✓ src/tests/services/mcp-integration.test.ts (11 tests) 2ms
stdout | src/tests/integration/atomic-move-operations.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/integration/atomic-move-operations.test.ts (25 tests) 2ms
stdout | src/tests/types/ordered-list-node.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/types/ordered-list-node.test.ts (25 tests) 1ms
stdout | src/tests/components/custom-entity-node.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/components/custom-entity-node.test.ts (25 tests) 6ms
stdout | src/tests/services/keyboard-command-registry.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/services/keyboard-command-registry.test.ts > KeyboardCommandRegistry > Command Execution > should execute a registered command when canExecute returns true
[KeyboardCommandRegistry] Command executed: test-enter (Test Enter command)

 ✓ src/tests/services/keyboard-command-registry.test.ts (15 tests) 1ms
stdout | src/tests/services/keyboard-command-registry.test.ts > KeyboardCommandRegistry > Command Execution > should match commands with modifiers correctly
[KeyboardCommandRegistry] Command executed: test-ctrl-b (Test Ctrl+B command)

stdout | src/tests/services/keyboard-command-registry.test.ts > KeyboardCommandRegistry > Context Building > should build context with event and controller
[KeyboardCommandRegistry] Command executed: test-context (Test context building)

stdout | src/tests/services/keyboard-command-registry.test.ts > KeyboardCommandRegistry > Context Building > should provide default values for missing context
[KeyboardCommandRegistry] Command executed: test-defaults (Test default context)

stdout | src/tests/utils/database-write-queue.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stderr | src/tests/utils/database-write-queue.test.ts > databaseWriteQueue > edge cases > handles very long queue (stress test)
[DatabaseWriteQueue] High queue depth detected: 11 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 12 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 13 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 14 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 15 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 16 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 17 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 18 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 19 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 20 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 21 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 22 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 23 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 24 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 25 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 26 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 27 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 28 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 29 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 30 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 31 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 32 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 33 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 34 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 35 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 36 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 37 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 38 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 39 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 40 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 41 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 42 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 43 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 44 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 45 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 46 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 47 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 48 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 49 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 50 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 51 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 52 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 53 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 54 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 55 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 56 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 57 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 58 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 59 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 60 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 61 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 62 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 63 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 64 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 65 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 66 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 67 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 68 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 69 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 70 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 71 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 72 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 73 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 74 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 75 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 76 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 77 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 78 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 79 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 80 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 81 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 82 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 83 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 84 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 85 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 86 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 87 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 88 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 89 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 90 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 91 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 92 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 93 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 94 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 95 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 96 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 97 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 98 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 99 (threshold: 10)
[DatabaseWriteQueue] High queue depth detected: 100 (threshold: 10)

 ✓ src/tests/utils/database-write-queue.test.ts (19 tests) 380ms
stdout | src/tests/services/node-type-conflict-detection.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > NodeType Conversion Bypass > should bypass conflict detection for nodeType conversions
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Node updated: test-node-1, type: content
[SharedNodeStore] Node updated: test-node-1, type: content

stdout | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > NodeType Conversion Bypass > should bypass conflict detection for header → text conversion
[SharedNodeStore] Hierarchy change for node: test-node-2
[SharedNodeStore] Node updated: test-node-2, type: content
[SharedNodeStore] Node updated: test-node-2, type: content

stdout | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > NodeType Conversion Bypass > should handle multiple rapid conversions without conflicts
[SharedNodeStore] Hierarchy change for node: test-node-3
[SharedNodeStore] Node updated: test-node-3, type: content

stdout | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > NodeType Conversion Bypass > should handle multiple rapid conversions without conflicts
[SharedNodeStore] Node updated: test-node-3, type: content

stdout | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > NodeType Conversion Bypass > should handle multiple rapid conversions without conflicts
[SharedNodeStore] Conflict resolved for node: test-node-3, strategy: last-write-wins

stdout | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > Regular Conflict Detection > should still detect conflicts for regular concurrent edits
[SharedNodeStore] Hierarchy change for node: test-node-4
[SharedNodeStore] Node updated: test-node-4, type: content
[SharedNodeStore] Conflict resolved for node: test-node-4, strategy: last-write-wins

stdout | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > Regular Conflict Detection > should detect conflicts for concurrent property changes
[SharedNodeStore] Hierarchy change for node: test-node-5
[SharedNodeStore] Node updated: test-node-5, type: content
[SharedNodeStore] Conflict resolved for node: test-node-5, strategy: last-write-wins

stdout | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > Edge Cases > should handle nodeType conversion with concurrent content edit
[SharedNodeStore] Hierarchy change for node: test-node-6
[SharedNodeStore] Node updated: test-node-6, type: content
[SharedNodeStore] Conflict resolved for node: test-node-6, strategy: last-write-wins

stderr | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > Edge Cases > should handle nodeType conversion with concurrent content edit
[SharedNodeStore] Auto-committing batch after inactivity timeout {
  batchId: 'batch-quote-node-1-0',
  nodeId: 'quote-node-1',
  timeoutMs: 5000,
  age: 5000
}
[SharedNodeStore] Batch commit aborted - node not found { nodeId: 'quote-node-1', batchId: 'batch-quote-node-1-0' }

stdout | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > Edge Cases > should handle alternating text ↔ header conversions
[SharedNodeStore] Hierarchy change for node: test-node-7
[SharedNodeStore] Node updated: test-node-7, type: content
[SharedNodeStore] Node updated: test-node-7, type: content
[SharedNodeStore] Node updated: test-node-7, type: content

stdout | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > Edge Cases > should handle nodeType conversion with no content change
[SharedNodeStore] Hierarchy change for node: test-node-8
[SharedNodeStore] Node updated: test-node-8, type: content

stdout | src/tests/services/node-type-conflict-detection.test.ts > NodeType Conflict Detection > Performance Under Load > should handle rapid nodeType conversions efficiently
[SharedNodeStore] Hierarchy change for node: test-node-0
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Hierarchy change for node: test-node-2
[SharedNodeStore] Hierarchy change for node: test-node-3
[SharedNodeStore] Hierarchy change for node: test-node-4
[SharedNodeStore] Hierarchy change for node: test-node-5
[SharedNodeStore] Hierarchy change for node: test-node-6
[SharedNodeStore] Hierarchy change for node: test-node-7
[SharedNodeStore] Hierarchy change for node: test-node-8
[SharedNodeStore] Hierarchy change for node: test-node-9
[SharedNodeStore] Hierarchy change for node: test-node-10
[SharedNodeStore] Hierarchy change for node: test-node-11
[SharedNodeStore] Hierarchy change for node: test-node-12
[SharedNodeStore] Hierarchy change for node: test-node-13
[SharedNodeStore] Hierarchy change for node: test-node-14
[SharedNodeStore] Hierarchy change for node: test-node-15
[SharedNodeStore] Hierarchy change for node: test-node-16
[SharedNodeStore] Hierarchy change for node: test-node-17
[SharedNodeStore] Hierarchy change for node: test-node-18
[SharedNodeStore] Hierarchy change for node: test-node-19
[SharedNodeStore] Node updated: test-node-0, type: content
[SharedNodeStore] Node updated: test-node-1, type: content
[SharedNodeStore] Node updated: test-node-2, type: content
[SharedNodeStore] Node updated: test-node-3, type: content
[SharedNodeStore] Node updated: test-node-4, type: content
[SharedNodeStore] Node updated: test-node-5, type: content
[SharedNodeStore] Node updated: test-node-6, type: content
[SharedNodeStore] Node updated: test-node-7, type: content
[SharedNodeStore] Node updated: test-node-8, type: content
[SharedNodeStore] Node updated: test-node-9, type: content
[SharedNodeStore] Node updated: test-node-10, type: content
[SharedNodeStore] Node updated: test-node-11, type: content
[SharedNodeStore] Node updated: test-node-12, type: content
[SharedNodeStore] Node updated: test-node-13, type: content
[SharedNodeStore] Node updated: test-node-14, type: content
[SharedNodeStore] Node updated: test-node-15, type: content
[SharedNodeStore] Node updated: test-node-16, type: content
[SharedNodeStore] Node updated: test-node-17, type: content
[SharedNodeStore] Node updated: test-node-18, type: content
[SharedNodeStore] Node updated: test-node-19, type: content

 ✓ src/tests/services/node-type-conflict-detection.test.ts (9 tests) 887ms
stdout | src/tests/utils/marked-config.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/utils/marked-config.test.ts (20 tests) 18ms
stdout | src/tests/components/click-to-cursor.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/components/click-to-cursor.test.ts (17 tests) 6ms
stdout | src/tests/patterns/markdown-context.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/patterns/markdown-context.test.ts (37 tests) 1ms
stdout | src/tests/stores/scroll-state.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/stores/scroll-state.test.ts (22 tests) 1ms
stdout | src/tests/patterns/splitter/prefix-inheritance.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/patterns/splitter/prefix-inheritance.test.ts (19 tests) 1ms
stdout | src/tests/integration/multi-pane-keyboard.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/integration/multi-pane-keyboard.test.ts > Multi-Pane Keyboard Coordination > should only execute keyboard shortcuts in active pane
[KeyboardCommandRegistry] Command executed: format-text-bold (Toggle bold formatting)

stdout | src/tests/integration/multi-pane-keyboard.test.ts > Multi-Pane Keyboard Coordination > should execute commands when pane becomes active
[KeyboardCommandRegistry] Command executed: format-text-bold (Toggle bold formatting)
[KeyboardCommandRegistry] Command executed: format-text-bold (Toggle bold formatting)

stdout | src/tests/integration/multi-pane-keyboard.test.ts > Multi-Pane Keyboard Coordination > should not execute in any pane if activePaneId is missing from metadata
[KeyboardCommandRegistry] Command executed: format-text-bold (Toggle bold formatting)

stdout | src/tests/integration/multi-pane-keyboard.test.ts > Multi-Pane Keyboard Coordination > should handle multiple panes with same command
[KeyboardCommandRegistry] Command executed: format-text-bold (Toggle bold formatting)

stdout | src/tests/integration/multi-pane-keyboard.test.ts > Multi-Pane Keyboard Coordination > should verify FormatTextCommand works with pane coordination
[KeyboardCommandRegistry] Command executed: format-text-bold (Toggle bold formatting)

 ✓ src/tests/integration/multi-pane-keyboard.test.ts (5 tests) 3ms
stdout | src/tests/services/node-expansion-coordinator.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Viewer Registration > should register a viewer successfully
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Viewer Registration > should unregister a viewer successfully
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Viewer Registration > should handle multiple viewer registrations
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Expansion State Extraction > should extract expanded node IDs from a viewer
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[SharedNodeStore] Hierarchy change for node: node-3

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Expansion State Extraction > should return empty array for unregistered viewer
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Expansion State Extraction > should return empty array when no nodes are expanded
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[SharedNodeStore] Hierarchy change for node: node-1

 ✓ src/tests/services/node-expansion-coordinator.test.ts (16 tests) 2ms
stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Deferred Restoration > should schedule restoration for unregistered viewer
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[NodeExpansionCoordinator] Scheduling 2 expansions for viewer: test-viewer-1

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Deferred Restoration > should apply pending restorations when viewer registers
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[NodeExpansionCoordinator] Scheduling 2 expansions for viewer: test-viewer-1
[NodeExpansionCoordinator] Restoring 2 expansions for viewer: test-viewer-1
[NodeExpansionCoordinator] Restored expansions for viewer test-viewer-1: 2 applied, 0 skipped (missing nodes)

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Deferred Restoration > should clear pending restorations after registration
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[SharedNodeStore] Hierarchy change for node: node-1
[NodeExpansionCoordinator] Scheduling 1 expansions for viewer: test-viewer-1
[NodeExpansionCoordinator] Restoring 1 expansions for viewer: test-viewer-1
[NodeExpansionCoordinator] Restored expansions for viewer test-viewer-1: 0 applied, 0 skipped (missing nodes)

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Restoration Behavior > should restore expansion states for existing nodes
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[SharedNodeStore] Hierarchy change for node: node-1
[SharedNodeStore] Hierarchy change for node: node-2
[NodeExpansionCoordinator] Restored expansions for viewer test-viewer-1: 1 applied, 0 skipped (missing nodes)

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Restoration Behavior > should skip restoration for non-existent nodes
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[SharedNodeStore] Hierarchy change for node: node-1
[NodeExpansionCoordinator] Restored expansions for viewer test-viewer-1: 1 applied, 1 skipped (missing nodes)

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Restoration Behavior > should handle restoration for unregistered viewer by queueing
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[NodeExpansionCoordinator] Viewer not yet registered, queueing 2 expansions: test-viewer-1

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Edge Cases > should handle empty expansion state list
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[SharedNodeStore] Hierarchy change for node: node-1

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Edge Cases > should handle registering the same viewer twice
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Edge Cases > should handle unregistering a non-existent viewer
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations

stdout | src/tests/services/node-expansion-coordinator.test.ts > NodeExpansionCoordinator > Edge Cases > should clear all state when clear() is called
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations
[NodeExpansionCoordinator] Scheduling 1 expansions for viewer: viewer-2
[NodeExpansionCoordinator] Clearing all viewer registrations and pending restorations

stdout | src/tests/commands/keyboard/create-node.command.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/commands/keyboard/create-node.command.test.ts (14 tests) 1ms
stdout | src/tests/components/textarea-bidirectional-conversion.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/components/textarea-bidirectional-conversion.test.ts (9 tests) 154ms
stdout | src/tests/services/navigation-service.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Single pane behavior > creates second pane when only 1 exists
[SharedNodeStore] Hierarchy change for node: test-node-1
[NavigationService] Created second pane: pane-2

stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Single pane behavior > opens tab in new pane
[SharedNodeStore] Hierarchy change for node: test-node-1
[NavigationService] Created second pane: pane-2

 ✓ src/tests/services/navigation-service.test.ts (12 tests) 1ms
stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Single pane behavior > sets new pane as active
[SharedNodeStore] Hierarchy change for node: test-node-1
[NavigationService] Created second pane: pane-2

stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Single pane behavior > handles date nodes correctly
[SharedNodeStore] Hierarchy change for node: test-node-1
[SharedNodeStore] Hierarchy change for node: 2025-12-25
[NavigationService] Created second pane: pane-2

stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Two pane behavior > opens in other pane when 2 panes exist
[SharedNodeStore] Hierarchy change for node: test-node-1
[NavigationService] Created second pane: pane-2
[SharedNodeStore] Hierarchy change for node: test-node-2
[NavigationService] Opening in other pane: pane-2

stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Two pane behavior > switches focus to other pane
[SharedNodeStore] Hierarchy change for node: test-node-1
[NavigationService] Created second pane: pane-2
[SharedNodeStore] Hierarchy change for node: test-node-2
[NavigationService] Opening in other pane: pane-2

stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Two pane behavior > prevents creating more than 2 panes
[SharedNodeStore] Hierarchy change for node: test-node-1
[NavigationService] Created second pane: pane-2
[SharedNodeStore] Hierarchy change for node: test-node-2
[NavigationService] Opening in other pane: pane-2

stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Error handling > handles non-existent node gracefully
[SharedNodeStore] Hierarchy change for node: test-node-1
[NavigationService] Node non-existent-node-uuid not in store, fetching from backend...

stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Error handling > handles invalid UUID format gracefully
[SharedNodeStore] Hierarchy change for node: test-node-1
[NavigationService] Node invalid-uuid not in store, fetching from backend...

stderr | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Error handling > handles invalid UUID format gracefully
[NavigationService] Node invalid-uuid not found in backend

stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Tab properties > creates closeable tabs
[SharedNodeStore] Hierarchy change for node: test-node-1
[NavigationService] Created second pane: pane-2

stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Tab properties > generates correct tab titles
[SharedNodeStore] Hierarchy change for node: test-node-1
[NavigationService] Created second pane: pane-2

stdout | src/tests/services/navigation-service.test.ts > NavigationService - navigateToNodeInOtherPane > Tab properties > sets correct tab type
[SharedNodeStore] Hierarchy change for node: test-node-1
[NavigationService] Created second pane: pane-2

stdout | src/tests/services/header-inheritance.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/services/header-inheritance.test.ts > Header Syntax Inheritance Fix > Header Syntax Inheritance on Node Creation > should inherit header syntax when creating empty node after header node
[SharedNodeStore] Hierarchy change for node: root-node
[SharedNodeStore] Hierarchy change for node: 4090658f-d5b7-4796-b65b-982a1c8620f3
[SharedNodeStore] Hierarchy change for node: 054f1b56-81a8-4166-936a-00a0512aa377

stdout | src/tests/services/header-inheritance.test.ts > Header Syntax Inheritance Fix > Header Syntax Inheritance on Node Creation > should inherit header syntax when creating node with content after header node
[SharedNodeStore] Hierarchy change for node: root-node
[SharedNodeStore] Hierarchy change for node: 4e87c6ac-3aec-4f41-98a6-45fa0c832851
[SharedNodeStore] Hierarchy change for node: 08707037-979c-4846-861c-45f343d96ddb

stdout | src/tests/services/header-inheritance.test.ts > Header Syntax Inheritance Fix > Header Syntax Inheritance on Node Creation > should not duplicate header syntax if content already has it
[SharedNodeStore] Hierarchy change for node: root-node
[SharedNodeStore] Hierarchy change for node: 02e3c6c4-ba76-413b-b962-6bbce0c6e4cc
[SharedNodeStore] Hierarchy change for node: 398b00a1-f71d-4c40-9054-c23d7de140e3

stdout | src/tests/services/header-inheritance.test.ts > Header Syntax Inheritance Fix > Header Syntax Inheritance on Node Creation > should handle different header levels correctly
[SharedNodeStore] Hierarchy change for node: root-node
[SharedNodeStore] Hierarchy change for node: 48798cfe-60af-41f1-93cc-504d60179dac
[SharedNodeStore] Hierarchy change for node: 9418018c-ce4d-4458-b239-7218e625709b
[SharedNodeStore] Node deleted: 9418018c-ce4d-4458-b239-7218e625709b
[SharedNodeStore] Node deleted: 48798cfe-60af-41f1-93cc-504d60179dac
[SharedNodeStore] Hierarchy change for node: 788440d4-d779-41ed-abd3-64d74a57a09e
[SharedNodeStore] Hierarchy change for node: 83c0be98-17ec-4c51-a6db-fb0942455465
[SharedNodeStore] Node deleted: 83c0be98-17ec-4c51-a6db-fb0942455465
[SharedNodeStore] Node deleted: 788440d4-d779-41ed-abd3-64d74a57a09e
[SharedNodeStore] Hierarchy change for node: da03187a-8069-4c66-b9ce-ca0bef55694c
[SharedNodeStore] Hierarchy change for node: 41857227-abf2-4362-9760-ecda4722c39b
[SharedNodeStore] Node deleted: 41857227-abf2-4362-9760-ecda4722c39b
[SharedNodeStore] Node deleted: da03187a-8069-4c66-b9ce-ca0bef55694c
[SharedNodeStore] Hierarchy change for node: a3ab30c3-c7a8-4515-a0d9-def0826f0ec7
[SharedNodeStore] Hierarchy change for node: 1b323fc1-ba5b-4198-a628-f5e5af613ae3
[SharedNodeStore] Node deleted: 1b323fc1-ba5b-4198-a628-f5e5af613ae3
[SharedNodeStore] Node deleted: a3ab30c3-c7a8-4515-a0d9-def0826f0ec7
[SharedNodeStore] Hierarchy change for node: aab4d3e4-d616-43a1-af5e-0cc9bfb959de
[SharedNodeStore] Hierarchy change for node: 4a38a7bf-0e93-46dc-9278-ea2782799870
[SharedNodeStore] Node deleted: 4a38a7bf-0e93-46dc-9278-ea2782799870
[SharedNodeStore] Node deleted: aab4d3e4-d616-43a1-af5e-0cc9bfb959de
[SharedNodeStore] Hierarchy change for node: 4feb6d94-f5c9-43e7-a450-7fb5618c477e
[SharedNodeStore] Hierarchy change for node: 34b619a0-4f1f-466d-94a1-bf5a27832073
[SharedNodeStore] Node deleted: 34b619a0-4f1f-466d-94a1-bf5a27832073
[SharedNodeStore] Node deleted: 4feb6d94-f5c9-43e7-a450-7fb5618c477e

stdout | src/tests/services/header-inheritance.test.ts > Header Syntax Inheritance Fix > Header Syntax Inheritance on Node Creation > should not inherit header syntax from non-header nodes
[SharedNodeStore] Hierarchy change for node: root-node
[SharedNodeStore] Hierarchy change for node: 9215d145-cf0d-484f-b4ae-8d0192d34b8f
[SharedNodeStore] Hierarchy change for node: 2abc75a3-7841-47ac-aaaa-e2e6e55f6cb3

stdout | src/tests/services/header-inheritance.test.ts > Header Syntax Inheritance Fix > Header Syntax Inheritance on Node Creation > should work correctly with insertAtBeginning parameter
[SharedNodeStore] Hierarchy change for node: root-node
[SharedNodeStore] Hierarchy change for node: 0587ea18-5e0a-41cb-99c8-cad10610c6b6
[SharedNodeStore] Hierarchy change for node: 8517ee7b-8fb1-43a0-b5b3-e18c8712cab7

 ✓ src/tests/services/header-inheritance.test.ts (8 tests) 3ms
stdout | src/tests/services/header-inheritance.test.ts > Header Syntax Inheritance Fix > Header Syntax Inheritance on Node Creation > should handle placeholder node creation correctly
[SharedNodeStore] Hierarchy change for node: root-node
[SharedNodeStore] Hierarchy change for node: c401945e-ec35-4010-99b9-28b290f95cf0
[SharedNodeStore] Hierarchy change for node: 2711b97d-28c2-48af-8181-c0ac02eba1a0

stdout | src/tests/services/header-inheritance.test.ts > Header Syntax Inheritance Fix > Enter Key Simulation Integration > should simulate the Enter key behavior correctly
[SharedNodeStore] Hierarchy change for node: root-node
[SharedNodeStore] Hierarchy change for node: 6f958e00-cb52-4871-b007-39d75a147ae3
[SharedNodeStore] Node updated: 6f958e00-cb52-4871-b007-39d75a147ae3, type: content
[SharedNodeStore] Hierarchy change for node: 4312f482-f36a-40be-a4af-70e2788a30d1

stdout | src/tests/integration/textnode-contentprocessor.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/integration/textnode-contentprocessor.test.ts (11 tests) 2ms
stdout | src/tests/types/code-block-node.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/types/code-block-node.test.ts (18 tests) 1ms
stdout | src/tests/types/quote-block-node.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/types/quote-block-node.test.ts (17 tests) 1ms
stdout | src/tests/commands/keyboard/merge-nodes.command.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/commands/keyboard/merge-nodes.command.test.ts (14 tests) 1ms
stdout | src/tests/services/focus-manager-cursor-positioning.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/services/focus-manager-cursor-positioning.test.ts (14 tests) 2ms
stdout | src/tests/services/placeholder-detection.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/services/placeholder-detection.test.ts (20 tests) 1ms
stdout | src/tests/components/ordered-list-node.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/components/ordered-list-node.test.ts (19 tests) 1ms
stdout | src/tests/services/slash-command-service-registry-integration.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Basic Functionality (Registry Enabled) > should return registry commands when registry integration enabled
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Basic Functionality (Registry Enabled) > should filter registry commands correctly
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Basic Functionality (Registry Enabled) > should find registry commands by ID
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Registry Integration (Enabled) > should include registry commands when integration enabled
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Registry Integration (Enabled) > should avoid duplicate commands when merging registry
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Registry Integration (Enabled) > should filter commands from both sources
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Registry Integration (Enabled) > should find commands from both hardcoded and registry sources
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Command Execution > should execute registry commands correctly
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Command Execution > should execute registry commands when available
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Command Execution > should handle header commands with proper levels
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Registry State > should properly check registry state
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Registry State > should provide registry commands
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Backwards Compatibility > should maintain registry-based behavior with all core commands
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

stdout | src/tests/services/slash-command-service-registry-integration.test.ts > SlashCommandService Registry Integration > Backwards Compatibility > should find all hardcoded commands correctly
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}

 ✓ src/tests/services/slash-command-service-registry-integration.test.ts (14 tests) 2ms
stdout | src/tests/components/quote-block-node.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/components/quote-block-node.test.ts (21 tests) 1ms
stdout | src/tests/utils/text-formatting.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/utils/text-formatting.test.ts (24 tests) 1ms
stdout | src/tests/integration/tauri-commands.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/integration/tauri-commands.test.ts (14 tests) 4ms
stdout | src/tests/commands/keyboard/navigate-down.command.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/commands/keyboard/navigate-down.command.test.ts (12 tests) 1ms
stdout | src/tests/integration/split-pane-isolation.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/integration/split-pane-isolation.test.ts > Split-Pane Content Isolation > should isolate children between two viewers with different parents
[SharedNodeStore] Hierarchy change for node: parent-a
[SharedNodeStore] Hierarchy change for node: parent-b
[SharedNodeStore] Hierarchy change for node: child-a1
[SharedNodeStore] Hierarchy change for node: child-b1

stdout | src/tests/integration/split-pane-isolation.test.ts > Split-Pane Content Isolation > should allow two viewers to query same parent without conflict
[SharedNodeStore] Hierarchy change for node: shared-parent
[SharedNodeStore] Hierarchy change for node: child-1

stdout | src/tests/integration/split-pane-isolation.test.ts > Split-Pane Content Isolation > should handle null parentId (root nodes)
[SharedNodeStore] Hierarchy change for node: root-1

 ✓ src/tests/integration/split-pane-isolation.test.ts (4 tests) 1ms
stdout | src/tests/actions/position-cursor.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/actions/position-cursor.test.ts (9 tests) 2ms
stdout | src/tests/plugins/code-block-plugin.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/plugins/code-block-plugin.test.ts (17 tests) 1ms
stdout | src/tests/utils/should-use-database.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/utils/should-use-database.test.ts (19 tests) 1ms
stdout | src/tests/utils/header-cursor-split.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

stdout | src/tests/utils/header-cursor-split.test.ts > Header Cursor Position Splitting > Fixed Behavior (now working correctly) > should handle cursor before header syntax |# Header
Before header - result: {
  beforeContent: '# ',
  afterContent: '# Header text',
  newNodeCursorPosition: 2
}

stdout | src/tests/utils/header-cursor-split.test.ts > Header Cursor Position Splitting > Fixed Behavior (now working correctly) > should handle cursor within header syntax #| Header
Within header syntax - result: {
  beforeContent: '# ',
  afterContent: '# Header text',
  newNodeCursorPosition: 2
}

stdout | src/tests/utils/header-cursor-split.test.ts > Header Cursor Position Splitting > Fixed Behavior (now working correctly) > should handle cursor after header syntax # | Header
After header syntax - result: {
  beforeContent: '# ',
  afterContent: '# Header text',
  newNodeCursorPosition: 2
}

stdout | src/tests/utils/header-cursor-split.test.ts > Header Cursor Position Splitting > Fixed Behavior (now working correctly) > should handle various header levels
Level 1, pos 0: {
  beforeContent: '# ',
  afterContent: '# Header text',
  newNodeCursorPosition: 2
}
Level 1, pos 1: {
  beforeContent: '# ',
  afterContent: '# Header text',
  newNodeCursorPosition: 2
}
Level 2, pos 0: {
  beforeContent: '## ',
  afterContent: '## Header text',
  newNodeCursorPosition: 3
}
Level 2, pos 1: {
  beforeContent: '## ',
  afterContent: '## Header text',
  newNodeCursorPosition: 3
}
Level 2, pos 2: {
  beforeContent: '## ',
  afterContent: '## Header text',
  newNodeCursorPosition: 3
}
Level 3, pos 0: {
  beforeContent: '### ',
  afterContent: '### Header text',
  newNodeCursorPosition: 4
}
Level 3, pos 1: {
  beforeContent: '### ',
  afterContent: '### Header text',
  newNodeCursorPosition: 4
}
Level 3, pos 2: {
  beforeContent: '### ',
  afterContent: '### Header text',
  newNodeCursorPosition: 4
}
Level 3, pos 3: {
  beforeContent: '### ',
  afterContent: '### Header text',
  newNodeCursorPosition: 4
}
Level 4, pos 0: {
  beforeContent: '#### ',
  afterContent: '#### Header text',
  newNodeCursorPosition: 5
}
Level 4, pos 1: {
  beforeContent: '#### ',
  afterContent: '#### Header text',
  newNodeCursorPosition: 5
}
Level 4, pos 2: {
  beforeContent: '#### ',
  afterContent: '#### Header text',
  newNodeCursorPosition: 5
}
Level 4, pos 3: {
  beforeContent: '#### ',
  afterContent: '#### Header text',
  newNodeCursorPosition: 5
}
Level 4, pos 4: {
  beforeContent: '#### ',
  afterContent: '#### Header text',
  newNodeCursorPosition: 5
}
Level 5, pos 0: {
  beforeContent: '##### ',
  afterContent: '##### Header text',
  newNodeCursorPosition: 6
}
Level 5, pos 1: {
  beforeContent: '##### ',
  afterContent: '##### Header text',
  newNodeCursorPosition: 6
}
Level 5, pos 2: {
  beforeContent: '##### ',
  afterContent: '##### Header text',
  newNodeCursorPosition: 6
}
Level 5, pos 3: {
  beforeContent: '##### ',
  afterContent: '##### Header text',
  newNodeCursorPosition: 6
}
Level 5, pos 4: {
  beforeContent: '##### ',
  afterContent: '##### Header text',
  newNodeCursorPosition: 6
}
Level 5, pos 5: {
  beforeContent: '##### ',
  afterContent: '##### Header text',
  newNodeCursorPosition: 6
}
Level 6, pos 0: {
  beforeContent: '###### ',
  afterContent: '###### Header text',
  newNodeCursorPosition: 7
}
Level 6, pos 1: {
  beforeContent: '###### ',
  afterContent: '###### Header text',
  newNodeCursorPosition: 7
}
Level 6, pos 2: {
  beforeContent: '###### ',
  afterContent: '###### Header text',
  newNodeCursorPosition: 7
}
Level 6, pos 3: {
  beforeContent: '###### ',
  afterContent: '###### Header text',
  newNodeCursorPosition: 7
}
Level 6, pos 4: {
  beforeContent: '###### ',
  afterContent: '###### Header text',
  newNodeCursorPosition: 7
}
Level 6, pos 5: {
  beforeContent: '###### ',
  afterContent: '###### Header text',
  newNodeCursorPosition: 7
}
Level 6, pos 6: {
  beforeContent: '###### ',
  afterContent: '###### Header text',
  newNodeCursorPosition: 7
}

 ✓ src/tests/utils/header-cursor-split.test.ts (6 tests) 1ms
stdout | src/tests/commands/keyboard/format-text.command.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/commands/keyboard/format-text.command.test.ts (12 tests) 1ms
stdout | src/tests/components/merge-prevention.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/components/merge-prevention.test.ts (12 tests) 1ms
stdout | src/tests/plugins/quote-block-plugin.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/plugins/quote-block-plugin.test.ts (10 tests) 0ms
stdout | src/tests/commands/keyboard/outdent-node.command.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/commands/keyboard/outdent-node.command.test.ts (6 tests) 0ms
stdout | src/tests/commands/keyboard/indent-node.command.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/commands/keyboard/indent-node.command.test.ts (6 tests) 1ms
stdout | src/tests/utils/view-edit-mapper.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/utils/view-edit-mapper.test.ts (10 tests) 0ms
stdout | src/tests/example/basic-functions.test.ts
Plugin registered: Text Node (text)
Plugin registered: Header Node (header)
Plugin registered: Task Node (task)
Plugin registered: AI Chat Node (ai-chat)
Plugin registered: Date Node (date)
Plugin registered: Code Block Node (code-block)
Plugin registered: Quote Block Node (quote-block)
Plugin registered: Ordered List Node (ordered-list)
Plugin registered: User Reference (user)
Plugin registered: Document Reference (document)
[UnifiedPluginRegistry] Core plugins registered: { plugins: 10, slashCommands: 9, viewers: 1, references: 10 }
[PatternRegistry] Patterns registered: {
  patterns: 5,
  registeredNodeTypes: [ 'header', 'task', 'code-block', 'quote-block', 'ordered-list' ]
}
✅ Core plugins registered in test setup (browser context)

 ✓ src/tests/example/basic-functions.test.ts (6 tests) 0ms

 Test Files  71 passed (71)
      Tests  1427 passed (1427)
   Start at  10:55:02
   Duration  6.98s (transform 867ms, setup 1.30s, collect 826ms, tests 4.37s, environment 177ms, prepare 42ms)

$ cargo test --lib -p nodespace-core -- --test-threads=2
   Compiling nodespace-core v0.1.0 (/Users/malibio/nodespace/nodespace-core-dev3/packages/core)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 18.48s
     Running unittests src/lib.rs (target/debug/deps/nodespace_core-22698ae6badcd87c)

running 553 tests
test behaviors::tests::test_behavior_trait_object ... ok
test behaviors::tests::test_code_block_uses_default_embeddability ... ok
test behaviors::tests::test_date_node_behavior_capabilities ... ok
test behaviors::tests::test_code_block_behavior_validation ... ok
test behaviors::tests::test_date_node_default_metadata ... ok
test behaviors::tests::test_date_node_not_embeddable ... ok
test behaviors::tests::test_default_process_content ... ok
test behaviors::tests::test_header_node_behavior_validation ... ok
test behaviors::tests::test_header_node_embeddable_content ... ok
test behaviors::tests::test_ordered_list_behavior_validation ... ok
test behaviors::tests::test_ordered_list_uses_default_embeddability ... ok
test behaviors::tests::test_processing_error_types ... ok
test behaviors::tests::test_quote_block_behavior_validation ... ok
test behaviors::tests::test_quote_block_uses_default_embeddability ... ok
test behaviors::tests::test_registry_embeddability_lookup ... ok
test behaviors::tests::test_registry_get_all_types ... ok
test behaviors::tests::test_registry_new ... ok
test behaviors::tests::test_registry_register_and_get ... ok
test behaviors::tests::test_registry_thread_safety ... ok
test behaviors::tests::test_registry_validate_node ... ok
test behaviors::tests::test_schema_node_embeddability ... ok
test behaviors::tests::test_task_node_behavior_capabilities ... ok
test behaviors::tests::test_task_node_behavior_validation ... ok
test behaviors::tests::test_task_node_default_metadata ... ok
test behaviors::tests::test_task_node_not_embeddable ... ok
test behaviors::tests::test_text_node_behavior_capabilities ... ok
test behaviors::tests::test_text_node_behavior_validation ... ok
test behaviors::tests::test_text_node_default_metadata ... ok
test behaviors::tests::test_text_node_embeddable_content ... ok
test behaviors::tests::test_text_node_empty_not_embeddable ... ok
test behaviors::tests::test_text_node_unicode_whitespace_validation ... ok
test behaviors::tests::test_type_conversion_preserves_properties ... ok
test db::fractional_ordering::tests::test_calculate_order_after_last ... ok
test db::fractional_ordering::tests::test_calculate_order_before_first ... ok
test db::fractional_ordering::tests::test_calculate_order_between ... ok
test db::fractional_ordering::tests::test_calculate_order_first_child ... ok
test db::fractional_ordering::tests::test_needs_rebalancing ... ok
test behaviors::tests::test_date_node_behavior_validation ... ok
test db::surreal_store::tests::test_create_and_get_node ... ok
test db::surreal_store::tests::test_create_child_node_atomic_rollback_on_failure ... ok
test db::surreal_store::tests::test_atomic_operations_performance ... ok
test db::surreal_store::tests::test_create_child_node_atomic_success ... ok
test db::surreal_store::tests::test_create_child_node_atomic_with_properties ... ok
test db::surreal_store::tests::test_delete_node_cascade_atomic_idempotent ... ok
test db::surreal_store::tests::test_delete_node ... ok
test db::surreal_store::tests::test_delete_node_cascade_atomic_with_task ... ok
test db::surreal_store::tests::test_delete_node_cascade_atomic_success ... ok
test db::surreal_store::tests::test_move_node_atomic_prevents_cycles ... ok
test db::surreal_store::tests::test_get_all_edges_bulk_load ... FAILED
test db::surreal_store::tests::test_move_node_atomic_to_root ... ok
test db::surreal_store::tests::test_move_node_atomic_success ... ok
test db::surreal_store::tests::test_search_empty_database ... ok
test db::surreal_store::tests::test_search_performance_10k_nodes ... ok
test db::surreal_store::tests::test_schema_operations ... ok
test db::surreal_store::tests::test_search_respects_limit ... ok
test db::surreal_store::tests::test_search_with_real_nlp_embeddings ... FAILED
test db::surreal_store::tests::test_search_with_similar_nodes ... FAILED
test db::surreal_store::tests::test_search_with_threshold_filter ... FAILED
test db::surreal_store::tests::test_switch_node_type_atomic_preserves_variants ... ok
test db::surreal_store::tests::test_switch_node_type_atomic_task_to_text ... ok
test db::surreal_store::tests::test_switch_node_type_atomic_text_to_task ... ok
test db::surreal_store::tests::test_update_node ... ok
test mcp::handlers::initialize::initialize_test::integration_tests::test_full_initialization_handshake ... ok
test mcp::handlers::initialize::initialize_test::integration_tests::test_initialize_idempotent ... ok
test mcp::handlers::initialize::initialize_test::integration_tests::test_initialize_then_wrong_version ... ok
test mcp::handlers::initialize::initialize_test::integration_tests::test_operation_rejected_before_initialization ... ok
test mcp::handlers::initialize::initialize_test::test_all_expected_tools_present ... FAILED
test mcp::handlers::initialize::initialize_test::test_all_schemas_have_required_fields ... ok
test mcp::handlers::initialize::initialize_test::test_create_node_schema_has_required_fields ... ok
test mcp::handlers::initialize::initialize_test::test_get_node_schema_structure ... ok
test mcp::handlers::initialize::initialize_test::test_initialize_empty_params ... ok
test mcp::handlers::initialize::initialize_test::test_initialize_missing_version ... ok
test mcp::handlers::initialize::initialize_test::test_initialize_success ... ok
test mcp::handlers::initialize::initialize_test::test_initialize_wrong_version ... ok
test mcp::handlers::initialize::initialize_test::test_markdown_import_schema_structure ... ok
test mcp::handlers::initialize::initialize_test::test_update_node_schema_structure ... ok
test mcp::handlers::markdown::markdown_test::tests::test_all_nodes_share_container ... ok
test mcp::handlers::markdown::markdown_test::tests::test_bullet_roundtrip ... FAILED
test mcp::handlers::markdown::markdown_test::tests::test_bullet_with_link ... ok
test db::surreal_store::tests::test_search_performance_1k_nodes ... ok
test mcp::handlers::markdown::markdown_test::tests::test_code_block_with_language ... ok
test mcp::handlers::markdown::markdown_test::tests::test_code_block_without_language ... ok
test mcp::handlers::markdown::markdown_test::tests::test_container_node_structure ... ok
test mcp::handlers::markdown::markdown_test::tests::test_complex_heading_transitions ... ok
test mcp::handlers::markdown::markdown_test::tests::test_content_preservation ... ok
test mcp::handlers::markdown::markdown_test::tests::test_empty_markdown ... ok
test mcp::handlers::markdown::markdown_test::tests::test_get_markdown_invalid_params ... ok
test mcp::handlers::markdown::markdown_test::tests::test_deep_heading_hierarchy ... ok
test mcp::handlers::markdown::markdown_test::tests::test_get_markdown_missing_node ... ok
test mcp::handlers::markdown::markdown_test::tests::test_get_markdown_max_depth ... FAILED
test mcp::handlers::markdown::markdown_test::tests::test_get_markdown_no_children ... ok
test mcp::handlers::markdown::markdown_test::tests::test_get_markdown_simple ... FAILED
test mcp::handlers::markdown::markdown_test::tests::test_get_markdown_preserves_hierarchy ... FAILED
test mcp::handlers::markdown::markdown_test::tests::test_get_markdown_with_code_blocks ... ok
test mcp::handlers::markdown::markdown_test::tests::test_heading_hierarchy ... ok
test mcp::handlers::markdown::markdown_test::tests::test_inline_code_in_text ... ok
test mcp::handlers::markdown::markdown_test::tests::test_input_size_validation ... ok
test mcp::handlers::markdown::markdown_test::tests::test_invalid_params ... ok
test mcp::handlers::markdown::markdown_test::tests::test_nested_lists ... ok
test mcp::handlers::markdown::markdown_test::tests::test_mixed_content ... ok
test mcp::handlers::markdown::markdown_test::tests::test_nodes_metadata_in_response ... ok
test mcp::handlers::markdown::markdown_test::tests::test_ordered_list_false_positive ... ok
test mcp::handlers::markdown::markdown_test::tests::test_roundtrip_import_export ... FAILED
test mcp::handlers::markdown::markdown_test::tests::test_sibling_ordering ... ok
test mcp::handlers::markdown::markdown_test::tests::test_same_level_headers_are_siblings ... ok
test mcp::handlers::markdown::markdown_test::tests::test_simple_markdown_with_headings ... ok
test mcp::handlers::markdown::markdown_test::tests::test_task_list_with_checked_items ... ok
test mcp::handlers::markdown::markdown_test::tests::test_update_root_from_markdown_backward_compat_container_id ... ok
test mcp::handlers::markdown::markdown_test::tests::test_update_root_from_markdown_basic ... ok
test mcp::handlers::markdown::markdown_test::tests::test_update_root_from_markdown_complex_structure ... FAILED
test mcp::handlers::markdown::markdown_test::tests::test_update_root_from_markdown_empty_markdown ... ok
test mcp::handlers::markdown::markdown_test::tests::test_update_root_from_markdown_exceeds_size_limit ... ok
test mcp::handlers::markdown::markdown_test::tests::test_update_root_from_markdown_missing_id ... ok
test mcp::handlers::natural_language_schema::tests::test_apply_constraints_enum_values ... ok
test mcp::handlers::natural_language_schema::tests::test_apply_constraints_required ... ok
test mcp::handlers::natural_language_schema::tests::test_extract_enum_values ... ok
test mcp::handlers::natural_language_schema::tests::test_extract_field_name_with_keyword ... ok
test mcp::handlers::natural_language_schema::tests::test_extract_field_name_with_parens ... ok
test mcp::handlers::natural_language_schema::tests::test_infer_boolean_type ... ok
test mcp::handlers::natural_language_schema::tests::test_infer_date_type ... ok
test mcp::handlers::natural_language_schema::tests::test_infer_enum_type ... ok
test mcp::handlers::natural_language_schema::tests::test_infer_number_type ... ok
test mcp::handlers::natural_language_schema::tests::test_integration_ambiguous_description ... ok
test mcp::handlers::natural_language_schema::tests::test_integration_edge_case_empty_enum_values ... ok
test mcp::handlers::natural_language_schema::tests::test_integration_full_schema_creation ... ok
test mcp::handlers::natural_language_schema::tests::test_integration_multiple_inferred_fields ... ok
test mcp::handlers::natural_language_schema::tests::test_integration_reserved_property_names ... ok
test mcp::handlers::natural_language_schema::tests::test_integration_schema_id_generation ... ok
test mcp::handlers::natural_language_schema::tests::test_is_field_required ... ok
test mcp::handlers::natural_language_schema::tests::test_normalize_and_namespace ... ok
test mcp::handlers::natural_language_schema::tests::test_normalize_empty_field_name ... ok
test mcp::handlers::natural_language_schema::tests::test_normalize_field_name ... ok
test mcp::handlers::natural_language_schema::tests::test_normalize_schema_id ... ok
test mcp::handlers::natural_language_schema::tests::test_parse_field_descriptions_simple ... ok
test mcp::handlers::natural_language_schema::tests::test_parse_field_descriptions_with_types ... ok
test mcp::handlers::natural_language_schema::tests::test_split_field_descriptions_and ... ok
test mcp::handlers::natural_language_schema::tests::test_split_field_descriptions_comma ... ok
test mcp::handlers::natural_language_schema::tests::test_split_field_descriptions_mixed ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::benchmark_get_nodes_batch ... ignored
test mcp::handlers::nodes::nodes_test::integration_tests::benchmark_update_nodes_batch ... ignored
test mcp::handlers::markdown::markdown_test::tests::test_update_root_from_markdown_nonexistent_root ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_get_child_at_index_out_of_bounds ... FAILED
test mcp::handlers::nodes::nodes_test::integration_tests::test_get_node_tree_max_depth_validation ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_get_children_ordered_with_multiple_insertions ... FAILED
test mcp::handlers::nodes::nodes_test::integration_tests::test_get_nodes_batch_empty_input ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_get_node_tree_with_max_depth_1 ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_get_nodes_batch_exceeds_limit ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_get_nodes_batch_success ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_get_nodes_batch_with_not_found ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_insert_child_at_index_with_date_auto_creation ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_insert_child_at_index_with_invalid_date_format ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_insert_child_at_index_with_non_date_invalid_parent ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_move_child_to_index_beyond_sibling_count ... FAILED
test mcp::handlers::nodes::nodes_test::integration_tests::test_update_nodes_batch_empty_input ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_update_nodes_batch_exceeds_limit ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_update_nodes_batch_partial_failure ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_update_nodes_batch_success ... ok
test mcp::handlers::nodes::nodes_test::integration_tests::test_update_nodes_batch_with_properties ... FAILED
test mcp::handlers::nodes::nodes_test::occ_tests::test_concurrent_update_version_conflict ... ok
test mcp::handlers::nodes::nodes_test::occ_tests::test_delete_with_version_check ... ok
test mcp::handlers::nodes::nodes_test::occ_tests::test_node_created_with_version_1 ... ok
test mcp::handlers::nodes::nodes_test::occ_tests::test_property_update_increments_version ... FAILED
test mcp::handlers::nodes::nodes_test::integration_tests::test_occ_performance_overhead ... ok
test mcp::handlers::nodes::nodes_test::occ_tests::test_rapid_sequential_updates ... ok
test mcp::handlers::nodes::nodes_test::occ_tests::test_update_without_version_parameter ... ok
test mcp::handlers::nodes::nodes_test::occ_tests::test_version_conflict_includes_current_node ... ok
test mcp::handlers::nodes::nodes_test::tests::test_create_node_params_parsing ... ok
test mcp::handlers::nodes::nodes_test::tests::test_create_node_params_with_parent ... ok
test mcp::handlers::nodes::nodes_test::tests::test_delete_node_params_parsing ... ok
test mcp::handlers::nodes::nodes_test::tests::test_get_node_params_parsing ... ok
test mcp::handlers::nodes::nodes_test::tests::test_invalid_params_error ... ok
test mcp::handlers::nodes::nodes_test::tests::test_mcp_error_creation ... ok
test mcp::handlers::nodes::nodes_test::tests::test_query_nodes_params_parsing ... ok
test mcp::handlers::nodes::nodes_test::tests::test_query_response_format ... ok
test mcp::handlers::nodes::nodes_test::tests::test_success_response_format ... ok
test mcp::handlers::nodes::nodes_test::tests::test_update_node_params_parsing ... ok
test mcp::handlers::nodes::nodes_test::tests::test_validation_error ... ok
test mcp::handlers::nodes::nodes_test::occ_tests::test_version_increments_on_update ... ok
test mcp::handlers::schema::tests::test_add_schema_field ... ok
test mcp::handlers::schema::tests::test_add_schema_field_without_namespace_rejected ... ok
test mcp::handlers::schema::tests::test_create_user_schema ... ok
test mcp::handlers::schema::tests::test_create_user_schema_duplicate_rejected ... ok
test mcp::handlers::schema::tests::test_create_user_schema_invalid_reference_rejected ... ok
test mcp::handlers::schema::tests::test_create_user_schema_with_reference ... FAILED
test mcp::handlers::schema::tests::test_get_schema_definition ... ok
test mcp::handlers::schema::tests::test_extend_schema_enum ... ok
test mcp::handlers::schema::tests::test_remove_core_enum_value_rejected ... ok
test mcp::handlers::schema::tests::test_remove_core_field_rejected ... ok
test mcp::handlers::schema::tests::test_remove_schema_enum_value ... ok
test mcp::handlers::search::search_tests::test_limit_boundary_values ... ok
test mcp::handlers::search::search_tests::test_search_defaults_match_schema ... ok
test mcp::handlers::search::search_tests::test_search_empty_query_validation ... ok
test mcp::handlers::search::search_tests::test_search_invalid_threshold_high_validation ... ok
test mcp::handlers::search::search_tests::test_search_invalid_threshold_low_validation ... ok
test mcp::handlers::search::search_tests::test_search_limit_exceeds_maximum_validation ... ok
test mcp::handlers::search::search_tests::test_search_parameter_combinations ... ok
test mcp::handlers::search::search_tests::test_search_response_structure ... ok
test mcp::handlers::search::search_tests::test_search_roots_basic_params ... ok
test mcp::handlers::search::search_tests::test_search_roots_custom_params ... ok
test mcp::handlers::search::search_tests::test_search_roots_defaults_applied ... ok
test mcp::handlers::search::search_tests::test_search_whitespace_query_validation ... ok
test mcp::handlers::search::search_tests::test_threshold_validation_boundary ... ok
test mcp::handlers::search::search_tests::test_threshold_validation_high ... ok
test mcp::handlers::search::search_tests::test_threshold_validation_low ... ok
test mcp::handlers::search::search_tests::test_threshold_validation_valid ... ok
test mcp::handlers::schema::tests::test_remove_schema_field ... ok
test mcp::handlers::tools::tools_test::async_integration_tests::test_tools_call_create_node_success ... ok
test mcp::handlers::tools::tools_test::async_integration_tests::test_tools_call_get_node_not_found_returns_error_response ... ok
test mcp::handlers::tools::tools_test::async_integration_tests::test_tools_call_missing_name_parameter ... ok
test mcp::handlers::tools::tools_test::async_integration_tests::test_tools_call_query_nodes_success ... ok
test mcp::handlers::tools::tools_test::async_integration_tests::test_tools_call_unknown_tool_returns_error ... ok
test mcp::handlers::tools::tools_test::test_tools_call_missing_arguments ... ok
test mcp::handlers::tools::tools_test::test_tools_call_missing_name ... ok
test mcp::handlers::tools::tools_test::test_tools_call_with_unknown_tool ... ok
test mcp::handlers::tools::tools_test::test_tools_list_returns_all_schemas ... FAILED
test mcp::handlers::tools::tools_test::test_tools_list_tool_schema_structure ... ok
test mcp::handlers::tools::tools_test::async_integration_tests::test_tools_call_with_missing_arguments_uses_default ... ok
test mcp::server::tests::test_http_callback_invoked ... ok
test mcp::server::tests::test_http_health_check ... ok
test mcp::server::tests::test_http_initialize_request ... ok
test mcp::server::tests::test_http_ping_without_initialization ... ok
test mcp::server::tests::test_response_callback_type_compiles ... ok
test mcp::server::tests::test_transport_enum_creation ... ok
test mcp::server::tests::test_transport_http_different_ports ... ok
test mcp::server::tests::test_transport_http_variant_with_port ... ok
test mcp::server::tests::test_transport_stdio_variant ... ok
test mcp::types::types_test::tests::test_error_codes_constants ... ok
test mcp::types::types_test::tests::test_mcp_error_helper_methods ... ok
test mcp::types::types_test::tests::test_mcp_error_serialization ... ok
test mcp::types::types_test::tests::test_mcp_response_helper_methods ... ok
test mcp::types::types_test::tests::test_notification_invalid_jsonrpc_version ... ok
test mcp::types::types_test::tests::test_notification_missing_jsonrpc ... ok
test mcp::types::types_test::tests::test_notification_missing_method ... ok
test mcp::types::types_test::tests::test_notification_with_id_should_be_request ... ok
test mcp::types::types_test::tests::test_parse_notification_with_params ... ok
test mcp::types::types_test::tests::test_parse_request_missing_jsonrpc ... ok
test mcp::types::types_test::tests::test_parse_valid_notification ... ok
test mcp::types::types_test::tests::test_parse_valid_request ... ok
test mcp::types::types_test::tests::test_request_with_empty_params ... ok
test mcp::types::types_test::tests::test_request_without_id_should_fail ... ok
test mcp::types::types_test::tests::test_response_serialization ... ok
test mcp::types::types_test::tests::test_serialize_error_response ... ok
test mcp::types::types_test::tests::test_serialize_success_response ... ok
test models::code_block_node_test::tests::test_as_node_mut_allows_modification ... ok
test models::code_block_node_test::tests::test_as_node_provides_immutable_reference ... ok
test models::code_block_node_test::tests::test_builder_pattern_chains_correctly ... ok
test models::code_block_node_test::tests::test_empty_code_content ... ok
test models::code_block_node_test::tests::test_from_node_rejects_wrong_type ... ok
test models::code_block_node_test::tests::test_from_node_validates_type ... ok
test models::code_block_node_test::tests::test_into_node_preserves_all_data ... ok
test models::code_block_node_test::tests::test_language_getter_handles_invalid_type ... ok
test models::code_block_node_test::tests::test_language_getter_handles_missing_property ... ok
test models::code_block_node_test::tests::test_language_getter_returns_correct_value ... ok
test models::code_block_node_test::tests::test_multiline_code_content ... ok
test models::code_block_node_test::tests::test_new_creates_default_code_block ... ok
test models::code_block_node_test::tests::test_set_language_overwrites_existing ... ok
test models::code_block_node_test::tests::test_set_language_updates_property ... ok
test models::code_block_node_test::tests::test_special_characters_in_language ... ok
test models::code_block_node_test::tests::test_various_languages ... ok
test models::code_block_node_test::tests::test_with_language_sets_language ... ok
test models::date_node_test::tests::test_as_node_mut ... ok
test models::date_node_test::tests::test_as_node_reference ... ok
test models::date_node_test::tests::test_builder_full ... ok
test models::date_node_test::tests::test_builder_minimal ... ok
test models::date_node_test::tests::test_builder_with_is_holiday ... ok
test models::date_node_test::tests::test_builder_with_timezone ... ok
test models::date_node_test::tests::test_date_getter ... ok
test models::date_node_test::tests::test_date_id_deterministic ... ok
test models::date_node_test::tests::test_date_node_is_root ... ok
test models::date_node_test::tests::test_from_node_validates_id_format ... ok
test models::date_node_test::tests::test_from_node_validates_type ... ok
test models::date_node_test::tests::test_into_node_preserves_data ... ok
test models::date_node_test::tests::test_invalid_date_id_format_variations ... ok
test models::date_node_test::tests::test_is_holiday_getter ... ok
test models::date_node_test::tests::test_is_holiday_getter_default ... ok
test models::date_node_test::tests::test_is_holiday_setter ... ok
test models::date_node_test::tests::test_multiple_date_nodes ... ok
test models::date_node_test::tests::test_properties_modification ... ok
test models::date_node_test::tests::test_timezone_clear ... ok
test models::date_node_test::tests::test_timezone_getter ... ok
test models::date_node_test::tests::test_timezone_getter_none ... ok
test models::date_node_test::tests::test_timezone_setter ... ok
test models::date_node_test::tests::test_various_date_formats ... ok
test models::node::tests::test_node_content_update ... ok
test models::node::tests::test_node_creation ... ok
test models::node::tests::test_node_filter_builder ... ok
test models::node::tests::test_node_filter_order_by ... ok
test models::node::tests::test_node_filter_property_filters ... ok
test models::node::tests::test_node_filter_temporal ... ok
test models::node::tests::test_node_properties_merge ... ok
test models::node::tests::test_node_properties_update ... ok
test models::node::tests::test_node_serialization ... ok
test models::node::tests::test_node_set_embedding ... ok
test models::node::tests::test_node_update_builder ... ok
test models::node::tests::test_node_update_is_empty ... ok
test models::node::tests::test_node_validation ... ok
test models::node::tests::test_node_validation_accepts_blank_content ... ok
test models::node::tests::test_node_validation_circular_sibling ... ok
test models::node::tests::test_node_validation_invalid_properties ... ok
test models::node::tests::test_node_with_deterministic_id ... ok
test models::node::tests::test_property_filter_invalid_paths ... ok
test models::node::tests::test_property_filter_serialization ... ok
test models::node::tests::test_property_filter_valid_paths ... ok
test models::node::tests::test_task_node_with_properties ... ok
test models::ordered_list_node_test::tests::test_as_node_mut_allows_modification ... ok
test models::ordered_list_node_test::tests::test_as_node_provides_immutable_reference ... ok
test models::ordered_list_node_test::tests::test_builder_pattern_chains_correctly ... ok
test models::ordered_list_node_test::tests::test_empty_list_content ... ok
test models::ordered_list_node_test::tests::test_from_node_rejects_wrong_type ... ok
test models::ordered_list_node_test::tests::test_from_node_validates_type ... ok
test models::ordered_list_node_test::tests::test_from_node_with_empty_properties ... ok
test models::ordered_list_node_test::tests::test_from_node_with_extra_properties ... ok
test models::ordered_list_node_test::tests::test_into_node_preserves_all_data ... ok
test models::ordered_list_node_test::tests::test_list_with_special_characters ... ok
test models::ordered_list_node_test::tests::test_long_list_item ... ok
test models::ordered_list_node_test::tests::test_multiline_list_content ... ok
test models::ordered_list_node_test::tests::test_new_creates_default_ordered_list ... ok
test models::ordered_list_node_test::tests::test_numbered_content ... ok
test models::ordered_list_node_test::tests::test_various_list_scenarios ... ok
test models::quote_block_node_test::tests::test_as_node_mut_allows_modification ... ok
test models::quote_block_node_test::tests::test_as_node_provides_immutable_reference ... ok
test models::quote_block_node_test::tests::test_builder_pattern_chains_correctly ... ok
test models::quote_block_node_test::tests::test_empty_quote_content ... ok
test models::quote_block_node_test::tests::test_from_node_rejects_wrong_type ... ok
test models::quote_block_node_test::tests::test_from_node_validates_type ... ok
test models::quote_block_node_test::tests::test_from_node_with_empty_properties ... ok
test models::quote_block_node_test::tests::test_from_node_with_extra_properties ... ok
test models::quote_block_node_test::tests::test_into_node_preserves_all_data ... ok
test models::quote_block_node_test::tests::test_multiline_quote_content ... ok
test models::quote_block_node_test::tests::test_new_creates_default_quote_block ... ok
test models::quote_block_node_test::tests::test_quote_with_special_characters ... ok
test models::quote_block_node_test::tests::test_various_quote_scenarios ... ok
test models::schema::tests::test_array_of_objects_serialization ... ok
test models::schema::tests::test_can_delete_field ... ok
test models::schema::tests::test_can_modify_field ... ok
test models::schema::tests::test_deserialization ... ok
test models::schema::tests::test_get_enum_values ... ok
test models::schema::tests::test_nested_field_deserialization ... ok
test models::schema::tests::test_nested_field_serialization ... ok
test models::schema::tests::test_serialization ... ok
test models::task_node_test::tests::test_all_status_values ... ok
test models::task_node_test::tests::test_as_node_mut ... ok
test models::task_node_test::tests::test_as_node_reference ... ok
test models::task_node_test::tests::test_assignee_id_clear ... ok
test models::task_node_test::tests::test_assignee_id_getter ... ok
test models::task_node_test::tests::test_assignee_id_getter_none ... ok
test models::task_node_test::tests::test_assignee_id_setter ... ok
test models::task_node_test::tests::test_builder_full ... ok
test models::task_node_test::tests::test_builder_minimal ... ok
test models::task_node_test::tests::test_builder_with_priority ... ok
test models::task_node_test::tests::test_builder_with_status ... ok
test models::task_node_test::tests::test_due_date_clear ... ok
test models::task_node_test::tests::test_due_date_getter ... ok
test models::task_node_test::tests::test_due_date_getter_none ... ok
test models::task_node_test::tests::test_due_date_setter ... ok
test models::task_node_test::tests::test_from_node_validates_type ... ok
test models::task_node_test::tests::test_into_node_preserves_data ... ok
test models::task_node_test::tests::test_multiple_property_updates ... ok
test models::task_node_test::tests::test_priority_getter ... ok
test models::task_node_test::tests::test_priority_getter_default ... ok
test models::task_node_test::tests::test_priority_setter ... ok
test models::task_node_test::tests::test_status_getter ... ok
test models::task_node_test::tests::test_status_getter_default ... ok
test models::task_node_test::tests::test_status_getter_invalid ... ok
test models::task_node_test::tests::test_status_setter ... ok
test models::task_node_test::tests::test_task_status_as_str ... ok
test models::task_node_test::tests::test_task_status_from_str ... ok
test models::task_node_test::tests::test_task_status_from_str_invalid ... ok
test models::text_node_test::tests::test_as_node_mut ... ok
test models::text_node_test::tests::test_as_node_reference ... ok
test models::text_node_test::tests::test_builder_minimal ... ok
test models::text_node_test::tests::test_builder_with_parent ... ok
test models::text_node_test::tests::test_from_node_validates_type ... ok
test models::text_node_test::tests::test_from_node_with_content ... ok
test models::text_node_test::tests::test_into_node_preserves_data ... ok
test models::text_node_test::tests::test_multiple_text_nodes ... ok
test models::text_node_test::tests::test_properties_are_empty_object ... ok
test models::text_node_test::tests::test_text_node_preserves_metadata ... ok
test models::text_node_test::tests::test_text_node_with_empty_content ... ok
test models::text_node_test::tests::test_text_node_with_multiline_content ... ok
test models::text_node_test::tests::test_text_node_with_unicode_content ... ok
test models::time::tests::test_mock_time_provider_advance ... ok
test models::time::tests::test_mock_time_provider_deterministic ... ok
test models::time::tests::test_mock_time_provider_new ... ok
test models::time::tests::test_mock_time_provider_set_time ... ok
test models::time::tests::test_mock_time_provider_with_time ... ok
test mcp::server::tests::test_http_request_before_initialization_fails ... ok
test models::time::tests::test_system_time_provider ... ok
test operations::error::tests::test_circular_reference_error ... ok
test operations::error::tests::test_database_error ... ok
test operations::error::tests::test_internal_error ... ok
test operations::error::tests::test_invalid_operation_error ... ok
test operations::error::tests::test_invalid_sibling_chain_error ... ok
test operations::error::tests::test_node_not_found_error ... ok
test operations::error::tests::test_non_root_must_have_root_error ... ok
test operations::error::tests::test_parent_root_mismatch_error ... ok
test operations::error::tests::test_root_cannot_have_parent_error ... ok
test operations::error::tests::test_root_cannot_have_root_error ... ok
test operations::error::tests::test_root_cannot_have_sibling_error ... ok
test operations::sibling_queue::tests::test_reorder_with_retry_exponential_backoff ... ok
test operations::sibling_queue::tests::test_reorder_with_retry_eventual_consistency ... ok
test operations::sibling_queue::tests::test_reorder_with_retry_handles_version_conflict ... ok
test operations::sibling_queue::tests::test_reorder_with_retry_nonexistent_node ... ok
test operations::sibling_queue::tests::test_reorder_with_retry_success_on_first_attempt ... ok
test operations::sibling_queue::tests::test_reorder_with_retry_max_retries_exceeded ... ok
test operations::tests::test_auto_generated_ids_still_work ... ok
test operations::tests::test_concurrent_move_version_conflict ... ignored
test operations::tests::test_concurrent_delete_version_conflict ... ok
test operations::tests::test_concurrent_reorder_version_conflict ... ok
test operations::tests::test_concurrent_update_version_conflict ... ok
test operations::tests::test_container_inference_from_parent ... ok
test operations::tests::test_create_node_rejects_invalid_uuid_for_non_date ... ok
test operations::tests::test_create_node_with_frontend_id_preserves_hierarchy ... ok
test operations::tests::test_create_node_with_frontend_provided_date_id ... ok
test operations::tests::test_create_node_with_frontend_provided_uuid ... ok
test operations::tests::test_delete_already_deleted_node_is_idempotent ... ok
test operations::tests::test_delete_node_first_in_chain ... ok
test operations::tests::test_delete_node_fixes_sibling_chain_middle ... ok
test operations::tests::test_delete_node_last_in_chain ... ok
test operations::tests::test_delete_node_with_children ... ok
test operations::tests::test_delete_nonexistent_node ... ok
test operations::tests::test_operations_cloning ... ok
test operations::tests::test_parent_root_mismatch_error ... ignored, TODO(#533): Re-enable after root concept cleanup
test operations::tests::test_operations_creation ... ok
test operations::tests::test_sibling_chain_ordering ... FAILED
test operations::tests::test_update_node_with_hierarchy_combined_update ... ok
test operations::tests::test_update_node_with_hierarchy_empty_update_fails ... ok
test operations::tests::test_update_node_with_hierarchy_content_only ... ok
test operations::tests::test_update_node_with_hierarchy_version_conflict ... ok
test operations::tests::test_update_node_with_hierarchy_hierarchy_only ... ok
test services::migration_registry::tests::test_has_migration_path ... ok
test services::migration_registry::tests::test_migration_chaining ... ok
test services::migration_registry::tests::test_migration_preserves_other_fields ... ok
test services::migration_registry::tests::test_missing_migration_error ... ok
test services::migration_registry::tests::test_missing_schema_version_error ... ok
test services::migration_registry::tests::test_no_migration_needed_newer_version ... ok
test services::migration_registry::tests::test_no_migration_needed_same_version ... ok
test services::migration_registry::tests::test_partial_migration_chain ... ok
test services::migration_registry::tests::test_register_migration ... ok
test services::migration_registry::tests::test_single_migration ... ok
test services::node_service::tests::container_task_filter_tests::basic_filter ... FAILED
test operations::tests::test_version_conflict_includes_current_state ... ok
test services::node_service::tests::container_task_filter_tests::default_behavior ... ok
test services::node_service::tests::container_task_filter_tests::content_contains_with_filter ... FAILED
test services::node_service::tests::container_task_filter_tests::node_type_with_filter ... FAILED
test services::node_service::tests::container_task_filter_tests::mentioned_by_with_filter ... FAILED
test services::node_service::tests::mention_extraction_and_sync::test_auto_sync_mentions_on_update ... FAILED
test services::node_service::tests::mention_extraction_and_sync::test_extract_mentions_deduplication ... ok
test services::node_service::tests::mention_extraction_and_sync::test_extract_mentions_empty_content ... ok
test services::node_service::tests::mention_extraction_and_sync::test_extract_mentions_invalid_ids ... ok
test services::node_service::tests::mention_extraction_and_sync::test_extract_mentions_markdown_format ... ok
test services::node_service::tests::mention_extraction_and_sync::test_extract_mentions_mixed_formats ... ok
test services::node_service::tests::mention_extraction_and_sync::test_extract_mentions_no_mentions ... ok
test services::node_service::tests::mention_extraction_and_sync::test_extract_mentions_plain_format ... ok
test services::node_service::tests::mention_extraction_and_sync::test_extract_mentions_with_query_params ... ok
test services::node_service::tests::mention_extraction_and_sync::test_is_valid_node_id_date ... ok
test services::node_service::tests::mention_extraction_and_sync::test_delete_mention_idempotent ... ok
test services::node_service::tests::mention_extraction_and_sync::test_is_valid_node_id_uuid ... ok
test services::node_service::tests::mention_extraction_and_sync::test_prevent_self_reference ... ok
test services::node_service::tests::mention_extraction_and_sync::test_prevent_root_level_self_reference ... ok
test services::node_service::tests::mention_extraction_and_sync::test_sync_mentions_with_date_nodes ... FAILED
test services::node_service::tests::mention_extraction_and_sync::test_sync_mentions_multiple_adds_and_removes ... FAILED
test services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_backfill_existing_nodes_without_version ... ignored, Requires direct SQL access (Issue #481)
test services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_auto_created_date_nodes_get_version ... FAILED
test services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_new_nodes_get_schema_version ... FAILED
test services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_query_nodes_backfills_versions ... ignored, Requires direct SQL access (Issue #481)
test services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_nodes_with_existing_version_not_modified ... FAILED
test services::node_service::tests::mentioning_containers_tests::basic_backlinks ... FAILED
test services::node_service::tests::mentioning_containers_tests::empty_backlinks ... ok
test services::node_service::tests::mentioning_containers_tests::deduplication ... FAILED
test services::node_service::tests::mentioning_containers_tests::nonexistent_node ... ok
test services::node_service::tests::mentioning_containers_tests::mixed_containers ... FAILED
test services::node_service::tests::mentioning_containers_tests::task_exception ... FAILED
test services::node_service::tests::test_add_mention ... FAILED
test services::node_service::tests::test_bidirectional_mentions ... FAILED
test services::node_service::tests::test_bulk_create ... ok
test services::node_service::tests::test_bulk_delete ... ok
test services::node_service::tests::test_bulk_update ... ok
test services::node_service::tests::test_create_date_node ... ok
test services::node_service::tests::test_create_mention_persists_correctly ... FAILED
test services::node_service::tests::test_create_mention_validates_nodes_exist ... ok
test services::node_service::tests::test_create_task_node ... ok
test services::node_service::tests::test_create_text_node ... ok
test services::node_service::tests::test_delete_node ... ok
test services::node_service::tests::test_get_node_populates_mentions ... FAILED
test services::node_service::tests::test_get_node_returns_none_for_invalid_date ... ok
test services::node_service::tests::test_get_virtual_date_node ... ok
test services::node_service::tests::test_get_virtual_date_node_as_parent ... ok
test services::node_service::tests::test_get_virtual_date_node_not_persisted ... ok
test services::node_service::tests::test_mention_duplicate_handling ... FAILED
test services::node_service::tests::test_mention_nonexistent_node ... ok
test services::node_service::tests::test_persisted_date_takes_precedence_over_virtual ... FAILED
test services::node_service::tests::test_query_mentioned_by ... FAILED
test services::node_service::tests::test_query_nodes_by_type ... FAILED
test services::node_service::tests::test_remove_mention ... ok
test services::node_service::tests::test_reorder_siblings ... FAILED
test services::node_service::tests::test_transaction_rollback_on_error ... ok
test services::node_service::tests::test_update_node ... ok
test services::node_service_root_test::disabled_embedding_tests::test_child_content_update_marks_parent_stale ... ignored, Temporarily disabled during SurrealDB migration - see Issue #481
test services::node_service_root_test::disabled_embedding_tests::test_child_node_not_created_as_stale ... ignored, Temporarily disabled during SurrealDB migration - see Issue #481
test services::node_service_root_test::disabled_embedding_tests::test_child_non_content_update_does_not_mark_parent_stale ... ignored, Temporarily disabled during SurrealDB migration - see Issue #481
test services::node_service_root_test::disabled_embedding_tests::test_multiple_children_updates_marks_parent_once ... ignored, Temporarily disabled during SurrealDB migration - see Issue #481
test services::node_service_root_test::disabled_embedding_tests::test_node_move_marks_both_roots_stale ... ignored, Temporarily disabled during SurrealDB migration - see Issue #481
test services::node_service_root_test::disabled_embedding_tests::test_root_content_update_marks_stale ... ignored, Temporarily disabled during SurrealDB migration - see Issue #481
test services::node_service_root_test::disabled_embedding_tests::test_root_detection_is_null_based_not_type_based ... ignored, Temporarily disabled during SurrealDB migration - see Issue #481
test services::node_service_root_test::disabled_embedding_tests::test_root_node_created_as_stale ... ignored, Temporarily disabled during SurrealDB migration - see Issue #481
test services::node_service::tests::test_virtual_date_persists_when_child_created ... ok
test services::node_service_tree_test::tree_tests::test_get_children_tree_ordering ... FAILED
test services::node_service_tree_test::tree_tests::test_get_children_tree_recursive ... FAILED
test services::schema_service::tests::test_add_core_field_rejected ... ok
test services::schema_service::tests::test_add_user_field_with_custom_namespace ... ok
test services::schema_service::tests::test_add_user_field_with_custom_namespace_succeeds ... ok
test services::schema_service::tests::test_add_user_field_with_org_namespace ... ok
test services::schema_service::tests::test_add_user_field_with_plugin_namespace ... ok
test services::schema_service::tests::test_add_user_field_without_namespace_rejected ... ok
test services::schema_service::tests::test_core_field_with_namespace_rejected ... ok
test services::schema_service::tests::test_create_user_schema_atomic_transaction ... ok
test services::schema_service::tests::test_create_user_schema_auto_relation_naming ... ok
test services::schema_service::tests::test_create_user_schema_basic ... ok
test services::schema_service::tests::test_create_user_schema_duplicate_rejected ... ok
test services::schema_service::tests::test_create_user_schema_field_type_injection_prevented ... ok
test services::schema_service::tests::test_create_user_schema_invalid_reference_rejected ... ok
test services::schema_service::tests::test_create_user_schema_nested_objects ... ok
test services::schema_service::tests::test_create_user_schema_with_relation ... ok
test services::schema_service::tests::test_extend_enum_field ... ok
test services::schema_service::tests::test_extend_non_enum_field_rejected ... ok
test services::schema_service::tests::test_get_schema ... ok
test services::schema_service::tests::test_get_schema_not_found ... ok
test services::schema_service::tests::test_map_field_type_array_of_objects ... ok
test services::schema_service::tests::test_map_field_type_enum ... ok
test services::schema_service::tests::test_map_field_type_string ... ok
test services::schema_service::tests::test_process_fields_primitive_vs_reference ... ok
test services::schema_service::tests::test_query_deeply_nested_fields ... ok
test services::schema_service::tests::test_query_nested_field_simple ... ok
test services::schema_service::tests::test_query_nested_field_with_index ... ok
test services::schema_service::tests::test_remove_core_enum_value_rejected ... ok
test services::schema_service::tests::test_remove_core_field_rejected ... ok
test services::schema_service::tests::test_remove_user_enum_value ... ok
test services::schema_service::tests::test_remove_user_field ... ok
test services::schema_service::tests::test_sync_schema_core_type_uses_schemafull ... ok
test services::schema_service::tests::test_sync_schema_to_database_basic ... ok
test services::schema_service::tests::test_sync_schema_user_type_uses_schemaless ... ok
test services::schema_service::tests::test_sync_schema_with_array_of_objects ... ok
test services::schema_service::tests::test_sync_schema_with_indexed_nested_field ... ok
test services::schema_service::tests::test_sync_schema_with_nested_fields ... ok
test services::schema_service::tests::test_validate_node_against_schema_backward_compat_flat_properties ... ok
test services::schema_service::tests::test_validate_node_against_schema_enum_must_be_string ... ok
test services::schema_service::tests::test_validate_node_against_schema_invalid_enum ... ok
test services::schema_service::tests::test_validate_node_against_schema_no_schema ... ok
test services::schema_service::tests::test_validate_node_against_schema_required_field_missing ... ok
test services::schema_service::tests::test_validate_node_against_schema_user_extended_enum ... ok
test services::schema_service::tests::test_validate_node_against_schema_valid_enum ... ok
test services::schema_service::tests::test_validate_user_schema_all_checks ... ok

failures:

---- db::surreal_store::tests::test_get_all_edges_bulk_load stdout ----
Error: Failed to extract edges

Caused by:
    0: Serialization error: failed to deserialize; expected a string, found $surrealdb::private::sql::Thing { tb: "has_child", id: Id::String("ft9ytdrp5bdfd22pnpjl") }
    1: Serialization error: failed to deserialize; expected a string, found $surrealdb::private::sql::Thing { tb: "has_child", id: Id::String("ft9ytdrp5bdfd22pnpjl") }

---- db::surreal_store::tests::test_search_with_real_nlp_embeddings stdout ----

thread 'db::surreal_store::tests::test_search_with_real_nlp_embeddings' (21388735) panicked at packages/core/src/db/surreal_store.rs:3623:9:
Should find at least one similar node
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- db::surreal_store::tests::test_search_with_similar_nodes stdout ----

thread 'db::surreal_store::tests::test_search_with_similar_nodes' (21388782) panicked at packages/core/src/db/surreal_store.rs:3450:9:
Should find at least one similar node

---- db::surreal_store::tests::test_search_with_threshold_filter stdout ----

thread 'db::surreal_store::tests::test_search_with_threshold_filter' (21388825) panicked at packages/core/src/db/surreal_store.rs:3481:9:
Should find node with similarity > 0.9

---- mcp::handlers::initialize::initialize_test::test_all_expected_tools_present stdout ----

thread 'mcp::handlers::initialize::initialize_test::test_all_expected_tools_present' (21389044) panicked at packages/core/src/mcp/handlers/initialize_test.rs:124:5:
assertion `left == right` failed: Expected exactly 22 tools
  left: 24
 right: 22

---- mcp::handlers::markdown::markdown_test::tests::test_bullet_roundtrip stdout ----

thread 'mcp::handlers::markdown::markdown_test::tests::test_bullet_roundtrip' (21389098) panicked at packages/core/src/mcp/handlers/markdown_test.rs:1268:9:
assertion failed: cleaned.contains("- Bullet 1")

---- mcp::handlers::markdown::markdown_test::tests::test_get_markdown_max_depth stdout ----

thread 'mcp::handlers::markdown::markdown_test::tests::test_get_markdown_max_depth' (21389579) panicked at packages/core/src/mcp/handlers/markdown_test.rs:954:9:
assertion failed: exported_markdown.contains("## Child 1")

---- mcp::handlers::markdown::markdown_test::tests::test_get_markdown_simple stdout ----

thread 'mcp::handlers::markdown::markdown_test::tests::test_get_markdown_simple' (21389754) panicked at packages/core/src/mcp/handlers/markdown_test.rs:913:9:
assertion failed: exported_markdown.contains("Item 1")

---- mcp::handlers::markdown::markdown_test::tests::test_get_markdown_preserves_hierarchy stdout ----

thread 'mcp::handlers::markdown::markdown_test::tests::test_get_markdown_preserves_hierarchy' (21389711) panicked at packages/core/src/mcp/handlers/markdown_test.rs:1139:9:
Missing '## Section 1' in export

---- mcp::handlers::markdown::markdown_test::tests::test_roundtrip_import_export stdout ----

thread 'mcp::handlers::markdown::markdown_test::tests::test_roundtrip_import_export' (21390155) panicked at packages/core/src/mcp/handlers/markdown_test.rs:1058:9:
Missing any list item content

---- mcp::handlers::markdown::markdown_test::tests::test_update_root_from_markdown_complex_structure stdout ----

thread 'mcp::handlers::markdown::markdown_test::tests::test_update_root_from_markdown_complex_structure' (21390455) panicked at packages/core/src/mcp/handlers/markdown_test.rs:1449:9:
Should have task nodes

---- mcp::handlers::nodes::nodes_test::integration_tests::test_get_child_at_index_out_of_bounds stdout ----

thread 'mcp::handlers::nodes::nodes_test::integration_tests::test_get_child_at_index_out_of_bounds' (21390671) panicked at packages/core/src/mcp/handlers/nodes_test.rs:830:9:
assertion failed: error.message.contains("2")

---- mcp::handlers::nodes::nodes_test::integration_tests::test_get_children_ordered_with_multiple_insertions stdout ----

thread 'mcp::handlers::nodes::nodes_test::integration_tests::test_get_children_ordered_with_multiple_insertions' (21390706) panicked at packages/core/src/mcp/handlers/nodes_test.rs:899:9:
assertion `left == right` failed
  left: 1
 right: 3

---- mcp::handlers::nodes::nodes_test::integration_tests::test_move_child_to_index_beyond_sibling_count stdout ----

thread 'mcp::handlers::nodes::nodes_test::integration_tests::test_move_child_to_index_beyond_sibling_count' (21391121) panicked at packages/core/src/mcp/handlers/nodes_test.rs:678:9:
assertion `left == right` failed: Should have 3 children after move
  left: 1
 right: 3

---- mcp::handlers::nodes::nodes_test::integration_tests::test_update_nodes_batch_with_properties stdout ----

thread 'mcp::handlers::nodes::nodes_test::integration_tests::test_update_nodes_batch_with_properties' (21391367) panicked at packages/core/src/mcp/handlers/nodes_test.rs:1271:9:
assertion `left == right` failed
  left: Null
 right: "high"

---- mcp::handlers::nodes::nodes_test::occ_tests::test_property_update_increments_version stdout ----

thread 'mcp::handlers::nodes::nodes_test::occ_tests::test_property_update_increments_version' (21391527) panicked at packages/core/src/mcp/handlers/nodes_test.rs:446:9:
assertion `left == right` failed
  left: Null
 right: "published"

---- mcp::handlers::schema::tests::test_create_user_schema_with_reference stdout ----

thread 'mcp::handlers::schema::tests::test_create_user_schema_with_reference' (21391895) panicked at packages/core/src/mcp/handlers/schema.rs:753:14:
called `Result::unwrap()` on an `Err` value: MCPError { code: -32004, message: "Invalid update: Referenced type 'invoice' for field 'invoice_ref' does not exist. Create the referenced schema first.", data: None }

---- mcp::handlers::tools::tools_test::test_tools_list_returns_all_schemas stdout ----

thread 'mcp::handlers::tools::tools_test::test_tools_list_returns_all_schemas' (21392478) panicked at packages/core/src/mcp/handlers/tools_test.rs:24:5:
assertion `left == right` failed
  left: 24
 right: 22

---- operations::tests::test_sibling_chain_ordering stdout ----

thread 'operations::tests::test_sibling_chain_ordering' (21393716) panicked at packages/core/src/operations/mod.rs:1615:9:
assertion `left == right` failed: Third node should come before second
  left: None
 right: Some("ed752c07-88c2-4a1b-9066-038ed511e4c6")

---- services::node_service::tests::container_task_filter_tests::basic_filter stdout ----

thread 'services::node_service::tests::container_task_filter_tests::basic_filter' (21393970) panicked at packages/core/src/services/node_service.rs:3175:13:
assertion `left == right` failed: Should return exactly 2 nodes (root + task)
  left: 3
 right: 2

---- services::node_service::tests::container_task_filter_tests::content_contains_with_filter stdout ----

thread 'services::node_service::tests::container_task_filter_tests::content_contains_with_filter' (21394038) panicked at packages/core/src/services/node_service.rs:3247:13:
assertion `left == right` failed: Should return only root and task nodes with 'meeting'
  left: 3
 right: 2

---- services::node_service::tests::container_task_filter_tests::node_type_with_filter stdout ----

thread 'services::node_service::tests::container_task_filter_tests::node_type_with_filter' (21394127) panicked at packages/core/src/services/node_service.rs:3355:13:
assertion `left == right` failed: Should return all task nodes (filter allows tasks)
  left: 0
 right: 2

---- services::node_service::tests::container_task_filter_tests::mentioned_by_with_filter stdout ----

thread 'services::node_service::tests::container_task_filter_tests::mentioned_by_with_filter' (21394124) panicked at packages/core/src/services/node_service.rs:3312:13:
assertion `left == right` failed: Should return only root and task that mention target
  left: 0
 right: 2

---- services::node_service::tests::mention_extraction_and_sync::test_auto_sync_mentions_on_update stdout ----

thread 'services::node_service::tests::mention_extraction_and_sync::test_auto_sync_mentions_on_update' (21394201) panicked at packages/core/src/services/node_service.rs:3874:13:
assertion `left == right` failed
  left: 0
 right: 1

---- services::node_service::tests::mention_extraction_and_sync::test_sync_mentions_with_date_nodes stdout ----

thread 'services::node_service::tests::mention_extraction_and_sync::test_sync_mentions_with_date_nodes' (21394388) panicked at packages/core/src/services/node_service.rs:4003:13:
assertion `left == right` failed
  left: 0
 right: 1

---- services::node_service::tests::mention_extraction_and_sync::test_sync_mentions_multiple_adds_and_removes stdout ----

thread 'services::node_service::tests::mention_extraction_and_sync::test_sync_mentions_multiple_adds_and_removes' (21394348) panicked at packages/core/src/services/node_service.rs:3960:13:
assertion `left == right` failed
  left: 0
 right: 2

---- services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_auto_created_date_nodes_get_version stdout ----

thread 'services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_auto_created_date_nodes_get_version' (21394431) panicked at packages/core/src/services/node_service.rs:4083:17:
assertion failed: date_node.properties.get("_schema_version").is_some()

---- services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_new_nodes_get_schema_version stdout ----

thread 'services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_new_nodes_get_schema_version' (21394436) panicked at packages/core/src/services/node_service.rs:4045:17:
assertion failed: retrieved.properties.get("_schema_version").is_some()

---- services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_nodes_with_existing_version_not_modified stdout ----

thread 'services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_nodes_with_existing_version_not_modified' (21394515) panicked at packages/core/src/services/node_service.rs:4100:17:
assertion `left == right` failed
  left: Null
 right: 1

---- services::node_service::tests::mentioning_containers_tests::basic_backlinks stdout ----

thread 'services::node_service::tests::mentioning_containers_tests::basic_backlinks' (21394523) panicked at packages/core/src/services/node_service.rs:3448:13:
assertion `left == right` failed: Should return exactly one root
  left: 0
 right: 1

---- services::node_service::tests::mentioning_containers_tests::deduplication stdout ----

thread 'services::node_service::tests::mentioning_containers_tests::deduplication' (21394591) panicked at packages/core/src/services/node_service.rs:3503:13:
assertion `left == right` failed: Should deduplicate to single root despite two children mentioning target
  left: 0
 right: 1

---- services::node_service::tests::mentioning_containers_tests::mixed_containers stdout ----

thread 'services::node_service::tests::mentioning_containers_tests::mixed_containers' (21394669) panicked at packages/core/src/services/node_service.rs:3702:13:
assertion `left == right` failed: Should return three different containers
  left: 0
 right: 3

---- services::node_service::tests::mentioning_containers_tests::task_exception stdout ----

thread 'services::node_service::tests::mentioning_containers_tests::task_exception' (21394740) panicked at packages/core/src/services/node_service.rs:3544:13:
assertion `left == right` failed: Should return exactly one root
  left: 0
 right: 1

---- services::node_service::tests::test_add_mention stdout ----

thread 'services::node_service::tests::test_add_mention' (21394773) panicked at packages/core/src/services/node_service.rs:2899:9:
assertion `left == right` failed
  left: 0
 right: 1

---- services::node_service::tests::test_bidirectional_mentions stdout ----

thread 'services::node_service::tests::test_bidirectional_mentions' (21394813) panicked at packages/core/src/services/node_service.rs:3035:9:
assertion `left == right` failed
  left: 0
 right: 1

---- services::node_service::tests::test_create_mention_persists_correctly stdout ----

thread 'services::node_service::tests::test_create_mention_persists_correctly' (21394992) panicked at packages/core/src/services/node_service.rs:3065:9:
assertion `left == right` failed: Node 1 should have exactly one mention
  left: 0
 right: 1

---- services::node_service::tests::test_get_node_populates_mentions stdout ----

thread 'services::node_service::tests::test_get_node_populates_mentions' (21395172) panicked at packages/core/src/services/node_service.rs:2951:9:
assertion `left == right` failed
  left: 0
 right: 2

---- services::node_service::tests::test_mention_duplicate_handling stdout ----

thread 'services::node_service::tests::test_mention_duplicate_handling' (21395366) panicked at packages/core/src/services/node_service.rs:3000:9:
assertion `left == right` failed
  left: 0
 right: 1

---- services::node_service::tests::test_persisted_date_takes_precedence_over_virtual stdout ----

thread 'services::node_service::tests::test_persisted_date_takes_precedence_over_virtual' (21395432) panicked at packages/core/src/services/node_service.rs:2701:9:
assertion `left == right` failed
  left: Null
 right: "property"

---- services::node_service::tests::test_query_mentioned_by stdout ----

thread 'services::node_service::tests::test_query_mentioned_by' (21395465) panicked at packages/core/src/services/node_service.rs:2978:9:
assertion `left == right` failed
  left: 0
 right: 2

---- services::node_service::tests::test_query_nodes_by_type stdout ----

thread 'services::node_service::tests::test_query_nodes_by_type' (21395496) panicked at packages/core/src/services/node_service.rs:2764:9:
assertion `left == right` failed
  left: 0
 right: 2

---- services::node_service::tests::test_reorder_siblings stdout ----

thread 'services::node_service::tests::test_reorder_siblings' (21395559) panicked at packages/core/src/services/node_service.rs:2860:9:
assertion `left == right` failed
  left: None
 right: Some("f1c02909-2275-4183-acab-d46e76dbdab2")

---- services::node_service_tree_test::tree_tests::test_get_children_tree_ordering stdout ----

thread 'services::node_service_tree_test::tree_tests::test_get_children_tree_ordering' (21395705) panicked at packages/core/src/services/node_service_tree_test.rs:138:62:
called `Result::unwrap()` on an `Err` value: QueryFailed("Parse error: Unexpected token `BY` expected delimiter `]`\n --> [4:35]\n  |\n4 | ->has_child[ORDER BY order].{\n  |                   ^^ \n --> [4:28]\n  |\n4 | ->has_child[ORDER BY order].{\n  |            ^ expected this delimiter to close\n")

---- services::node_service_tree_test::tree_tests::test_get_children_tree_recursive stdout ----

thread 'services::node_service_tree_test::tree_tests::test_get_children_tree_recursive' (21395743) panicked at packages/core/src/services/node_service_tree_test.rs:76:14:
called `Result::unwrap()` on an `Err` value: QueryFailed("Parse error: Unexpected token `BY` expected delimiter `]`\n --> [4:35]\n  |\n4 | ->has_child[ORDER BY order].{\n  |                   ^^ \n --> [4:28]\n  |\n4 | ->has_child[ORDER BY order].{\n  |            ^ expected this delimiter to close\n")


failures:
    db::surreal_store::tests::test_get_all_edges_bulk_load
    db::surreal_store::tests::test_search_with_real_nlp_embeddings
    db::surreal_store::tests::test_search_with_similar_nodes
    db::surreal_store::tests::test_search_with_threshold_filter
    mcp::handlers::initialize::initialize_test::test_all_expected_tools_present
    mcp::handlers::markdown::markdown_test::tests::test_bullet_roundtrip
    mcp::handlers::markdown::markdown_test::tests::test_get_markdown_max_depth
    mcp::handlers::markdown::markdown_test::tests::test_get_markdown_preserves_hierarchy
    mcp::handlers::markdown::markdown_test::tests::test_get_markdown_simple
    mcp::handlers::markdown::markdown_test::tests::test_roundtrip_import_export
    mcp::handlers::markdown::markdown_test::tests::test_update_root_from_markdown_complex_structure
    mcp::handlers::nodes::nodes_test::integration_tests::test_get_child_at_index_out_of_bounds
    mcp::handlers::nodes::nodes_test::integration_tests::test_get_children_ordered_with_multiple_insertions
    mcp::handlers::nodes::nodes_test::integration_tests::test_move_child_to_index_beyond_sibling_count
    mcp::handlers::nodes::nodes_test::integration_tests::test_update_nodes_batch_with_properties
    mcp::handlers::nodes::nodes_test::occ_tests::test_property_update_increments_version
    mcp::handlers::schema::tests::test_create_user_schema_with_reference
    mcp::handlers::tools::tools_test::test_tools_list_returns_all_schemas
    operations::tests::test_sibling_chain_ordering
    services::node_service::tests::container_task_filter_tests::basic_filter
    services::node_service::tests::container_task_filter_tests::content_contains_with_filter
    services::node_service::tests::container_task_filter_tests::mentioned_by_with_filter
    services::node_service::tests::container_task_filter_tests::node_type_with_filter
    services::node_service::tests::mention_extraction_and_sync::test_auto_sync_mentions_on_update
    services::node_service::tests::mention_extraction_and_sync::test_sync_mentions_multiple_adds_and_removes
    services::node_service::tests::mention_extraction_and_sync::test_sync_mentions_with_date_nodes
    services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_auto_created_date_nodes_get_version
    services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_new_nodes_get_schema_version
    services::node_service::tests::mention_extraction_and_sync::version_tracking_tests::test_nodes_with_existing_version_not_modified
    services::node_service::tests::mentioning_containers_tests::basic_backlinks
    services::node_service::tests::mentioning_containers_tests::deduplication
    services::node_service::tests::mentioning_containers_tests::mixed_containers
    services::node_service::tests::mentioning_containers_tests::task_exception
    services::node_service::tests::test_add_mention
    services::node_service::tests::test_bidirectional_mentions
    services::node_service::tests::test_create_mention_persists_correctly
    services::node_service::tests::test_get_node_populates_mentions
    services::node_service::tests::test_mention_duplicate_handling
    services::node_service::tests::test_persisted_date_takes_precedence_over_virtual
    services::node_service::tests::test_query_mentioned_by
    services::node_service::tests::test_query_nodes_by_type
    services::node_service::tests::test_reorder_siblings
    services::node_service_tree_test::tree_tests::test_get_children_tree_ordering
    services::node_service_tree_test::tree_tests::test_get_children_tree_recursive

test result: FAILED. 495 passed; 44 failed; 14 ignored; 0 measured; 0 filtered out; finished in 7.39s

error: test failed, to rerun pass `-p nodespace-core --lib`
error: script "rust:test" exited with code 101
error: script "test:all" exited with code 101
